<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="CuratorOdyssey - Phase 2: ì»¤ë¦¬ì–´ ê¶¤ì  ë¶„ì„">
  <title>ì»¤ë¦¬ì–´ ê¶¤ì  ë¶„ì„ - CuratorOdyssey</title>
  
  <!-- CSS -->
  <link rel="stylesheet" href="css/design-system.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/animations.css">
  <link rel="stylesheet" href="css/responsive.css">
  
  <!-- D3.js -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
  <!-- Header Navigation -->
  <nav class="header-nav" role="navigation" aria-label="ë©”ì¸ ë„¤ë¹„ê²Œì´ì…˜">
    <div class="container">
      <a href="index.html" class="nav-link">CuratorOdyssey</a>
      <ul class="nav-links">
        <li><a href="artist.html?id=ARTIST_0005" class="nav-link">Phase 1</a></li>
        <li><a href="#phase2" class="nav-link active">Phase 2</a></li>
        <li><a href="#phase3" class="nav-link">Phase 3</a></li>
        <li><a href="#phase4" class="nav-link">Phase 4</a></li>
      </ul>
    </div>
  </nav>

  <!-- Main Content -->
  <main role="main" aria-label="Phase 2: ì»¤ë¦¬ì–´ ê¶¤ì  ë¶„ì„">
    <!-- ì•„í‹°ìŠ¤íŠ¸ ì •ë³´ í—¤ë” -->
    <section class="section" id="artist-header" aria-label="ì•„í‹°ìŠ¤íŠ¸ ì •ë³´">
      <div class="container">
        <div class="artist-info">
          <h1 id="artist-name">ì•„í‹°ìŠ¤íŠ¸: <span id="artist-name-value">ë¡œë”© ì¤‘...</span></h1>
          <button class="btn btn-secondary" onclick="goToPhase1()">â† Phase 1ë¡œ ëŒì•„ê°€ê¸°</button>
        </div>
      </div>
    </section>

    <!-- ì¶• ì„ íƒ íƒ­ -->
    <section class="section" id="axis-tabs" aria-label="ì¶• ì„ íƒ">
      <div class="container">
        <div class="axis-toggles">
          <button class="axis-toggle active" onclick="selectAxis('ì „ì²´')">ì „ì²´</button>
          <button class="axis-toggle" onclick="selectAxis('ì œë„')">ì œë„</button>
          <button class="axis-toggle" onclick="selectAxis('í•™ìˆ ')">í•™ìˆ </button>
          <button class="axis-toggle" onclick="selectAxis('ë‹´ë¡ ')">ë‹´ë¡ </button>
          <button class="axis-toggle" onclick="selectAxis('ë„¤íŠ¸ì›Œí¬')">ë„¤íŠ¸ì›Œí¬</button>
        </div>
      </div>
    </section>

    <!-- StackedAreaChart -->
    <section class="section" id="chart-section" aria-label="ëˆ„ì  ì˜ì—­ ì°¨íŠ¸">
      <div class="container">
        <div class="chart-container stacked-area-chart-container" id="stacked-area-chart" aria-label="ëˆ„ì  ì˜ì—­ ì°¨íŠ¸"></div>
      </div>
    </section>

    <!-- EventTimeline -->
    <section class="section" id="timeline-section" aria-label="ì´ë²¤íŠ¸ íƒ€ì„ë¼ì¸">
      <div class="container">
        <div class="event-timeline" id="event-timeline" aria-label="ì´ë²¤íŠ¸ íƒ€ì„ë¼ì¸"></div>
      </div>
    </section>

    <!-- ë¶„ì„ ì¸ì‚¬ì´íŠ¸ ì¹´ë“œ -->
    <section class="section" id="insights-section" aria-label="ë¶„ì„ ì¸ì‚¬ì´íŠ¸">
      <div class="container">
        <div class="insights-card card">
          <h3>ë¶„ì„ ì¸ì‚¬ì´íŠ¸</h3>
          <p id="insights-content">ë¡œë”© ì¤‘...</p>
        </div>
      </div>
    </section>

    <!-- ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ -->
    <section class="section" id="navigation-section" aria-label="ë„¤ë¹„ê²Œì´ì…˜">
      <div class="container">
        <button class="btn btn-primary" onclick="goToPhase3()">Phase 3: ë¹„êµ ë¶„ì„ ë³´ê¸°</button>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer" role="contentinfo">
    <div class="container">
      <p>CuratorOdyssey v1.0</p>
    </div>
  </footer>

  <!-- JavaScript -->
  <script src="js/config.js"></script>
  <script src="js/api-mock.js"></script>
  <script src="js/charts/stacked-area-chart.js"></script>
  
  <script>
    let currentAxis = 'ì „ì²´';
    let artistId = 'ARTIST_0005';
    let timeseriesData = null;

    // URL íŒŒë¼ë¯¸í„°ì—ì„œ ì•„í‹°ìŠ¤íŠ¸ ID ê°€ì ¸ì˜¤ê¸°
    function getArtistIdFromURL() {
      const params = new URLSearchParams(window.location.search);
      return params.get('id') || 'ARTIST_0005';
    }

    // Phase 1ë¡œ ì´ë™
    function goToPhase1() {
      window.location.href = `artist.html?id=${artistId}`;
    }

    // Phase 3ë¡œ ì´ë™
    function goToPhase3() {
      // Phase 3ëŠ” ë‘ ì•„í‹°ìŠ¤íŠ¸ ë¹„êµì´ë¯€ë¡œ ê¸°ë³¸ê°’ ì‚¬ìš©
      window.location.href = `compare.html?artistA=${artistId}&artistB=ARTIST_0003`;
    }

    // ì¶• ì„ íƒ
    function selectAxis(axis) {
      currentAxis = axis;
      
      // íƒ­ í™œì„±í™” ì—…ë°ì´íŠ¸
      document.querySelectorAll('.axis-toggle').forEach(btn => {
        btn.classList.remove('active');
      });
      event.target.classList.add('active');
      
      // ì°¨íŠ¸ ì—…ë°ì´íŠ¸
      if (timeseriesData) {
        updateChart();
      }
    }

    // ì°¨íŠ¸ ì—…ë°ì´íŠ¸
    function updateChart() {
      // TODO: StackedAreaChart ì—…ë°ì´íŠ¸ ë¡œì§
      console.log('Updating chart for axis:', currentAxis);
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ë°ì´í„° ë¡œë“œ
    document.addEventListener('DOMContentLoaded', async () => {
      artistId = getArtistIdFromURL();
      
      try {
        // ì•„í‹°ìŠ¤íŠ¸ ìš”ì•½ ë°ì´í„° ë¡œë“œ (ì´ë¦„ í‘œì‹œìš©)
        const summaryData = await apiMock.getArtistSummary(artistId);
        document.getElementById('artist-name-value').textContent = summaryData.data.name || artistId;

        // ë°°ì¹˜ ì‹œê³„ì—´ ë°ì´í„° ë¡œë“œ
        const batchData = await apiMock.getBatchTimeseries(artistId, ['ì œë„', 'í•™ìˆ ', 'ë‹´ë¡ ', 'ë„¤íŠ¸ì›Œí¬']);
        timeseriesData = batchData.data.batch;

        // StackedAreaChart ë Œë”ë§
        // TODO: StackedAreaChart êµ¬í˜„ í•„ìš”
        console.log('Timeseries data loaded:', timeseriesData);

        // ì¸ì‚¬ì´íŠ¸ í‘œì‹œ
        document.getElementById('insights-content').innerHTML = `
          <p>ğŸ“ˆ ì„±ì¥ íŒ¨í„´: ì§€ì†ì  ìƒìŠ¹ (ìµœê·¼ 5ë…„)</p>
          <p>ğŸ¯ ì£¼ìš” ì´ë²¤íŠ¸: 2015ë…„ ì „ì‹œ (ìŠ¤íŒŒì´í¬)</p>
          <p>ğŸ“Š ìƒê´€ê³„ìˆ˜: ì œë„-í•™ìˆ  0.85</p>
        `;

      } catch (error) {
        console.error('Failed to load data:', error);
      }
    });
  </script>
</body>
</html>

