# CO-1016 CURATOR ODYSSEY: 문서-구현 간 갭 분석

**생성일**: 2025-11-10  
**분석 범위**: 백엔드, 프론트엔드, 데이터 레이어, 문서 일관성

---

## 1. 갭 분석 개요

### 1.1 분석 방법론

본 갭 분석은 다음 기준으로 수행되었습니다:
- **문서 상태**: 문서에 정의된 요구사항/스펙
- **구현 상태**: 실제 코드에서 구현된 기능
- **갭 유형**: Critical, High, Medium, Low
- **우선순위**: 비즈니스 영향도, 기술 부채, 구현 난이도

### 1.2 갭 분류 기준

| 갭 유형 | 정의 | 예시 |
|---------|------|------|
| **Critical** | 문서에 정의되었으나 미구현 (기능 누락) | FR-P2-EVT-001 미구현 |
| **High** | 부분 구현 또는 스펙 불일치 | API 호출 주석 처리, 목업만 사용 |
| **Medium** | 문서 부재 또는 오래된 문서 | 컬렉션명 불일치, 추가 엔드포인트 미문서화 |
| **Low** | 스타일/포맷 불일치 | 에러 응답 형식 불일치 |

---

## 2. Critical 갭 (즉시 해결 필요)

### 2.1 백엔드 - 미구현 API 엔드포인트

| FR ID | 엔드포인트 | 문서 상태 | 구현 상태 | 비즈니스 영향 | 예상 시간 |
|-------|-----------|----------|----------|--------------|----------|
| FR-P2-EVT-001 | `GET /api/artist/:id/events/:axis` | ✅ 정의됨 | ❌ 미구현 | Phase 2 이벤트 영향 분석 불가 | 2-3일 |
| FR-P2-BAT-001 | `POST /api/batch/timeseries` | ✅ 정의됨 | ❌ 미구현 | 배치 시계열 조회 불가 | 2-3일 |

**상세 설명**:
- **FR-P2-EVT-001**: 이벤트 영향 분석 API가 문서에 정의되었으나 구현되지 않음
  - 필요 작업: Firestore `events` 컬렉션 쿼리 로직, 이벤트 영향 계산 알고리즘
- **FR-P2-BAT-001**: 배치 시계열 조회 API가 문서에 정의되었으나 구현되지 않음
  - 필요 작업: 배치 요청 처리 로직, 병렬 쿼리 최적화

### 2.2 프론트엔드 - API 연동 미활성화

| 항목 | 문서 상태 | 구현 상태 | 비즈니스 영향 | 예상 시간 |
|------|----------|----------|--------------|----------|
| API 호출 활성화 | ✅ 정의됨 | ❌ 주석 처리됨 | 실제 데이터 사용 불가 | 1일 |
| React Query 마이그레이션 | ✅ 권장됨 | ❌ 미사용 | 캐싱/리트라이 자동화 없음 | 2-3일 |

**상세 설명**:
- 모든 Phase 컴포넌트에서 API 호출이 주석 처리되어 목업 데이터만 사용 중
- React Query가 설치되어 있으나 사용되지 않음

### 2.3 데이터 레이어 - 컬렉션명 불일치

| 코드 컬렉션명 | 문서 컬렉션명 | 상태 | 비즈니스 영향 | 예상 시간 |
|--------------|--------------|------|--------------|----------|
| `artist_comparisons` | `compare_pairs` | 불일치 | 데이터 조회 실패 가능 | 0.5일 |
| `artist_sunburst` | 없음 | 문서 부재 | 문서화 부족 | 0.5일 |
| `ai_reports` | 없음 | 문서 부재 | 문서화 부족 | 0.5일 |
| `system_health` | 없음 | 문서 부재 | 문서화 부족 | 0.5일 |

---

## 3. High 갭 (우선 해결 필요)

### 3.1 백엔드 - 부분 구현

| 항목 | 문서 상태 | 구현 상태 | 갭 설명 |
|------|----------|----------|---------|
| `getArtistTimeseries` | ✅ 정의됨 | ⚠️ 목업만 | Firestore 연동 없음, 실제 시계열 데이터 미사용 |
| 에러 처리 표준화 | ✅ 정의됨 | ⚠️ 부분적 | 커스텀 에러 코드 미사용, 응답 형식 불일치 |
| 입력 검증 | ✅ 정의됨 | ⚠️ 부분적 | 일부 엔드포인트만 검증 |

### 3.2 프론트엔드 - 부분 구현

| 항목 | 문서 상태 | 구현 상태 | 갭 설명 |
|------|----------|----------|---------|
| 에러 처리 | ✅ 정의됨 | ⚠️ 기본적 | 타입별 에러 처리 없음, 복구 메커니즘 없음 |
| 상태 관리 | ✅ 권장됨 | ⚠️ 로컬만 | 전역 상태 관리 없음 |
| 로딩 상태 | ✅ 정의됨 | ⚠️ 기본적 | 더 나은 UX 필요 |

### 3.3 데이터 레이어 - 검증 자동화

| 항목 | 문서 상태 | 구현 상태 | 갭 설명 |
|------|----------|----------|---------|
| ±0.5p 일관성 검증 | ✅ 정의됨 | ⚠️ 수동 | Cloud Functions 자동화 필요 |
| 데이터 품질 검증 | ✅ 정의됨 | ⚠️ 부분적 | DataQualityValidator 구현 상태 불명확 |

---

## 4. Medium 갭 (개선 필요)

### 4.1 문서화 갭

| 항목 | 상태 | 설명 |
|------|------|------|
| 추가 엔드포인트 문서화 | ⚠️ | `POST /api/ai/vertex-generate`, `GET /api/ai/vertex-health` 미문서화 |
| 실제 구현 반영 | ⚠️ | 목업 데이터 구조, 에러 응답 형식 미문서화 |
| 배치 함수 구현 상태 | ❌ | ETL 파이프라인 구현 상태 불명확 |

### 4.2 코드-문서 불일치

| 항목 | 코드 | 문서 | 조치 |
|------|------|------|------|
| 컬렉션명 | `artist_comparisons` | `compare_pairs` | 통일 필요 |
| 추가 컬렉션 | `artist_sunburst`, `ai_reports`, `system_health` | 없음 | 문서화 필요 |

### 4.3 최적화 갭

| 항목 | 문서 상태 | 구현 상태 | 설명 |
|------|----------|----------|------|
| 캐싱 | ✅ 권장됨 | ❌ 미구현 | Functions 레벨 캐싱 없음 |
| Rate Limiting | ✅ 정의됨 | ❌ 미구현 | 구현 필요 |
| 성능 모니터링 | ✅ 권장됨 | ⚠️ 부분적 | Cloud Monitoring 통합 필요 |

---

## 5. Low 갭 (스타일/포맷)

### 5.1 코드 스타일

| 항목 | 상태 | 설명 |
|------|------|------|
| 에러 응답 형식 | ⚠️ 불일치 | 일부는 `{error: ...}`, 일부는 다른 형식 |
| 로깅 방식 | ⚠️ 불일치 | console.log 사용, Cloud Logging으로 전환 권장 |

### 5.2 문서 스타일

| 항목 | 상태 | 설명 |
|------|------|------|
| 버전 일관성 | ⚠️ | 일부 문서 버전 없음 |
| 날짜 형식 | ✅ | 대부분 YYYY-MM-DD 준수 |
| 용어 통일 | ⚠️ | 용어집 필요 |

---

## 6. 갭 분석 매트릭스

### 6.1 전체 갭 요약

| 갭 유형 | 백엔드 | 프론트엔드 | 데이터 레이어 | 문서 | 합계 |
|---------|--------|-----------|--------------|------|------|
| **Critical** | 2 | 2 | 1 | 0 | **5** |
| **High** | 3 | 3 | 2 | 0 | **8** |
| **Medium** | 3 | 2 | 2 | 3 | **10** |
| **Low** | 2 | 0 | 0 | 3 | **5** |
| **합계** | **10** | **7** | **5** | **6** | **28** |

### 6.2 Phase별 갭 분석

| Phase | Critical | High | Medium | Low | 합계 |
|-------|----------|------|--------|-----|------|
| Phase 1 | 0 | 1 | 1 | 0 | 2 |
| Phase 2 | 2 | 2 | 1 | 0 | 5 |
| Phase 3 | 0 | 1 | 1 | 0 | 2 |
| Phase 4 | 0 | 1 | 1 | 0 | 2 |
| 공통 | 3 | 3 | 6 | 5 | 17 |

---

## 7. 우선순위별 갭 정리

### 7.1 Critical 우선순위 (즉시 해결)

1. **FR-P2-EVT-001 구현** (2-3일)
   - 비즈니스 영향도: 높음 (Phase 2 핵심 기능)
   - 기술 부채: 중간
   - 구현 난이도: 중간

2. **FR-P2-BAT-001 구현** (2-3일)
   - 비즈니스 영향도: 중간 (배치 처리 효율성)
   - 기술 부채: 낮음
   - 구현 난이도: 중간

3. **프론트엔드 API 연동 활성화** (1일)
   - 비즈니스 영향도: 높음 (실제 데이터 사용)
   - 기술 부채: 높음
   - 구현 난이도: 낮음

4. **컬렉션명 통일** (0.5일)
   - 비즈니스 영향도: 높음 (데이터 조회 실패 가능)
   - 기술 부채: 중간
   - 구현 난이도: 낮음

5. **React Query 마이그레이션** (2-3일)
   - 비즈니스 영향도: 중간 (UX 개선)
   - 기술 부채: 높음
   - 구현 난이도: 중간

### 7.2 High 우선순위 (우선 해결)

1. **에러 처리 표준화** (1-2일)
2. **입력 검증 강화** (1일)
3. **데이터 품질 검증 자동화** (2일)
4. **로깅 개선** (1일)
5. **에러 처리 강화 (프론트엔드)** (1-2일)

### 7.3 Medium 우선순위 (개선 필요)

1. **문서화 업데이트** (1-2일)
2. **캐싱 구현** (2-3일)
3. **Rate Limiting 구현** (1-2일)
4. **성능 모니터링** (2일)
5. **인덱스 최적화** (1일)

### 7.4 Low 우선순위 (스타일 개선)

1. **에러 응답 형식 통일** (0.5일)
2. **문서 버전 통일** (0.5일)
3. **용어집 작성** (1일)

---

## 8. 갭 해소 전략

### 8.1 단기 전략 (1-2주)

1. Critical 갭 해소 (5개)
2. High 우선순위 갭 일부 해소 (3-4개)
3. 문서화 업데이트

### 8.2 중기 전략 (3-4주)

1. High 우선순위 갭 전부 해소
2. Medium 우선순위 갭 일부 해소
3. 코드-문서 동기화 완료

### 8.3 장기 전략 (1-2개월)

1. Medium/Low 갭 전부 해소
2. 지속적인 문서-구현 동기화 프로세스 구축
3. 자동화된 갭 분석 도구 도입

---

## 9. 갭 해소 시 예상 효과

### 9.1 기능 완성도

- **현재**: 약 70% 완성
- **Critical 해소 후**: 약 85% 완성
- **High 해소 후**: 약 95% 완성
- **전부 해소 후**: 100% 완성

### 9.2 기술 부채 감소

- **현재**: 중간-높음
- **Critical 해소 후**: 낮음-중간
- **High 해소 후**: 낮음
- **전부 해소 후**: 최소화

### 9.3 유지보수성 향상

- 문서-구현 일치도 향상
- 코드 가독성 향상
- 신규 개발자 온보딩 시간 단축

---

## 10. 갭 모니터링 및 추적

### 10.1 추적 방법

- GitHub Issues로 각 갭 추적
- 갭 해소 시 문서 업데이트
- 정기적인 갭 분석 (월 1회)

### 10.2 갭 해소 체크리스트

- [ ] Critical 갭 해소 (5개)
- [ ] High 우선순위 갭 해소 (8개)
- [ ] Medium 우선순위 갭 해소 (10개)
- [ ] Low 우선순위 갭 해소 (5개)
- [ ] 문서-구현 동기화 완료
- [ ] 갭 모니터링 프로세스 구축

---

**분석 완료일**: 2025-11-10  
**다음 단계**: 갭 우선순위화 및 실행 로드맵 작성

