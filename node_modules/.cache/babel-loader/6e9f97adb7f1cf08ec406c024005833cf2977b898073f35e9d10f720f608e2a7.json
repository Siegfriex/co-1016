{"ast":null,"code":"import _objectSpread from \"C:/co-1016/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { AbstractChatCompletionRunner } from \"./AbstractChatCompletionRunner.mjs\";\nimport { isAssistantMessage } from \"./chatCompletionUtils.mjs\";\nexport class ChatCompletionRunner extends AbstractChatCompletionRunner {\n  /** @deprecated - please use `runTools` instead. */\n  static runFunctions(client, params, options) {\n    const runner = new ChatCompletionRunner();\n    const opts = _objectSpread(_objectSpread({}, options), {}, {\n      headers: _objectSpread(_objectSpread({}, options === null || options === void 0 ? void 0 : options.headers), {}, {\n        'X-Stainless-Helper-Method': 'runFunctions'\n      })\n    });\n    runner._run(() => runner._runFunctions(client, params, opts));\n    return runner;\n  }\n  static runTools(client, params, options) {\n    const runner = new ChatCompletionRunner();\n    const opts = _objectSpread(_objectSpread({}, options), {}, {\n      headers: _objectSpread(_objectSpread({}, options === null || options === void 0 ? void 0 : options.headers), {}, {\n        'X-Stainless-Helper-Method': 'runTools'\n      })\n    });\n    runner._run(() => runner._runTools(client, params, opts));\n    return runner;\n  }\n  _addMessage(message) {\n    let emit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    super._addMessage(message, emit);\n    if (isAssistantMessage(message) && message.content) {\n      this._emit('content', message.content);\n    }\n  }\n}","map":{"version":3,"names":["AbstractChatCompletionRunner","isAssistantMessage","ChatCompletionRunner","runFunctions","client","params","options","runner","opts","_objectSpread","headers","_run","_runFunctions","runTools","_runTools","_addMessage","message","emit","arguments","length","undefined","content","_emit"],"sources":["C:\\co-1016\\node_modules\\openai\\src\\lib\\ChatCompletionRunner.ts"],"sourcesContent":["import {\r\n  type ChatCompletionMessageParam,\r\n  type ChatCompletionCreateParamsNonStreaming,\r\n} from '../resources/chat/completions';\r\nimport { type RunnableFunctions, type BaseFunctionsArgs, RunnableTools } from './RunnableFunction';\r\nimport {\r\n  AbstractChatCompletionRunner,\r\n  AbstractChatCompletionRunnerEvents,\r\n  RunnerOptions,\r\n} from './AbstractChatCompletionRunner';\r\nimport { isAssistantMessage } from './chatCompletionUtils';\r\nimport OpenAI from '../index';\r\nimport { AutoParseableTool } from '../lib/parser';\r\n\r\nexport interface ChatCompletionRunnerEvents extends AbstractChatCompletionRunnerEvents {\r\n  content: (content: string) => void;\r\n}\r\n\r\nexport type ChatCompletionFunctionRunnerParams<FunctionsArgs extends BaseFunctionsArgs> = Omit<\r\n  ChatCompletionCreateParamsNonStreaming,\r\n  'functions'\r\n> & {\r\n  functions: RunnableFunctions<FunctionsArgs>;\r\n};\r\n\r\nexport type ChatCompletionToolRunnerParams<FunctionsArgs extends BaseFunctionsArgs> = Omit<\r\n  ChatCompletionCreateParamsNonStreaming,\r\n  'tools'\r\n> & {\r\n  tools: RunnableTools<FunctionsArgs> | AutoParseableTool<any, true>[];\r\n};\r\n\r\nexport class ChatCompletionRunner<ParsedT = null> extends AbstractChatCompletionRunner<\r\n  ChatCompletionRunnerEvents,\r\n  ParsedT\r\n> {\r\n  /** @deprecated - please use `runTools` instead. */\r\n  static runFunctions(\r\n    client: OpenAI,\r\n    params: ChatCompletionFunctionRunnerParams<any[]>,\r\n    options?: RunnerOptions,\r\n  ): ChatCompletionRunner<null> {\r\n    const runner = new ChatCompletionRunner();\r\n    const opts = {\r\n      ...options,\r\n      headers: { ...options?.headers, 'X-Stainless-Helper-Method': 'runFunctions' },\r\n    };\r\n    runner._run(() => runner._runFunctions(client, params, opts));\r\n    return runner;\r\n  }\r\n\r\n  static runTools<ParsedT>(\r\n    client: OpenAI,\r\n    params: ChatCompletionToolRunnerParams<any[]>,\r\n    options?: RunnerOptions,\r\n  ): ChatCompletionRunner<ParsedT> {\r\n    const runner = new ChatCompletionRunner<ParsedT>();\r\n    const opts = {\r\n      ...options,\r\n      headers: { ...options?.headers, 'X-Stainless-Helper-Method': 'runTools' },\r\n    };\r\n    runner._run(() => runner._runTools(client, params, opts));\r\n    return runner;\r\n  }\r\n\r\n  override _addMessage(\r\n    this: ChatCompletionRunner<ParsedT>,\r\n    message: ChatCompletionMessageParam,\r\n    emit: boolean = true,\r\n  ) {\r\n    super._addMessage(message, emit);\r\n    if (isAssistantMessage(message) && message.content) {\r\n      this._emit('content', message.content as string);\r\n    }\r\n  }\r\n}\r\n"],"mappings":";SAMEA,4BAA4B,QAG7B;SACQC,kBAAkB,QAAE;AAsB7B,OAAM,MAAOC,oBAAqC,SAAQF,4BAGzD;EACC;EACA,OAAOG,YAAYA,CACjBC,MAAc,EACdC,MAAiD,EACjDC,OAAuB;IAEvB,MAAMC,MAAM,GAAG,IAAIL,oBAAoB,EAAE;IACzC,MAAMM,IAAI,GAAAC,aAAA,CAAAA,aAAA,KACLH,OAAO;MACVI,OAAO,EAAAD,aAAA,CAAAA,aAAA,KAAOH,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEI,OAAO;QAAE,2BAA2B,EAAE;MAAc;IAAE,EAC9E;IACDH,MAAM,CAACI,IAAI,CAAC,MAAMJ,MAAM,CAACK,aAAa,CAACR,MAAM,EAAEC,MAAM,EAAEG,IAAI,CAAC,CAAC;IAC7D,OAAOD,MAAM;EACf;EAEA,OAAOM,QAAQA,CACbT,MAAc,EACdC,MAA6C,EAC7CC,OAAuB;IAEvB,MAAMC,MAAM,GAAG,IAAIL,oBAAoB,EAAW;IAClD,MAAMM,IAAI,GAAAC,aAAA,CAAAA,aAAA,KACLH,OAAO;MACVI,OAAO,EAAAD,aAAA,CAAAA,aAAA,KAAOH,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEI,OAAO;QAAE,2BAA2B,EAAE;MAAU;IAAE,EAC1E;IACDH,MAAM,CAACI,IAAI,CAAC,MAAMJ,MAAM,CAACO,SAAS,CAACV,MAAM,EAAEC,MAAM,EAAEG,IAAI,CAAC,CAAC;IACzD,OAAOD,MAAM;EACf;EAESQ,WAAWA,CAElBC,OAAmC,EACf;IAAA,IAApBC,IAAA,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAgB,IAAI;IAEpB,KAAK,CAACH,WAAW,CAACC,OAAO,EAAEC,IAAI,CAAC;IAChC,IAAIhB,kBAAkB,CAACe,OAAO,CAAC,IAAIA,OAAO,CAACK,OAAO,EAAE;MAClD,IAAI,CAACC,KAAK,CAAC,SAAS,EAAEN,OAAO,CAACK,OAAiB,CAAC;;EAEpD","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}