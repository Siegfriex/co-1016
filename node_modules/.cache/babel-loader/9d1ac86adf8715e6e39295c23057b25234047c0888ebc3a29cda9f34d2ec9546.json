{"ast":null,"code":"// CuratorOdyssey AI Analysis Service\n// OpenAI GPT-4 + Anthropic Claude ë°±ì—… ì‹œìŠ¤í…œ\n\nimport OpenAI from 'openai';\nclass AIService {\n  constructor() {\n    // OpenAI ì´ˆê¸°í™” (ë©”ì¸ AI ì—”ì§„)\n    this.openai = null;\n    this.anthropicKey = process.env.REACT_APP_ANTHROPIC_API_KEY;\n    this.vertexConfig = {\n      projectId: process.env.REACT_APP_VERTEX_AI_PROJECT_ID,\n      location: process.env.REACT_APP_VERTEX_AI_LOCATION\n    };\n\n    // ì„¤ì •ê°’\n    this.maxRetries = parseInt(process.env.REACT_APP_AI_MAX_RETRIES) || 3;\n    this.timeout = parseInt(process.env.REACT_APP_AI_TIMEOUT) || 30000;\n    this.initializeOpenAI();\n  }\n  initializeOpenAI() {\n    const apiKey = process.env.REACT_APP_OPENAI_API_KEY;\n    if (apiKey && apiKey !== 'your_openai_api_key_here') {\n      this.openai = new OpenAI({\n        apiKey: apiKey,\n        dangerouslyAllowBrowser: true // âš ï¸ í”„ë¡œë•ì…˜ì—ì„œëŠ” ë°±ì—”ë“œë¡œ ì´ì „ í•„ìš”\n      });\n    }\n  }\n\n  /**\r\n   * Phase 1 ì•„í‹°ìŠ¤íŠ¸ ë°ì´í„° ë¶„ì„ (í•µì‹¬ ë©”ì„œë“œ)\r\n   * @param {Object} artistData - ì•„í‹°ìŠ¤íŠ¸ ë ˆì´ë”/ì„ ë²„ìŠ¤íŠ¸ ë°ì´í„°\r\n   * @returns {Promise<Object>} AI ë¶„ì„ ê²°ê³¼\r\n   */\n  async generatePhase1Insights(artistData) {\n    try {\n      console.log('ğŸ¤– AI Phase 1 ë¶„ì„ ì‹œì‘:', artistData.name);\n      if (!this.openai) {\n        return this.generateFallbackInsights(artistData);\n      }\n      const prompt = this.buildPhase1Prompt(artistData);\n      const completion = await this.callOpenAI(prompt);\n      return {\n        success: true,\n        insights: completion,\n        model: 'gpt-4',\n        timestamp: new Date().toISOString(),\n        analysisType: 'phase1',\n        artist: artistData.name\n      };\n    } catch (error) {\n      console.error('AI ë¶„ì„ ì˜¤ë¥˜:', error);\n\n      // Anthropic ë°±ì—… ì‹œë„\n      try {\n        if (this.anthropicKey) {\n          const claudeResult = await this.callAnthropic(this.buildPhase1Prompt(artistData));\n          return {\n            success: true,\n            insights: claudeResult,\n            model: 'claude-3',\n            timestamp: new Date().toISOString(),\n            analysisType: 'phase1',\n            artist: artistData.name,\n            fallbackUsed: true\n          };\n        }\n      } catch (claudeError) {\n        console.error('Claude ë°±ì—…ë„ ì‹¤íŒ¨:', claudeError);\n      }\n\n      // ìµœì¢… í´ë°±\n      return this.generateFallbackInsights(artistData);\n    }\n  }\n\n  /**\r\n   * OpenAI API í˜¸ì¶œ\r\n   */\n  async callOpenAI(prompt, retries = 0) {\n    try {\n      const response = await Promise.race([this.openai.chat.completions.create({\n        model: process.env.REACT_APP_OPENAI_MODEL || 'gpt-4',\n        messages: [{\n          role: 'system',\n          content: 'CuratorOdysseyì˜ ì „ë¬¸ ì•„íŠ¸ë§ˆì¼“ ë¶„ì„ê°€ë¡œì„œ, ë°ì´í„° ê¸°ë°˜ì˜ ê°ê´€ì ì´ê³  í†µì°°ë ¥ ìˆëŠ” ë¶„ì„ì„ ì œê³µí•©ë‹ˆë‹¤.'\n        }, {\n          role: 'user',\n          content: prompt\n        }],\n        max_tokens: 1000,\n        temperature: 0.7\n      }), new Promise((_, reject) => setTimeout(() => reject(new Error('AI ì‘ë‹µ ì‹œê°„ ì´ˆê³¼')), this.timeout))]);\n      return response.choices[0].message.content;\n    } catch (error) {\n      if (retries < this.maxRetries) {\n        console.log(`AI ì¬ì‹œë„ ${retries + 1}/${this.maxRetries}`);\n        await new Promise(resolve => setTimeout(resolve, 1000 * (retries + 1)));\n        return this.callOpenAI(prompt, retries + 1);\n      }\n      throw error;\n    }\n  }\n\n  /**\r\n   * Anthropic Claude API í˜¸ì¶œ (ë°±ì—…ìš©)\r\n   */\n  async callAnthropic(prompt) {\n    // ì‹¤ì œ êµ¬í˜„ì€ Anthropic SDK ì‚¬ìš©\n    // í˜„ì¬ëŠ” êµ¬ì¡°ë§Œ ì •ì˜\n    throw new Error('Anthropic ì—°ë™ì€ í–¥í›„ êµ¬í˜„ ì˜ˆì •');\n  }\n\n  /**\r\n   * Vertex AI í˜¸ì¶œ (í–¥í›„ ë°±ì—”ë“œ ì´ì „ìš©)\r\n   */\n  async callVertexAI(prompt) {\n    const endpoint = `https://asia-northeast3-aiplatform.googleapis.com/v1/projects/${this.vertexConfig.projectId}/locations/${this.vertexConfig.location}/publishers/google/models/gemini-pro:generateContent`;\n\n    // ì‹¤ì œ êµ¬í˜„ì€ ë°±ì—”ë“œì—ì„œ ì²˜ë¦¬\n    throw new Error('Vertex AIëŠ” ë°±ì—”ë“œì—ì„œ ì²˜ë¦¬ ì˜ˆì •');\n  }\n\n  /**\r\n   * Phase 1 í”„ë¡¬í”„íŠ¸ ìƒì„±\r\n   */\n  buildPhase1Prompt(artistData) {\n    return `CuratorOdyssey Phase 1 ë¶„ì„ê°€ë¡œì„œ, ë‹¤ìŒ ì‘ê°€ì˜ ë°ì´í„°ë¥¼ ì¢…í•© ë¶„ì„í•´ì£¼ì„¸ìš”:\n\n**ì‘ê°€**: ${artistData.name}\n\n**5ì¶• ë ˆì´ë” ì ìˆ˜** (0-100):\n- ê¸°ê´€ì „ì‹œ(I): ${artistData.radar5.I}ì \n- í˜ì–´(F): ${artistData.radar5.F}ì   \n- ì‹œìƒ(A): ${artistData.radar5.A}ì \n- ë¯¸ë””ì–´(M): ${artistData.radar5.M}ì \n- êµìœ¡(Sedu): ${artistData.radar5.Sedu}ì \n\n**4ì¶• ì„ ë²„ìŠ¤íŠ¸ ê·¼ê±° ë°ì´í„°**:\n- ì œë„: ${artistData.sunburst_l1.ì œë„}ì \n- í•™ìˆ : ${artistData.sunburst_l1.í•™ìˆ }ì \n- ë‹´ë¡ : ${artistData.sunburst_l1.ë‹´ë¡ }ì \n- ë„¤íŠ¸ì›Œí¬: ${artistData.sunburst_l1.ë„¤íŠ¸ì›Œí¬}ì \n\n**ë¶„ì„ ìš”ì²­**:\n1. **ê°€ì¹˜ êµ¬ì„±ì˜ íŠ¹ì§•**: 5ì¶• ì ìˆ˜ íŒ¨í„´ì—ì„œ ë‚˜íƒ€ë‚˜ëŠ” ì‘ê°€ì˜ ê°•ì ê³¼ íŠ¹ì„±\n2. **ê· í˜•ë„ ë¶„ì„**: ì¶•ê°„ í¸ì°¨ì™€ í¬íŠ¸í´ë¦¬ì˜¤ ë‹¤ê°í™” ìˆ˜ì¤€\n3. **ì‹œì¥ í¬ì§€ì…”ë‹**: í˜„ì¬ ì ìˆ˜ ê¸°ë°˜ ì‘ê°€ì˜ ì‹œì¥ ë‚´ ìœ„ì¹˜\n4. **ë°œì „ ì œì–¸**: ì•½ì  ë³´ì™„ ë° ê°•ì  ê·¹ëŒ€í™” ì „ëµ\n\n**ì‘ë‹µ í˜•ì‹**: \n- í•œêµ­ì–´ë¡œ ì‘ì„±\n- 4ê°œ ì„¹ì…˜ êµ¬ì¡°í™” \n- ê° ì„¹ì…˜ 2-3ë¬¸ì¥ìœ¼ë¡œ ê°„ê²°í•˜ê²Œ\n- ì´ 800ì ì´ë‚´\n- ë°ì´í„° ìˆ˜ì¹˜ í™œìš©í•œ êµ¬ì²´ì  ê·¼ê±° ì œì‹œ\n\në¶„ì„ ì‹œì‘:`;\n  }\n\n  /**\r\n   * AI ì‹¤íŒ¨ ì‹œ í´ë°± ì¸ì‚¬ì´íŠ¸ ìƒì„±\r\n   */\n  generateFallbackInsights(artistData) {\n    console.log('ğŸ”„ í´ë°± ì¸ì‚¬ì´íŠ¸ ìƒì„±:', artistData.name);\n    const radar = artistData.radar5;\n    const sunburst = artistData.sunburst_l1;\n\n    // í†µê³„ì  ë¶„ì„\n    const radarValues = Object.values(radar);\n    const maxScore = Math.max(...radarValues);\n    const minScore = Math.min(...radarValues);\n    const avgScore = radarValues.reduce((a, b) => a + b, 0) / radarValues.length;\n    const variance = radarValues.reduce((acc, val) => acc + Math.pow(val - avgScore, 2), 0) / radarValues.length;\n\n    // ê°•ì  ì¶• ì‹ë³„\n    const strengths = Object.entries(radar).filter(([_, score]) => score > avgScore + 10).map(([axis, _]) => this.getAxisName(axis));\n\n    // ì•½ì  ì¶• ì‹ë³„  \n    const weaknesses = Object.entries(radar).filter(([_, score]) => score < avgScore - 10).map(([axis, _]) => this.getAxisName(axis));\n    const insights = `## ğŸ“Š ${artistData.name} Phase 1 ë¶„ì„ (ë°ì´í„° ê¸°ë°˜)\n\n### ğŸ¯ ê°€ì¹˜ êµ¬ì„±ì˜ íŠ¹ì§•\ní˜„ì¬ í‰ê·  ì ìˆ˜ ${avgScore.toFixed(1)}ì ìœ¼ë¡œ ${maxScore >= 90 ? 'ìµœìƒìœ„ê¶Œ' : maxScore >= 80 ? 'ìƒìœ„ê¶Œ' : 'ì¤‘ìœ„ê¶Œ'} ìœ„ì¹˜ì…ë‹ˆë‹¤. ${strengths.length > 0 ? `íŠ¹íˆ ${strengths.join(', ')} ì˜ì—­ì—ì„œ ê°•ì„¸ë¥¼ ë³´ì´ë©°` : 'ê· ë“±í•œ ë°œì „ ì–‘ìƒì„ ë³´ì´ë©°'}, ì´ëŠ” ${variance > 500 ? 'ì „ë¬¸í™”ëœ' : 'ê· í˜•ì¡íŒ'} ì„±ì¥ íŒ¨í„´ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.\n\n### âš–ï¸ ê· í˜•ë„ ë¶„ì„  \nìµœê³ ì  ${maxScore}ì ê³¼ ìµœì €ì  ${minScore}ì ì˜ ê²©ì°¨ê°€ ${(maxScore - minScore).toFixed(1)}ì ìœ¼ë¡œ, ${maxScore - minScore > 50 ? 'ë¶ˆê· í˜•ì´ ë‹¤ì†Œ ì¡´ì¬' : 'ë¹„êµì  ì•ˆì •ì ì¸ ê· í˜•'}ì„ ë³´ì…ë‹ˆë‹¤. 4ì¶• ì„ ë²„ìŠ¤íŠ¸ ë°ì´í„°ì—ì„œëŠ” ${Object.entries(sunburst).sort((a, b) => b[1] - a[1])[0][0]}(${Object.entries(sunburst).sort((a, b) => b[1] - a[1])[0][1]}ì )ì´ ê°€ì¥ ê²¬ê³ í•œ ê¸°ë°˜ì„ í˜•ì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n\n### ğŸª ì‹œì¥ í¬ì§€ì…”ë‹\nì „ì²´ì ìœ¼ë¡œ ${avgScore >= 85 ? 'ê¸€ë¡œë²Œ í†±í‹°ì–´' : avgScore >= 70 ? 'ì•„ì‹œì•„ ì£¼ìš” ì‘ê°€' : 'ì‹ ì§„ ìœ ë§ ì‘ê°€'} ìˆ˜ì¤€ì˜ ì„±ê³¼ë¥¼ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤. ${radar.I >= 90 ? 'ê¸°ê´€ ì „ì‹œ' : radar.M >= 85 ? 'ë¯¸ë””ì–´ ë…¸ì¶œ' : radar.F >= 85 ? 'í˜ì–´ ì°¸ì—¬' : 'ë„¤íŠ¸ì›Œí¬ êµ¬ì¶•'} ì¸¡ë©´ì—ì„œì˜ ë›°ì–´ë‚œ ì„±ê³¼ê°€ ì£¼ìš” ê²½ìŸë ¥ìœ¼ë¡œ ì‘ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n\n### ğŸ’¡ ë°œì „ ì œì–¸\n${weaknesses.length > 0 ? `${weaknesses.join(', ')} ì˜ì—­ ì§‘ì¤‘ ê°œë°œì„ í†µí•´` : 'í˜„ì¬ ê°•ì  ì˜ì—­ ì‹¬í™”ë¥¼ í†µí•´'} ì¶”ê°€ì ì¸ ë„ì•½ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. íŠ¹íˆ ${minScore < 50 ? 'ì·¨ì•½ ì˜ì—­ì˜ ë‹¨ê³„ì  ë³´ì™„' : 'ê°•ì  ì˜ì—­ì˜ ê¸€ë¡œë²Œ í™•ì¥'}ì— ì§‘ì¤‘í•˜ë©´ ë”ìš± ê· í˜•ì¡íŒ í¬íŠ¸í´ë¦¬ì˜¤ êµ¬ì¶•ì´ ê¸°ëŒ€ë©ë‹ˆë‹¤.`;\n    return {\n      success: true,\n      insights,\n      model: 'fallback',\n      timestamp: new Date().toISOString(),\n      analysisType: 'phase1',\n      artist: artistData.name,\n      fallbackUsed: true,\n      statistics: {\n        average: avgScore.toFixed(1),\n        max: maxScore,\n        min: minScore,\n        variance: variance.toFixed(1),\n        strengths,\n        weaknesses\n      }\n    };\n  }\n\n  /**\r\n   * ì¶• ì´ë¦„ í•œêµ­ì–´ ë³€í™˜\r\n   */\n  getAxisName(axisCode) {\n    const names = {\n      'I': 'ê¸°ê´€ì „ì‹œ',\n      'F': 'í˜ì–´',\n      'A': 'ì‹œìƒ',\n      'M': 'ë¯¸ë””ì–´',\n      'Sedu': 'êµìœ¡'\n    };\n    return names[axisCode] || axisCode;\n  }\n\n  /**\r\n   * API ì—°ê²° ìƒíƒœ í™•ì¸\r\n   */\n  async checkConnection() {\n    try {\n      if (!this.openai) {\n        return {\n          connected: false,\n          reason: 'API í‚¤ ë¯¸ì„¤ì •'\n        };\n      }\n\n      // ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ ìš”ì²­\n      await this.openai.chat.completions.create({\n        model: 'gpt-3.5-turbo',\n        messages: [{\n          role: 'user',\n          content: 'í…ŒìŠ¤íŠ¸'\n        }],\n        max_tokens: 5\n      });\n      return {\n        connected: true,\n        model: 'gpt-4'\n      };\n    } catch (error) {\n      return {\n        connected: false,\n        reason: error.message\n      };\n    }\n  }\n}\n\n// ì‹±ê¸€í†¤ íŒ¨í„´ìœ¼ë¡œ ë‚´ë³´ë‚´ê¸°\nconst aiService = new AIService();\nexport default aiService;","map":{"version":3,"names":["OpenAI","AIService","constructor","openai","anthropicKey","process","env","REACT_APP_ANTHROPIC_API_KEY","vertexConfig","projectId","REACT_APP_VERTEX_AI_PROJECT_ID","location","REACT_APP_VERTEX_AI_LOCATION","maxRetries","parseInt","REACT_APP_AI_MAX_RETRIES","timeout","REACT_APP_AI_TIMEOUT","initializeOpenAI","apiKey","REACT_APP_OPENAI_API_KEY","dangerouslyAllowBrowser","generatePhase1Insights","artistData","console","log","name","generateFallbackInsights","prompt","buildPhase1Prompt","completion","callOpenAI","success","insights","model","timestamp","Date","toISOString","analysisType","artist","error","claudeResult","callAnthropic","fallbackUsed","claudeError","retries","response","Promise","race","chat","completions","create","REACT_APP_OPENAI_MODEL","messages","role","content","max_tokens","temperature","_","reject","setTimeout","Error","choices","message","resolve","callVertexAI","endpoint","radar5","I","F","A","M","Sedu","sunburst_l1","ì œë„","í•™ìˆ ","ë‹´ë¡ ","ë„¤íŠ¸ì›Œí¬","radar","sunburst","radarValues","Object","values","maxScore","Math","max","minScore","min","avgScore","reduce","a","b","length","variance","acc","val","pow","strengths","entries","filter","score","map","axis","getAxisName","weaknesses","toFixed","join","sort","statistics","average","axisCode","names","checkConnection","connected","reason","aiService"],"sources":["C:/CuratorOdyssey/src/services/aiService.js"],"sourcesContent":["// CuratorOdyssey AI Analysis Service\r\n// OpenAI GPT-4 + Anthropic Claude ë°±ì—… ì‹œìŠ¤í…œ\r\n\r\nimport OpenAI from 'openai';\r\n\r\nclass AIService {\r\n  constructor() {\r\n    // OpenAI ì´ˆê¸°í™” (ë©”ì¸ AI ì—”ì§„)\r\n    this.openai = null;\r\n    this.anthropicKey = process.env.REACT_APP_ANTHROPIC_API_KEY;\r\n    this.vertexConfig = {\r\n      projectId: process.env.REACT_APP_VERTEX_AI_PROJECT_ID,\r\n      location: process.env.REACT_APP_VERTEX_AI_LOCATION\r\n    };\r\n    \r\n    // ì„¤ì •ê°’\r\n    this.maxRetries = parseInt(process.env.REACT_APP_AI_MAX_RETRIES) || 3;\r\n    this.timeout = parseInt(process.env.REACT_APP_AI_TIMEOUT) || 30000;\r\n    \r\n    this.initializeOpenAI();\r\n  }\r\n\r\n  initializeOpenAI() {\r\n    const apiKey = process.env.REACT_APP_OPENAI_API_KEY;\r\n    if (apiKey && apiKey !== 'your_openai_api_key_here') {\r\n      this.openai = new OpenAI({\r\n        apiKey: apiKey,\r\n        dangerouslyAllowBrowser: true // âš ï¸ í”„ë¡œë•ì…˜ì—ì„œëŠ” ë°±ì—”ë“œë¡œ ì´ì „ í•„ìš”\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Phase 1 ì•„í‹°ìŠ¤íŠ¸ ë°ì´í„° ë¶„ì„ (í•µì‹¬ ë©”ì„œë“œ)\r\n   * @param {Object} artistData - ì•„í‹°ìŠ¤íŠ¸ ë ˆì´ë”/ì„ ë²„ìŠ¤íŠ¸ ë°ì´í„°\r\n   * @returns {Promise<Object>} AI ë¶„ì„ ê²°ê³¼\r\n   */\r\n  async generatePhase1Insights(artistData) {\r\n    try {\r\n      console.log('ğŸ¤– AI Phase 1 ë¶„ì„ ì‹œì‘:', artistData.name);\r\n      \r\n      if (!this.openai) {\r\n        return this.generateFallbackInsights(artistData);\r\n      }\r\n\r\n      const prompt = this.buildPhase1Prompt(artistData);\r\n      \r\n      const completion = await this.callOpenAI(prompt);\r\n      \r\n      return {\r\n        success: true,\r\n        insights: completion,\r\n        model: 'gpt-4',\r\n        timestamp: new Date().toISOString(),\r\n        analysisType: 'phase1',\r\n        artist: artistData.name\r\n      };\r\n\r\n    } catch (error) {\r\n      console.error('AI ë¶„ì„ ì˜¤ë¥˜:', error);\r\n      \r\n      // Anthropic ë°±ì—… ì‹œë„\r\n      try {\r\n        if (this.anthropicKey) {\r\n          const claudeResult = await this.callAnthropic(\r\n            this.buildPhase1Prompt(artistData)\r\n          );\r\n          return {\r\n            success: true,\r\n            insights: claudeResult,\r\n            model: 'claude-3',\r\n            timestamp: new Date().toISOString(),\r\n            analysisType: 'phase1',\r\n            artist: artistData.name,\r\n            fallbackUsed: true\r\n          };\r\n        }\r\n      } catch (claudeError) {\r\n        console.error('Claude ë°±ì—…ë„ ì‹¤íŒ¨:', claudeError);\r\n      }\r\n      \r\n      // ìµœì¢… í´ë°±\r\n      return this.generateFallbackInsights(artistData);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * OpenAI API í˜¸ì¶œ\r\n   */\r\n  async callOpenAI(prompt, retries = 0) {\r\n    try {\r\n      const response = await Promise.race([\r\n        this.openai.chat.completions.create({\r\n          model: process.env.REACT_APP_OPENAI_MODEL || 'gpt-4',\r\n          messages: [\r\n            {\r\n              role: 'system',\r\n              content: 'CuratorOdysseyì˜ ì „ë¬¸ ì•„íŠ¸ë§ˆì¼“ ë¶„ì„ê°€ë¡œì„œ, ë°ì´í„° ê¸°ë°˜ì˜ ê°ê´€ì ì´ê³  í†µì°°ë ¥ ìˆëŠ” ë¶„ì„ì„ ì œê³µí•©ë‹ˆë‹¤.'\r\n            },\r\n            {\r\n              role: 'user', \r\n              content: prompt\r\n            }\r\n          ],\r\n          max_tokens: 1000,\r\n          temperature: 0.7\r\n        }),\r\n        new Promise((_, reject) => \r\n          setTimeout(() => reject(new Error('AI ì‘ë‹µ ì‹œê°„ ì´ˆê³¼')), this.timeout)\r\n        )\r\n      ]);\r\n\r\n      return response.choices[0].message.content;\r\n\r\n    } catch (error) {\r\n      if (retries < this.maxRetries) {\r\n        console.log(`AI ì¬ì‹œë„ ${retries + 1}/${this.maxRetries}`);\r\n        await new Promise(resolve => setTimeout(resolve, 1000 * (retries + 1)));\r\n        return this.callOpenAI(prompt, retries + 1);\r\n      }\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Anthropic Claude API í˜¸ì¶œ (ë°±ì—…ìš©)\r\n   */\r\n  async callAnthropic(prompt) {\r\n    // ì‹¤ì œ êµ¬í˜„ì€ Anthropic SDK ì‚¬ìš©\r\n    // í˜„ì¬ëŠ” êµ¬ì¡°ë§Œ ì •ì˜\r\n    throw new Error('Anthropic ì—°ë™ì€ í–¥í›„ êµ¬í˜„ ì˜ˆì •');\r\n  }\r\n\r\n  /**\r\n   * Vertex AI í˜¸ì¶œ (í–¥í›„ ë°±ì—”ë“œ ì´ì „ìš©)\r\n   */\r\n  async callVertexAI(prompt) {\r\n    const endpoint = `https://asia-northeast3-aiplatform.googleapis.com/v1/projects/${this.vertexConfig.projectId}/locations/${this.vertexConfig.location}/publishers/google/models/gemini-pro:generateContent`;\r\n    \r\n    // ì‹¤ì œ êµ¬í˜„ì€ ë°±ì—”ë“œì—ì„œ ì²˜ë¦¬\r\n    throw new Error('Vertex AIëŠ” ë°±ì—”ë“œì—ì„œ ì²˜ë¦¬ ì˜ˆì •');\r\n  }\r\n\r\n  /**\r\n   * Phase 1 í”„ë¡¬í”„íŠ¸ ìƒì„±\r\n   */\r\n  buildPhase1Prompt(artistData) {\r\n    return `CuratorOdyssey Phase 1 ë¶„ì„ê°€ë¡œì„œ, ë‹¤ìŒ ì‘ê°€ì˜ ë°ì´í„°ë¥¼ ì¢…í•© ë¶„ì„í•´ì£¼ì„¸ìš”:\r\n\r\n**ì‘ê°€**: ${artistData.name}\r\n\r\n**5ì¶• ë ˆì´ë” ì ìˆ˜** (0-100):\r\n- ê¸°ê´€ì „ì‹œ(I): ${artistData.radar5.I}ì \r\n- í˜ì–´(F): ${artistData.radar5.F}ì   \r\n- ì‹œìƒ(A): ${artistData.radar5.A}ì \r\n- ë¯¸ë””ì–´(M): ${artistData.radar5.M}ì \r\n- êµìœ¡(Sedu): ${artistData.radar5.Sedu}ì \r\n\r\n**4ì¶• ì„ ë²„ìŠ¤íŠ¸ ê·¼ê±° ë°ì´í„°**:\r\n- ì œë„: ${artistData.sunburst_l1.ì œë„}ì \r\n- í•™ìˆ : ${artistData.sunburst_l1.í•™ìˆ }ì \r\n- ë‹´ë¡ : ${artistData.sunburst_l1.ë‹´ë¡ }ì \r\n- ë„¤íŠ¸ì›Œí¬: ${artistData.sunburst_l1.ë„¤íŠ¸ì›Œí¬}ì \r\n\r\n**ë¶„ì„ ìš”ì²­**:\r\n1. **ê°€ì¹˜ êµ¬ì„±ì˜ íŠ¹ì§•**: 5ì¶• ì ìˆ˜ íŒ¨í„´ì—ì„œ ë‚˜íƒ€ë‚˜ëŠ” ì‘ê°€ì˜ ê°•ì ê³¼ íŠ¹ì„±\r\n2. **ê· í˜•ë„ ë¶„ì„**: ì¶•ê°„ í¸ì°¨ì™€ í¬íŠ¸í´ë¦¬ì˜¤ ë‹¤ê°í™” ìˆ˜ì¤€\r\n3. **ì‹œì¥ í¬ì§€ì…”ë‹**: í˜„ì¬ ì ìˆ˜ ê¸°ë°˜ ì‘ê°€ì˜ ì‹œì¥ ë‚´ ìœ„ì¹˜\r\n4. **ë°œì „ ì œì–¸**: ì•½ì  ë³´ì™„ ë° ê°•ì  ê·¹ëŒ€í™” ì „ëµ\r\n\r\n**ì‘ë‹µ í˜•ì‹**: \r\n- í•œêµ­ì–´ë¡œ ì‘ì„±\r\n- 4ê°œ ì„¹ì…˜ êµ¬ì¡°í™” \r\n- ê° ì„¹ì…˜ 2-3ë¬¸ì¥ìœ¼ë¡œ ê°„ê²°í•˜ê²Œ\r\n- ì´ 800ì ì´ë‚´\r\n- ë°ì´í„° ìˆ˜ì¹˜ í™œìš©í•œ êµ¬ì²´ì  ê·¼ê±° ì œì‹œ\r\n\r\në¶„ì„ ì‹œì‘:`;\r\n  }\r\n\r\n  /**\r\n   * AI ì‹¤íŒ¨ ì‹œ í´ë°± ì¸ì‚¬ì´íŠ¸ ìƒì„±\r\n   */\r\n  generateFallbackInsights(artistData) {\r\n    console.log('ğŸ”„ í´ë°± ì¸ì‚¬ì´íŠ¸ ìƒì„±:', artistData.name);\r\n    \r\n    const radar = artistData.radar5;\r\n    const sunburst = artistData.sunburst_l1;\r\n    \r\n    // í†µê³„ì  ë¶„ì„\r\n    const radarValues = Object.values(radar);\r\n    const maxScore = Math.max(...radarValues);\r\n    const minScore = Math.min(...radarValues);\r\n    const avgScore = radarValues.reduce((a, b) => a + b, 0) / radarValues.length;\r\n    const variance = radarValues.reduce((acc, val) => acc + Math.pow(val - avgScore, 2), 0) / radarValues.length;\r\n    \r\n    // ê°•ì  ì¶• ì‹ë³„\r\n    const strengths = Object.entries(radar)\r\n      .filter(([_, score]) => score > avgScore + 10)\r\n      .map(([axis, _]) => this.getAxisName(axis));\r\n    \r\n    // ì•½ì  ì¶• ì‹ë³„  \r\n    const weaknesses = Object.entries(radar)\r\n      .filter(([_, score]) => score < avgScore - 10)\r\n      .map(([axis, _]) => this.getAxisName(axis));\r\n\r\n    const insights = `## ğŸ“Š ${artistData.name} Phase 1 ë¶„ì„ (ë°ì´í„° ê¸°ë°˜)\r\n\r\n### ğŸ¯ ê°€ì¹˜ êµ¬ì„±ì˜ íŠ¹ì§•\r\ní˜„ì¬ í‰ê·  ì ìˆ˜ ${avgScore.toFixed(1)}ì ìœ¼ë¡œ ${maxScore >= 90 ? 'ìµœìƒìœ„ê¶Œ' : maxScore >= 80 ? 'ìƒìœ„ê¶Œ' : 'ì¤‘ìœ„ê¶Œ'} ìœ„ì¹˜ì…ë‹ˆë‹¤. ${strengths.length > 0 ? `íŠ¹íˆ ${strengths.join(', ')} ì˜ì—­ì—ì„œ ê°•ì„¸ë¥¼ ë³´ì´ë©°` : 'ê· ë“±í•œ ë°œì „ ì–‘ìƒì„ ë³´ì´ë©°'}, ì´ëŠ” ${variance > 500 ? 'ì „ë¬¸í™”ëœ' : 'ê· í˜•ì¡íŒ'} ì„±ì¥ íŒ¨í„´ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.\r\n\r\n### âš–ï¸ ê· í˜•ë„ ë¶„ì„  \r\nìµœê³ ì  ${maxScore}ì ê³¼ ìµœì €ì  ${minScore}ì ì˜ ê²©ì°¨ê°€ ${(maxScore - minScore).toFixed(1)}ì ìœ¼ë¡œ, ${maxScore - minScore > 50 ? 'ë¶ˆê· í˜•ì´ ë‹¤ì†Œ ì¡´ì¬' : 'ë¹„êµì  ì•ˆì •ì ì¸ ê· í˜•'}ì„ ë³´ì…ë‹ˆë‹¤. 4ì¶• ì„ ë²„ìŠ¤íŠ¸ ë°ì´í„°ì—ì„œëŠ” ${Object.entries(sunburst).sort((a, b) => b[1] - a[1])[0][0]}(${Object.entries(sunburst).sort((a, b) => b[1] - a[1])[0][1]}ì )ì´ ê°€ì¥ ê²¬ê³ í•œ ê¸°ë°˜ì„ í˜•ì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤.\r\n\r\n### ğŸª ì‹œì¥ í¬ì§€ì…”ë‹\r\nì „ì²´ì ìœ¼ë¡œ ${avgScore >= 85 ? 'ê¸€ë¡œë²Œ í†±í‹°ì–´' : avgScore >= 70 ? 'ì•„ì‹œì•„ ì£¼ìš” ì‘ê°€' : 'ì‹ ì§„ ìœ ë§ ì‘ê°€'} ìˆ˜ì¤€ì˜ ì„±ê³¼ë¥¼ ë‹¬ì„±í–ˆìŠµë‹ˆë‹¤. ${radar.I >= 90 ? 'ê¸°ê´€ ì „ì‹œ' : radar.M >= 85 ? 'ë¯¸ë””ì–´ ë…¸ì¶œ' : radar.F >= 85 ? 'í˜ì–´ ì°¸ì—¬' : 'ë„¤íŠ¸ì›Œí¬ êµ¬ì¶•'} ì¸¡ë©´ì—ì„œì˜ ë›°ì–´ë‚œ ì„±ê³¼ê°€ ì£¼ìš” ê²½ìŸë ¥ìœ¼ë¡œ ì‘ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.\r\n\r\n### ğŸ’¡ ë°œì „ ì œì–¸\r\n${weaknesses.length > 0 ? `${weaknesses.join(', ')} ì˜ì—­ ì§‘ì¤‘ ê°œë°œì„ í†µí•´` : 'í˜„ì¬ ê°•ì  ì˜ì—­ ì‹¬í™”ë¥¼ í†µí•´'} ì¶”ê°€ì ì¸ ë„ì•½ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. íŠ¹íˆ ${minScore < 50 ? 'ì·¨ì•½ ì˜ì—­ì˜ ë‹¨ê³„ì  ë³´ì™„' : 'ê°•ì  ì˜ì—­ì˜ ê¸€ë¡œë²Œ í™•ì¥'}ì— ì§‘ì¤‘í•˜ë©´ ë”ìš± ê· í˜•ì¡íŒ í¬íŠ¸í´ë¦¬ì˜¤ êµ¬ì¶•ì´ ê¸°ëŒ€ë©ë‹ˆë‹¤.`;\r\n\r\n    return {\r\n      success: true,\r\n      insights,\r\n      model: 'fallback',\r\n      timestamp: new Date().toISOString(),\r\n      analysisType: 'phase1',\r\n      artist: artistData.name,\r\n      fallbackUsed: true,\r\n      statistics: {\r\n        average: avgScore.toFixed(1),\r\n        max: maxScore,\r\n        min: minScore,\r\n        variance: variance.toFixed(1),\r\n        strengths,\r\n        weaknesses\r\n      }\r\n    };\r\n  }\r\n\r\n  /**\r\n   * ì¶• ì´ë¦„ í•œêµ­ì–´ ë³€í™˜\r\n   */\r\n  getAxisName(axisCode) {\r\n    const names = {\r\n      'I': 'ê¸°ê´€ì „ì‹œ',\r\n      'F': 'í˜ì–´',\r\n      'A': 'ì‹œìƒ', \r\n      'M': 'ë¯¸ë””ì–´',\r\n      'Sedu': 'êµìœ¡'\r\n    };\r\n    return names[axisCode] || axisCode;\r\n  }\r\n\r\n  /**\r\n   * API ì—°ê²° ìƒíƒœ í™•ì¸\r\n   */\r\n  async checkConnection() {\r\n    try {\r\n      if (!this.openai) {\r\n        return { connected: false, reason: 'API í‚¤ ë¯¸ì„¤ì •' };\r\n      }\r\n\r\n      // ê°„ë‹¨í•œ í…ŒìŠ¤íŠ¸ ìš”ì²­\r\n      await this.openai.chat.completions.create({\r\n        model: 'gpt-3.5-turbo',\r\n        messages: [{ role: 'user', content: 'í…ŒìŠ¤íŠ¸' }],\r\n        max_tokens: 5\r\n      });\r\n\r\n      return { connected: true, model: 'gpt-4' };\r\n    } catch (error) {\r\n      return { connected: false, reason: error.message };\r\n    }\r\n  }\r\n}\r\n\r\n// ì‹±ê¸€í†¤ íŒ¨í„´ìœ¼ë¡œ ë‚´ë³´ë‚´ê¸°\r\nconst aiService = new AIService();\r\nexport default aiService;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}