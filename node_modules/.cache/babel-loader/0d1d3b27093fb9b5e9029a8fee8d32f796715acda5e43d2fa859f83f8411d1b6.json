{"ast":null,"code":"import _objectSpread from \"C:/co-1016/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\n// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\nimport { APIResource } from \"../resource.mjs\";\nimport { isRequestOptions } from \"../core.mjs\";\nimport { sleep } from \"../core.mjs\";\nimport { APIConnectionTimeoutError } from \"../error.mjs\";\nimport * as Core from \"../core.mjs\";\nimport { CursorPage } from \"../pagination.mjs\";\nexport class Files extends APIResource {\n  /**\r\n   * Upload a file that can be used across various endpoints. Individual files can be\r\n   * up to 512 MB, and the size of all files uploaded by one organization can be up\r\n   * to 100 GB.\r\n   *\r\n   * The Assistants API supports files up to 2 million tokens and of specific file\r\n   * types. See the\r\n   * [Assistants Tools guide](https://platform.openai.com/docs/assistants/tools) for\r\n   * details.\r\n   *\r\n   * The Fine-tuning API only supports `.jsonl` files. The input also has certain\r\n   * required formats for fine-tuning\r\n   * [chat](https://platform.openai.com/docs/api-reference/fine-tuning/chat-input) or\r\n   * [completions](https://platform.openai.com/docs/api-reference/fine-tuning/completions-input)\r\n   * models.\r\n   *\r\n   * The Batch API only supports `.jsonl` files up to 200 MB in size. The input also\r\n   * has a specific required\r\n   * [format](https://platform.openai.com/docs/api-reference/batch/request-input).\r\n   *\r\n   * Please [contact us](https://help.openai.com/) if you need to increase these\r\n   * storage limits.\r\n   */\n  create(body, options) {\n    return this._client.post('/files', Core.multipartFormRequestOptions(_objectSpread({\n      body\n    }, options)));\n  }\n  /**\r\n   * Returns information about a specific file.\r\n   */\n  retrieve(fileId, options) {\n    return this._client.get(\"/files/\".concat(fileId), options);\n  }\n  list() {\n    let query = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let options = arguments.length > 1 ? arguments[1] : undefined;\n    if (isRequestOptions(query)) {\n      return this.list({}, query);\n    }\n    return this._client.getAPIList('/files', FileObjectsPage, _objectSpread({\n      query\n    }, options));\n  }\n  /**\r\n   * Delete a file.\r\n   */\n  del(fileId, options) {\n    return this._client.delete(\"/files/\".concat(fileId), options);\n  }\n  /**\r\n   * Returns the contents of the specified file.\r\n   */\n  content(fileId, options) {\n    return this._client.get(\"/files/\".concat(fileId, \"/content\"), _objectSpread(_objectSpread({}, options), {}, {\n      headers: _objectSpread({\n        Accept: 'application/binary'\n      }, options === null || options === void 0 ? void 0 : options.headers),\n      __binaryResponse: true\n    }));\n  }\n  /**\r\n   * Returns the contents of the specified file.\r\n   *\r\n   * @deprecated The `.content()` method should be used instead\r\n   */\n  retrieveContent(fileId, options) {\n    return this._client.get(\"/files/\".concat(fileId, \"/content\"), options);\n  }\n  /**\r\n   * Waits for the given file to be processed, default timeout is 30 mins.\r\n   */\n  async waitForProcessing(id) {\n    let {\n      pollInterval = 5000,\n      maxWait = 30 * 60 * 1000\n    } = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    const TERMINAL_STATES = new Set(['processed', 'error', 'deleted']);\n    const start = Date.now();\n    let file = await this.retrieve(id);\n    while (!file.status || !TERMINAL_STATES.has(file.status)) {\n      await sleep(pollInterval);\n      file = await this.retrieve(id);\n      if (Date.now() - start > maxWait) {\n        throw new APIConnectionTimeoutError({\n          message: \"Giving up on waiting for file \".concat(id, \" to finish processing after \").concat(maxWait, \" milliseconds.\")\n        });\n      }\n    }\n    return file;\n  }\n}\nexport class FileObjectsPage extends CursorPage {}\nFiles.FileObjectsPage = FileObjectsPage;","map":{"version":3,"names":["APIResource","isRequestOptions","sleep","APIConnectionTimeoutError","Core","CursorPage","Files","create","body","options","_client","post","multipartFormRequestOptions","_objectSpread","retrieve","fileId","get","concat","list","query","arguments","length","undefined","getAPIList","FileObjectsPage","del","delete","content","headers","Accept","__binaryResponse","retrieveContent","waitForProcessing","id","pollInterval","maxWait","TERMINAL_STATES","Set","start","Date","now","file","status","has","message"],"sources":["C:\\co-1016\\node_modules\\openai\\src\\resources\\files.ts"],"sourcesContent":["// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.\r\n\r\nimport { APIResource } from '../resource';\r\nimport { isRequestOptions } from '../core';\r\nimport { sleep } from '../core';\r\nimport { APIConnectionTimeoutError } from '../error';\r\nimport * as Core from '../core';\r\nimport { CursorPage, type CursorPageParams } from '../pagination';\r\nimport { type Response } from '../_shims/index';\r\n\r\nexport class Files extends APIResource {\r\n  /**\r\n   * Upload a file that can be used across various endpoints. Individual files can be\r\n   * up to 512 MB, and the size of all files uploaded by one organization can be up\r\n   * to 100 GB.\r\n   *\r\n   * The Assistants API supports files up to 2 million tokens and of specific file\r\n   * types. See the\r\n   * [Assistants Tools guide](https://platform.openai.com/docs/assistants/tools) for\r\n   * details.\r\n   *\r\n   * The Fine-tuning API only supports `.jsonl` files. The input also has certain\r\n   * required formats for fine-tuning\r\n   * [chat](https://platform.openai.com/docs/api-reference/fine-tuning/chat-input) or\r\n   * [completions](https://platform.openai.com/docs/api-reference/fine-tuning/completions-input)\r\n   * models.\r\n   *\r\n   * The Batch API only supports `.jsonl` files up to 200 MB in size. The input also\r\n   * has a specific required\r\n   * [format](https://platform.openai.com/docs/api-reference/batch/request-input).\r\n   *\r\n   * Please [contact us](https://help.openai.com/) if you need to increase these\r\n   * storage limits.\r\n   */\r\n  create(body: FileCreateParams, options?: Core.RequestOptions): Core.APIPromise<FileObject> {\r\n    return this._client.post('/files', Core.multipartFormRequestOptions({ body, ...options }));\r\n  }\r\n\r\n  /**\r\n   * Returns information about a specific file.\r\n   */\r\n  retrieve(fileId: string, options?: Core.RequestOptions): Core.APIPromise<FileObject> {\r\n    return this._client.get(`/files/${fileId}`, options);\r\n  }\r\n\r\n  /**\r\n   * Returns a list of files.\r\n   */\r\n  list(query?: FileListParams, options?: Core.RequestOptions): Core.PagePromise<FileObjectsPage, FileObject>;\r\n  list(options?: Core.RequestOptions): Core.PagePromise<FileObjectsPage, FileObject>;\r\n  list(\r\n    query: FileListParams | Core.RequestOptions = {},\r\n    options?: Core.RequestOptions,\r\n  ): Core.PagePromise<FileObjectsPage, FileObject> {\r\n    if (isRequestOptions(query)) {\r\n      return this.list({}, query);\r\n    }\r\n    return this._client.getAPIList('/files', FileObjectsPage, { query, ...options });\r\n  }\r\n\r\n  /**\r\n   * Delete a file.\r\n   */\r\n  del(fileId: string, options?: Core.RequestOptions): Core.APIPromise<FileDeleted> {\r\n    return this._client.delete(`/files/${fileId}`, options);\r\n  }\r\n\r\n  /**\r\n   * Returns the contents of the specified file.\r\n   */\r\n  content(fileId: string, options?: Core.RequestOptions): Core.APIPromise<Response> {\r\n    return this._client.get(`/files/${fileId}/content`, {\r\n      ...options,\r\n      headers: { Accept: 'application/binary', ...options?.headers },\r\n      __binaryResponse: true,\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Returns the contents of the specified file.\r\n   *\r\n   * @deprecated The `.content()` method should be used instead\r\n   */\r\n  retrieveContent(fileId: string, options?: Core.RequestOptions): Core.APIPromise<string> {\r\n    return this._client.get(`/files/${fileId}/content`, options);\r\n  }\r\n\r\n  /**\r\n   * Waits for the given file to be processed, default timeout is 30 mins.\r\n   */\r\n  async waitForProcessing(\r\n    id: string,\r\n    { pollInterval = 5000, maxWait = 30 * 60 * 1000 }: { pollInterval?: number; maxWait?: number } = {},\r\n  ): Promise<FileObject> {\r\n    const TERMINAL_STATES = new Set(['processed', 'error', 'deleted']);\r\n\r\n    const start = Date.now();\r\n    let file = await this.retrieve(id);\r\n\r\n    while (!file.status || !TERMINAL_STATES.has(file.status)) {\r\n      await sleep(pollInterval);\r\n\r\n      file = await this.retrieve(id);\r\n      if (Date.now() - start > maxWait) {\r\n        throw new APIConnectionTimeoutError({\r\n          message: `Giving up on waiting for file ${id} to finish processing after ${maxWait} milliseconds.`,\r\n        });\r\n      }\r\n    }\r\n\r\n    return file;\r\n  }\r\n}\r\n\r\nexport class FileObjectsPage extends CursorPage<FileObject> {}\r\n\r\nexport type FileContent = string;\r\n\r\nexport interface FileDeleted {\r\n  id: string;\r\n\r\n  deleted: boolean;\r\n\r\n  object: 'file';\r\n}\r\n\r\n/**\r\n * The `File` object represents a document that has been uploaded to OpenAI.\r\n */\r\nexport interface FileObject {\r\n  /**\r\n   * The file identifier, which can be referenced in the API endpoints.\r\n   */\r\n  id: string;\r\n\r\n  /**\r\n   * The size of the file, in bytes.\r\n   */\r\n  bytes: number;\r\n\r\n  /**\r\n   * The Unix timestamp (in seconds) for when the file was created.\r\n   */\r\n  created_at: number;\r\n\r\n  /**\r\n   * The name of the file.\r\n   */\r\n  filename: string;\r\n\r\n  /**\r\n   * The object type, which is always `file`.\r\n   */\r\n  object: 'file';\r\n\r\n  /**\r\n   * The intended purpose of the file. Supported values are `assistants`,\r\n   * `assistants_output`, `batch`, `batch_output`, `fine-tune`, `fine-tune-results`\r\n   * and `vision`.\r\n   */\r\n  purpose:\r\n    | 'assistants'\r\n    | 'assistants_output'\r\n    | 'batch'\r\n    | 'batch_output'\r\n    | 'fine-tune'\r\n    | 'fine-tune-results'\r\n    | 'vision';\r\n\r\n  /**\r\n   * @deprecated Deprecated. The current status of the file, which can be either\r\n   * `uploaded`, `processed`, or `error`.\r\n   */\r\n  status: 'uploaded' | 'processed' | 'error';\r\n\r\n  /**\r\n   * The Unix timestamp (in seconds) for when the file will expire.\r\n   */\r\n  expires_at?: number;\r\n\r\n  /**\r\n   * @deprecated Deprecated. For details on why a fine-tuning training file failed\r\n   * validation, see the `error` field on `fine_tuning.job`.\r\n   */\r\n  status_details?: string;\r\n}\r\n\r\n/**\r\n * The intended purpose of the uploaded file. One of: - `assistants`: Used in the\r\n * Assistants API - `batch`: Used in the Batch API - `fine-tune`: Used for\r\n * fine-tuning - `vision`: Images used for vision fine-tuning - `user_data`:\r\n * Flexible file type for any purpose - `evals`: Used for eval data sets\r\n */\r\nexport type FilePurpose = 'assistants' | 'batch' | 'fine-tune' | 'vision' | 'user_data' | 'evals';\r\n\r\nexport interface FileCreateParams {\r\n  /**\r\n   * The File object (not file name) to be uploaded.\r\n   */\r\n  file: Core.Uploadable;\r\n\r\n  /**\r\n   * The intended purpose of the uploaded file. One of: - `assistants`: Used in the\r\n   * Assistants API - `batch`: Used in the Batch API - `fine-tune`: Used for\r\n   * fine-tuning - `vision`: Images used for vision fine-tuning - `user_data`:\r\n   * Flexible file type for any purpose - `evals`: Used for eval data sets\r\n   */\r\n  purpose: FilePurpose;\r\n}\r\n\r\nexport interface FileListParams extends CursorPageParams {\r\n  /**\r\n   * Sort order by the `created_at` timestamp of the objects. `asc` for ascending\r\n   * order and `desc` for descending order.\r\n   */\r\n  order?: 'asc' | 'desc';\r\n\r\n  /**\r\n   * Only return files with the given purpose.\r\n   */\r\n  purpose?: string;\r\n}\r\n\r\nFiles.FileObjectsPage = FileObjectsPage;\r\n\r\nexport declare namespace Files {\r\n  export {\r\n    type FileContent as FileContent,\r\n    type FileDeleted as FileDeleted,\r\n    type FileObject as FileObject,\r\n    type FilePurpose as FilePurpose,\r\n    FileObjectsPage as FileObjectsPage,\r\n    type FileCreateParams as FileCreateParams,\r\n    type FileListParams as FileListParams,\r\n  };\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}