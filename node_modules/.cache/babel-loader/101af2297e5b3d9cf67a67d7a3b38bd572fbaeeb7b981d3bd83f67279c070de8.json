{"ast":null,"code":"import React,{useEffect,useRef,useState}from'react';import*as d3 from'd3';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SunburstChart=_ref=>{let{data,highlightedAxis,onSegmentHover,onSegmentClick}=_ref;const svgRef=useRef(null);const tooltipRef=useRef(null);const[currentRoot,setCurrentRoot]=useState(null);useEffect(()=>{if(!data||!svgRef.current)return;// 차트 기본 설정 (DYSS 디자인 시스템 적용)\nconst width=500;const height=500;const radius=Math.min(width,height)/6;// DYSS 컬러 시스템 적용\nconst colorScale=d3.scaleOrdinal().domain(['제도','학술','담론','네트워크']).range(['#8B5CF6','#7C3AED','#6D28D9','#5B21B6']);// DYSS primary colors\n// 계층적 데이터 구조화\nconst root=d3.hierarchy(data).sum(d=>d.value).sort((a,b)=>b.value-a.value);// 파티션 레이아웃 계산\nd3.partition().size([2*Math.PI,root.height+1])(root);root.each(d=>d.current=d);// SVG 설정\nconst svg=d3.select(svgRef.current).attr('width',width).attr('height',height).attr('viewBox',[-width/2,-height/2,width,height]).style('font-family','var(--dyss-font-family-primary)');svg.selectAll('*').remove();// Arc 생성기\nconst arc=d3.arc().startAngle(d=>d.x0).endAngle(d=>d.x1).padAngle(d=>Math.min((d.x1-d.x0)/2,0.005)).padRadius(radius*1.5).innerRadius(d=>d.y0*radius).outerRadius(d=>Math.max(d.y0*radius,d.y1*radius-1));// 툴팁 설정\nconst tooltip=d3.select(tooltipRef.current);// Path 렌더링\nconst path=svg.append('g').selectAll('path').data(root.descendants().slice(1)).join('path').attr('fill',d=>{while(d.depth>1)d=d.parent;return colorScale(d.data.name);}).attr('fill-opacity',d=>{const isHighlighted=highlightedAxis&&d.ancestors().some(ancestor=>ancestor.data.name===highlightedAxis);const isDimmed=highlightedAxis&&!isHighlighted;if(isDimmed)return 0.2;return arcVisible(d.current)?d.children?0.8:0.6:0;}).attr('stroke','#FFFFFF').attr('stroke-width',2).attr('d',d=>arc(d.current)).style('cursor','pointer').style('transition','fill-opacity 0.3s ease').on('click',(event,d)=>{// Phase 2 드릴다운을 위한 클릭 이벤트\nif(onSegmentClick&&d.depth<=2){var _d$ancestors$find;onSegmentClick({name:d.data.name,axis:(_d$ancestors$find=d.ancestors().find(a=>a.depth===1))===null||_d$ancestors$find===void 0?void 0:_d$ancestors$find.data.name,value:d.data.value,depth:d.depth});return;// 드릴다운 후 줌 방지\n}// 기본 줌 동작\nclicked(event,d);}).on('mouseover',(event,d)=>{// 호버 시 상위 컴포넌트에 알림\nif(onSegmentHover){const rootAxis=d.ancestors().find(a=>a.depth===1);onSegmentHover(rootAxis?rootAxis.data.name:null);}tooltip.style('display','block').html(formatTooltip(d.data));}).on('mousemove',event=>{tooltip.style('left',\"\".concat(event.pageX+15,\"px\")).style('top',\"\".concat(event.pageY+15,\"px\"));}).on('mouseout',()=>{if(onSegmentHover)onSegmentHover(null);tooltip.style('display','none');});// 중앙 원 (줌아웃 버튼)\nconst parent=svg.append('circle').datum(root).attr('r',radius).attr('fill','none').attr('pointer-events','all').on('click',clicked);// 레이블 렌더링\nconst label=svg.append('g').attr('pointer-events','none').attr('text-anchor','middle').style('user-select','none').selectAll('text').data(root.descendants().slice(1)).join('text').attr('dy','0.35em').attr('fill','#FFFFFF').attr('fill-opacity',d=>+labelVisible(d.current)).attr('transform',d=>labelTransform(d.current)).attr('font-size','12px').attr('font-weight','500').text(d=>d.data.name);// 클릭 핸들러 (줌 기능)\nfunction clicked(event,p){parent.datum(p.parent||root);root.each(d=>d.target={x0:Math.max(0,Math.min(1,(d.x0-p.x0)/(p.x1-p.x0)))*2*Math.PI,x1:Math.max(0,Math.min(1,(d.x1-p.x0)/(p.x1-p.x0)))*2*Math.PI,y0:Math.max(0,d.y0-p.depth),y1:Math.max(0,d.y1-p.depth)});const t=svg.transition().duration(750);path.transition(t).tween('data',d=>{const i=d3.interpolate(d.current,d.target);return t=>d.current=i(t);}).filter(function(d){return+this.getAttribute('fill-opacity')||arcVisible(d.target);}).attr('fill-opacity',d=>{const isHighlighted=highlightedAxis&&d.ancestors().some(ancestor=>ancestor.data.name===highlightedAxis);const isDimmed=highlightedAxis&&!isHighlighted;if(isDimmed)return 0.2;return arcVisible(d.target)?d.children?0.8:0.6:0;}).attrTween('d',d=>()=>arc(d.current));label.filter(function(d){return+this.getAttribute('fill-opacity')||labelVisible(d.target);}).transition(t).attr('fill-opacity',d=>+labelVisible(d.target)).attrTween('transform',d=>()=>labelTransform(d.current));}function arcVisible(d){return d.y1<=3&&d.y0>=1&&d.x1>d.x0;}function labelVisible(d){return d.y1<=3&&d.y0>=1&&(d.y1-d.y0)*(d.x1-d.x0)>0.03;}function labelTransform(d){const x=(d.x0+d.x1)/2*180/Math.PI;const y=(d.y0+d.y1)/2*radius;return\"rotate(\".concat(x-90,\") translate(\").concat(y,\",0) rotate(\").concat(x<180?0:180,\")\");}function formatTooltip(d){var _d$value;let content=\"<strong>\".concat(d.name,\"</strong><br/>Value: \").concat(((_d$value=d.value)===null||_d$value===void 0?void 0:_d$value.toFixed(1))||0);if(d.tooltip){content+=\"<hr/>\";content+=\"Unit: \".concat(d.tooltip.unit,\"<br/>\");content+=\"Time Window: \".concat(d.tooltip.time_window,\"<br/>\");content+=\"Weight: \".concat(d.tooltip.weight,\"<br/>\");content+=\"Source: \".concat(d.tooltip.source_id);}return content;}},[data,highlightedAxis]);return/*#__PURE__*/_jsxs(\"div\",{className:\"curator-chart-wrapper\",children:[/*#__PURE__*/_jsx(\"svg\",{ref:svgRef}),/*#__PURE__*/_jsx(\"div\",{ref:tooltipRef,className:\"curator-tooltip\"})]});};export default SunburstChart;","map":{"version":3,"names":["React","useEffect","useRef","useState","d3","jsx","_jsx","jsxs","_jsxs","SunburstChart","_ref","data","highlightedAxis","onSegmentHover","onSegmentClick","svgRef","tooltipRef","currentRoot","setCurrentRoot","current","width","height","radius","Math","min","colorScale","scaleOrdinal","domain","range","root","hierarchy","sum","d","value","sort","a","b","partition","size","PI","each","svg","select","attr","style","selectAll","remove","arc","startAngle","x0","endAngle","x1","padAngle","padRadius","innerRadius","y0","outerRadius","max","y1","tooltip","path","append","descendants","slice","join","depth","parent","name","isHighlighted","ancestors","some","ancestor","isDimmed","arcVisible","children","on","event","_d$ancestors$find","axis","find","clicked","rootAxis","html","formatTooltip","concat","pageX","pageY","datum","label","labelVisible","labelTransform","text","p","target","t","transition","duration","tween","i","interpolate","filter","getAttribute","attrTween","x","y","_d$value","content","toFixed","unit","time_window","weight","source_id","className","ref"],"sources":["C:/co-1016/src/components/charts/SunburstChart.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport * as d3 from 'd3';\r\n\r\nconst SunburstChart = ({ data, highlightedAxis, onSegmentHover, onSegmentClick }) => {\r\n  const svgRef = useRef(null);\r\n  const tooltipRef = useRef(null);\r\n  const [currentRoot, setCurrentRoot] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!data || !svgRef.current) return;\r\n\r\n    // 차트 기본 설정 (DYSS 디자인 시스템 적용)\r\n    const width = 500;\r\n    const height = 500;\r\n    const radius = Math.min(width, height) / 6;\r\n\r\n    // DYSS 컬러 시스템 적용\r\n    const colorScale = d3.scaleOrdinal()\r\n      .domain(['제도', '학술', '담론', '네트워크'])\r\n      .range(['#8B5CF6', '#7C3AED', '#6D28D9', '#5B21B6']); // DYSS primary colors\r\n\r\n    // 계층적 데이터 구조화\r\n    const root = d3.hierarchy(data)\r\n      .sum(d => d.value)\r\n      .sort((a, b) => b.value - a.value);\r\n\r\n    // 파티션 레이아웃 계산\r\n    d3.partition().size([2 * Math.PI, root.height + 1])(root);\r\n    root.each(d => (d.current = d));\r\n\r\n    // SVG 설정\r\n    const svg = d3.select(svgRef.current)\r\n      .attr('width', width)\r\n      .attr('height', height)\r\n      .attr('viewBox', [-width / 2, -height / 2, width, height])\r\n      .style('font-family', 'var(--dyss-font-family-primary)');\r\n\r\n    svg.selectAll('*').remove();\r\n\r\n    // Arc 생성기\r\n    const arc = d3.arc()\r\n      .startAngle(d => d.x0)\r\n      .endAngle(d => d.x1)\r\n      .padAngle(d => Math.min((d.x1 - d.x0) / 2, 0.005))\r\n      .padRadius(radius * 1.5)\r\n      .innerRadius(d => d.y0 * radius)\r\n      .outerRadius(d => Math.max(d.y0 * radius, d.y1 * radius - 1));\r\n\r\n    // 툴팁 설정\r\n    const tooltip = d3.select(tooltipRef.current);\r\n\r\n    // Path 렌더링\r\n    const path = svg.append('g')\r\n      .selectAll('path')\r\n      .data(root.descendants().slice(1))\r\n      .join('path')\r\n      .attr('fill', d => {\r\n        while (d.depth > 1) d = d.parent;\r\n        return colorScale(d.data.name);\r\n      })\r\n      .attr('fill-opacity', d => {\r\n        const isHighlighted = highlightedAxis && \r\n          d.ancestors().some(ancestor => ancestor.data.name === highlightedAxis);\r\n        const isDimmed = highlightedAxis && !isHighlighted;\r\n        \r\n        if (isDimmed) return 0.2;\r\n        return arcVisible(d.current) ? (d.children ? 0.8 : 0.6) : 0;\r\n      })\r\n      .attr('stroke', '#FFFFFF')\r\n      .attr('stroke-width', 2)\r\n      .attr('d', d => arc(d.current))\r\n      .style('cursor', 'pointer')\r\n      .style('transition', 'fill-opacity 0.3s ease')\r\n      .on('click', (event, d) => {\r\n        // Phase 2 드릴다운을 위한 클릭 이벤트\r\n        if (onSegmentClick && d.depth <= 2) {\r\n          onSegmentClick({\r\n            name: d.data.name,\r\n            axis: d.ancestors().find(a => a.depth === 1)?.data.name,\r\n            value: d.data.value,\r\n            depth: d.depth\r\n          });\r\n          return; // 드릴다운 후 줌 방지\r\n        }\r\n        \r\n        // 기본 줌 동작\r\n        clicked(event, d);\r\n      })\r\n      .on('mouseover', (event, d) => {\r\n        // 호버 시 상위 컴포넌트에 알림\r\n        if (onSegmentHover) {\r\n          const rootAxis = d.ancestors().find(a => a.depth === 1);\r\n          onSegmentHover(rootAxis ? rootAxis.data.name : null);\r\n        }\r\n\r\n        tooltip.style('display', 'block')\r\n              .html(formatTooltip(d.data));\r\n      })\r\n      .on('mousemove', (event) => {\r\n        tooltip.style('left', `${event.pageX + 15}px`)\r\n              .style('top', `${event.pageY + 15}px`);\r\n      })\r\n      .on('mouseout', () => {\r\n        if (onSegmentHover) onSegmentHover(null);\r\n        tooltip.style('display', 'none');\r\n      });\r\n\r\n    // 중앙 원 (줌아웃 버튼)\r\n    const parent = svg.append('circle')\r\n      .datum(root)\r\n      .attr('r', radius)\r\n      .attr('fill', 'none')\r\n      .attr('pointer-events', 'all')\r\n      .on('click', clicked);\r\n\r\n    // 레이블 렌더링\r\n    const label = svg.append('g')\r\n      .attr('pointer-events', 'none')\r\n      .attr('text-anchor', 'middle')\r\n      .style('user-select', 'none')\r\n      .selectAll('text')\r\n      .data(root.descendants().slice(1))\r\n      .join('text')\r\n      .attr('dy', '0.35em')\r\n      .attr('fill', '#FFFFFF')\r\n      .attr('fill-opacity', d => +labelVisible(d.current))\r\n      .attr('transform', d => labelTransform(d.current))\r\n      .attr('font-size', '12px')\r\n      .attr('font-weight', '500')\r\n      .text(d => d.data.name);\r\n\r\n    // 클릭 핸들러 (줌 기능)\r\n    function clicked(event, p) {\r\n      parent.datum(p.parent || root);\r\n\r\n      root.each(d => d.target = {\r\n        x0: Math.max(0, Math.min(1, (d.x0 - p.x0) / (p.x1 - p.x0))) * 2 * Math.PI,\r\n        x1: Math.max(0, Math.min(1, (d.x1 - p.x0) / (p.x1 - p.x0))) * 2 * Math.PI,\r\n        y0: Math.max(0, d.y0 - p.depth),\r\n        y1: Math.max(0, d.y1 - p.depth)\r\n      });\r\n\r\n      const t = svg.transition().duration(750);\r\n\r\n      path.transition(t)\r\n        .tween('data', d => {\r\n          const i = d3.interpolate(d.current, d.target);\r\n          return t => d.current = i(t);\r\n        })\r\n        .filter(function(d) {\r\n          return +this.getAttribute('fill-opacity') || arcVisible(d.target);\r\n        })\r\n        .attr('fill-opacity', d => {\r\n          const isHighlighted = highlightedAxis && \r\n            d.ancestors().some(ancestor => ancestor.data.name === highlightedAxis);\r\n          const isDimmed = highlightedAxis && !isHighlighted;\r\n          \r\n          if (isDimmed) return 0.2;\r\n          return arcVisible(d.target) ? (d.children ? 0.8 : 0.6) : 0;\r\n        })\r\n        .attrTween('d', d => () => arc(d.current));\r\n\r\n      label.filter(function(d) {\r\n          return +this.getAttribute('fill-opacity') || labelVisible(d.target);\r\n        }).transition(t)\r\n        .attr('fill-opacity', d => +labelVisible(d.target))\r\n        .attrTween('transform', d => () => labelTransform(d.current));\r\n    }\r\n\r\n    function arcVisible(d) {\r\n      return d.y1 <= 3 && d.y0 >= 1 && d.x1 > d.x0;\r\n    }\r\n\r\n    function labelVisible(d) {\r\n      return d.y1 <= 3 && d.y0 >= 1 && (d.y1 - d.y0) * (d.x1 - d.x0) > 0.03;\r\n    }\r\n\r\n    function labelTransform(d) {\r\n      const x = (d.x0 + d.x1) / 2 * 180 / Math.PI;\r\n      const y = (d.y0 + d.y1) / 2 * radius;\r\n      return `rotate(${x - 90}) translate(${y},0) rotate(${x < 180 ? 0 : 180})`;\r\n    }\r\n\r\n    function formatTooltip(d) {\r\n      let content = `<strong>${d.name}</strong><br/>Value: ${d.value?.toFixed(1) || 0}`;\r\n      \r\n      if (d.tooltip) {\r\n        content += `<hr/>`;\r\n        content += `Unit: ${d.tooltip.unit}<br/>`;\r\n        content += `Time Window: ${d.tooltip.time_window}<br/>`;\r\n        content += `Weight: ${d.tooltip.weight}<br/>`;\r\n        content += `Source: ${d.tooltip.source_id}`;\r\n      }\r\n      return content;\r\n    }\r\n\r\n  }, [data, highlightedAxis]);\r\n\r\n  return (\r\n    <div className=\"curator-chart-wrapper\">\r\n      <svg ref={svgRef}></svg>\r\n      <div\r\n        ref={tooltipRef}\r\n        className=\"curator-tooltip\"\r\n      ></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SunburstChart;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}