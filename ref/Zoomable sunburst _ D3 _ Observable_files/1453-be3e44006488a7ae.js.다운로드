!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="70a9b904-348b-4963-afb9-d05b206b7e18",e._sentryDebugIdIdentifier="sentry-dbid-70a9b904-348b-4963-afb9-d05b206b7e18")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1453],{87096:function(e,s,t){var a=t(85893);s.Z=e=>(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",...e,children:[(0,a.jsx)("path",{d:"M4 9L4 3C4 2.44771 4.44772 2 5 2L11.0001 2C11.5523 2 12 2.44768 12 2.99992V2.99992"}),(0,a.jsx)("path",{d:"M12 7L12 13C12 13.5523 11.5523 14 11 14L5 14C4.44771 14 4 13.5523 4 13V13"}),(0,a.jsx)("path",{d:"M1 6L4 9L7 6"}),(0,a.jsx)("path",{d:"M15 10L12 7L9 10"})]})},38613:function(e,s,t){t.d(s,{P:function(){return n}});var a=t(85893);let n=e=>(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:[(0,a.jsx)("path",{d:"M6 2L7.59099 5.40901L11 7L7.59099 8.59099L6 12L4.40901 8.59099L1 7L4.40901 5.40901L6 2Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M12.5 2L13.2955 3.7045L15 4.5L13.2955 5.2955L12.5 7L11.7045 5.2955L10 4.5L11.7045 3.7045L12.5 2Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M11.5 8L12.6137 10.3863L15 11.5L12.6137 12.6137L11.5 15L10.3863 12.6137L8 11.5L10.3863 10.3863L11.5 8Z",fill:"currentColor"})]})},89896:function(e,s,t){t.d(s,{DY:function(){return L},LP:function(){return j},o1:function(){return N},u7:function(){return y}});var a=t(85893),n=t(94184),i=t.n(n),l=t(41664),r=t.n(l),d=t(67294),c=t(66338),o=t(87829),h=t(68059),m=t(48537),u=t(97069),b=t(87096),f=t(81027),p=t(61802),x=t(13370),g=t(67534),v=t(99930);let j={GPT_3_5:"gpt-3.5-turbo-16k",GPT_4:"gpt-4"},y="AI Assist",w={enabled:!1,custom:!0},L=e=>{let{className:s,...t}=e;return(0,a.jsx)("span",{className:i()("br2 bg-near-white f6 fw6 mid-gray",s),...t,style:{padding:"2px 4px"},children:"Beta"})},N=(0,v.$j)(e=>{let{currentUser:s,context:t,customer:a}=e;return{currentUser:s,workspaceId:t.context?t.context.id:s.id,customer:a.customer}},e=>({dispatch:e}))(e=>{let{currentUser:s,customer:t,workspaceId:n,dispatch:i}=e,{data:l,mutate:v}=(0,p.h_)("/team/".concat(n,"/assist/provider")),[j,N]=(0,d.useState)(w),[k,A]=(0,d.useState)(!1),[C,_]=(0,d.useState)(!1),I=(0,g.th)(s,n,t);(0,d.useEffect)(()=>{N(l||{...w,custom:!I})},[l,I]),(0,d.useEffect)(()=>{let e=l||w;(0,c.wU)(e,j)?A(!1):A(e.enabled&&!j.enabled||j.enabled&&(j.custom&&!!j.credentials||!j.custom))},[l,j]);let M=(0,x.GS)(x.ro),S=(null==l?void 0:l.quota_allocated)||1e4;return(0,a.jsxs)("div",{id:"aiAssist",className:"pt4 mt5 bt b--light-silver",children:[(0,a.jsxs)("div",{className:"flex mb3 items-center",children:[(0,a.jsx)("div",{className:"f4 fw6 near-black mr2",children:y}),(0,a.jsx)(L,{})]}),(0,a.jsx)("div",{className:"mb3",children:(0,a.jsxs)("div",{className:"f6 lh-f6 mid-gray",children:["The"," ",(0,a.jsxs)(r(),{href:"/@observablehq/introduction-to-ai-assist",className:"pa0 fw5 blue bn bg-transparent pointer",children:[y," chat panel"]})," ","can help you generate and edit code through a chat interface. This is an experimental feature, and generated code may not always be correct. Feedback about this feature is welcome and can be sent to"," ",(0,a.jsx)(r(),{href:"mailto:support@observablehq.com",className:"pa0 fw5 blue bn bg-transparent pointer",children:"support@observablehq.com"}),"."]})}),(0,a.jsxs)("div",{style:(0,o.Rn)({isMobile:M,rightSize:"30rem"}),className:"dg",children:[(0,a.jsx)("label",{className:o.RY,htmlFor:"enabled",children:"Access"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(m.X,{id:"setting_assist_enabled",onChange:e=>N({...j,enabled:e.target.checked}),checked:j.enabled,name:"enabled",label:"Enable ".concat(y),className:"fw5"})}),(0,a.jsxs)("div",{className:"f6 mid-gray lh-f6 mt2",children:["Allow members of this workspace to use the"," ",(0,a.jsxs)(r(),{href:"/@observablehq/introduction-to-ai-assist",className:"pa0 fw5 blue bn bg-transparent pointer",children:[y," chat panel"]})," ","to generate and edit code. By enabling this feature you agree to the"," ",(0,a.jsxs)(r(),{href:"/@observablehq/terms-of-service",className:"pa0 fw5 blue bn bg-transparent pointer",children:[y," terms of service"]}),"."]})]}),j.enabled&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:o.RY,children:"OpenAI API Key"}),(0,a.jsx)("div",{className:"pv2",children:j.custom||!I&&(null==l?void 0:l.custom)?j.credentials?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"f6 mid-gray lh-f6 mb3",children:["This API key is used for all messages in this workspace and is configured to use the ",j.engine," model."]}),(0,a.jsxs)("div",{className:"flex items-center mt2",style:{gap:"8px"},children:[(0,a.jsx)(h.aX,{icon:b.Z,text:"Replace Key",onClick:()=>i({type:"showModal",modal:"addAiServiceKeyModal",modalProps:{settings:j,updateAiServiceKey:(e,s)=>N({...j,credentials:e,engine:s,custom:!0})}})}),(0,a.jsx)(h.aX,{icon:f.Z,text:"Remove Key",destructive:!0,onClick:()=>{N({...j,credentials:"",enabled:!1,custom:!I})}})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"fw5 mb2",children:"No OpenAI API Key configured."}),(0,a.jsxs)("div",{className:"f6 mid-gray lh-f6 mb3",children:["An"," ",(0,a.jsx)(r(),{href:"https://help.openai.com/en/articles/4936850-where-do-i-find-my-secret-api-key",target:"_blank",className:"fw5 blue",children:"OpenAI API key"})," ","is required to make a connection to the language model."]})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(h.aX,{icon:u.Z,text:"Add Key",onClick:()=>i({type:"showModal",modal:"addAiServiceKeyModal",modalProps:{settings:j,updateAiServiceKey:(e,s)=>{N({...j,credentials:e,enabled:!0,engine:s,custom:!0})}}})})})]}):(0,a.jsxs)(a.Fragment,{children:[l&&(0,a.jsxs)("div",{className:"mb2 fw6 observable-dark-gold lh-f6",children:[l.quota_used," /"," ",l.quota_allocated," free tokens used"]}),(0,a.jsxs)("div",{className:"mb3 f6 mid-gray lh-f6",children:["This workspace has ",S," tokens (about"," ",1e3*Math.floor(3*S/4/1e3)," words) as a trial to use in"," ",y," conversations. To continue chatting beyond that limit, you will need to add an OpenAI key to your workspace."]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)(h.aX,{icon:u.Z,text:"Add OpenAI API Key",onClick:()=>i({type:"showModal",modal:"addAiServiceKeyModal",modalProps:{settings:j,updateAiServiceKey:(e,s)=>{N({...j,credentials:e,enabled:!0,engine:s,custom:!0})}}})})})]})})]})]}),(0,a.jsx)("div",{className:"mt4",style:{gridColumn:"1/3"},children:(0,a.jsx)("div",{className:"flex mt1-ns mt3 mb3 justify-start items-center",children:(0,a.jsx)(h.KM,{id:"assist-settings-save-button",text:"Save changes",className:"ph3",disabled:!k,loading:C,onClick:function(){_(!0),i({type:"saveAssistSettings",settings:j,onComplete:()=>{_(!1),N(j.credentials?{...j,credentials:"".concat(j.credentials.substring(0,3),"...")}:w),v()}})},type:"submit"})})})]})})},99930:function(e,s,t){t.d(s,{$j:function(){return i},v9:function(){return l},zt:function(){return a.zt}});var a=t(66338),n=t(47720);let i=(0,n.S3)(),l=(0,n.gR)()}}]);