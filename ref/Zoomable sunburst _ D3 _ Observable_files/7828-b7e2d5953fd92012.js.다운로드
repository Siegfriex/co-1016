!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="647ab66a-c488-48e0-89fa-f5dd9de3d1c2",e._sentryDebugIdIdentifier="sentry-dbid-647ab66a-c488-48e0-89fa-f5dd9de3d1c2")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7828],{78129:function(e,t,n){n.d(t,{E:function(){return a}});var s=n(85893),r=n(61802),l=n(746);let a=e=>{let{provider:t,children:n,alreadyAuthenticated:a,redirectToPicker:i=!1,onAuth:o}=e;return(0,s.jsxs)("form",{onSubmit:e=>{e.target.token.value=(0,r.FN)(),null==o||o(t,a)},action:"".concat("https://api.observablehq.com","/user/token/authorize"),method:"post",children:[(0,s.jsx)("input",{type:"hidden",name:"token",value:""}),(0,s.jsx)("input",{type:"hidden",name:"path",value:"".concat(location.pathname).concat(i?"?cloudFileProvider=".concat(t):"")}),(0,s.jsx)("input",{type:"hidden",name:"scopes",value:l.c[t].scopes.join(" ")}),(0,s.jsx)("input",{type:"hidden",name:"provider",value:t}),n]})}},23181:function(e,t,n){n.d(t,{h:function(){return p}});var s=n(85893),r=n(67294),l=n(63650),a=n(1639),i=n(67125),o=n(7117),c=n(107),d=n(62539),u=n(49803),h=n(68098),m=n(83191);let p=e=>{let{commentingLock:t}=e,{admin_locked:n,admin_lock_reason:p,user_lock_actor:f,time:x}=t,g=x||void 0,b=(0,d.K)(g),v=g&&(0,u.LN)(g,b),j=(0,c.d)((0,r.useCallback)(()=>(0,s.jsx)(m.u,{label:(0,s.jsxs)("div",{className:"truncate w5 pa2 f6 dark-gray",children:[n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{suppressHydrationWarning:!0,children:["By"," ",(0,s.jsx)("a",{href:o.q1.support,rel:"noopener noreferrer",target:"_blank",className:"no-underline dark-gray hover-blue",children:"Observable Support"}),v&&(0,s.jsxs)(s.Fragment,{children:[" on ",v]})]}),(0,s.jsx)("div",{className:"mt2 f7 fw5 ws-normal dark-gray lh-copy",children:p})]}):f&&(0,s.jsxs)("div",{className:"flex truncate items-center",suppressHydrationWarning:!0,children:["By",(0,s.jsx)(l.qE,{user:f,size:14,className:"mh1"}),(0,h.RX)(f),v&&(0,s.jsxs)(s.Fragment,{children:[" on ",v]})]}),(0,s.jsxs)("div",{className:"mt2 f7 fw5 ws-normal dark-gray lh-copy",children:["While comments are locked, only editors may comment."," ",(0,s.jsxs)("a",{href:"/@observablehq/comments",target:"_blank",rel:"noreferrer",className:"inline-flex no-underline blue items-center",children:["Learn more",(0,s.jsx)(a.Z,{})]})]})]}),children:(0,s.jsx)("span",{children:"Comments locked"})}),[n,p,f,v]));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Z,{className:"mr1 moon-gray"}),j]})}},51219:function(e,t,n){n.d(t,{J:function(){return v}});var s=n(85893),r=n(36203),l=n(45916),a=e=>{let{mimeType:t}=e;if(!t)return(0,s.jsx)(o,{className:"flex-shrink-0"});let[n,r]=t.split("/"),l={className:"flex-shrink-0",title:t};switch(n){case"audio":return(0,s.jsx)(d,{...l});case"video":return(0,s.jsx)(p,{...l});case"image":return"svg+xml"===r?(0,s.jsx)(m,{...l}):(0,s.jsx)(h,{...l});case"text":return"csv"===r||"tab-separated-values"===r?(0,s.jsx)(i,{...l}):(0,s.jsx)(u,{...l});case"application":switch(r){case"pdf":return(0,s.jsx)(c,{...l});case"geo+json":return(0,s.jsx)(f,{...l});case"xml":case"json":case"x-sqlite3":return(0,s.jsx)(i,{...l})}}return(0,s.jsx)(o,{...l})};function i(e){return(0,s.jsxs)("svg",{width:"24",height:"27",viewBox:"0 0 28 32",fill:"white",...e,children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#EFEFEF"}),(0,s.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E2E2E2"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.1111 14C9.49746 14 9 14.4975 9 15.1111V17.3333C9 17.947 9.49746 18.4444 10.1111 18.4444H12.3333C12.947 18.4444 13.4444 17.947 13.4444 17.3333V15.1111C13.4444 14.4975 12.947 14 12.3333 14H10.1111ZM15.6667 14C15.053 14 14.5556 14.4975 14.5556 15.1111V17.3333C14.5556 17.947 15.053 18.4444 15.6667 18.4444H17.8889C18.5025 18.4444 19 17.947 19 17.3333V15.1111C19 14.4975 18.5025 14 17.8889 14H15.6667ZM9 20.6667C9 20.053 9.49746 19.5556 10.1111 19.5556H12.3333C12.947 19.5556 13.4444 20.053 13.4444 20.6667V22.8889C13.4444 23.5025 12.947 24 12.3333 24H10.1111C9.49746 24 9 23.5025 9 22.8889V20.6667ZM15.6667 19.5556C15.053 19.5556 14.5556 20.053 14.5556 20.6667V22.8889C14.5556 23.5025 15.053 24 15.6667 24H17.8889C18.5025 24 19 23.5025 19 22.8889V20.6667C19 20.053 18.5025 19.5556 17.8889 19.5556H15.6667Z",fill:"#C4C4C4"})]})}function o(e){return(0,s.jsxs)("svg",{width:"24",height:"27",viewBox:"0 0 28 32",fill:"none",...e,children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#F2F2F2"}),(0,s.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E4E4E4"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.4462 14.0293C12.5637 13.0792 11.0428 13.1363 10.2339 14.1499C9.5666 14.9861 9.6264 16.1884 10.3734 16.9543L16.6159 23.3543C16.8831 23.6284 17.3237 23.6284 17.591 23.3543C17.8491 23.0898 17.8491 22.6677 17.591 22.4032L11.979 16.6495L13.1244 15.5323L18.7364 21.286C19.6006 22.172 19.6006 23.5855 18.7364 24.4715C17.8412 25.3893 16.3657 25.3893 15.4705 24.4715L9.22803 18.0714C7.91758 16.7279 7.81268 14.6188 8.98334 13.1519C10.4023 11.3738 13.0703 11.2737 14.6185 12.9404L20.5861 19.3646L19.4139 20.4535L13.4462 14.0293Z",fill:"#C4C4C4"})]})}function c(e){return(0,s.jsxs)("svg",{width:"24",height:"27",viewBox:"0 0 28 32",fill:"white",...e,children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#EFEFEF"}),(0,s.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E2E2E2"}),(0,s.jsx)("rect",{x:"7",y:"20",width:"4",height:"4",stroke:"#C4C4C4",strokeWidth:"2"}),(0,s.jsx)("circle",{cx:"12.5",cy:"13.5",r:"2.5",stroke:"#C4C4C4",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M15.4689 21.25L18.5 16L21.5311 21.25H15.4689Z",stroke:"#C4C4C4",strokeWidth:"2"})]})}function d(e){return(0,s.jsxs)("svg",{width:"24",height:"27",viewBox:"0 0 28 32",fill:"white",...e,children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#EFEFEF"}),(0,s.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E2E2E2"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.0761 20.0534V14.2508L11.9239 15.8358V23.5082C11.9736 23.6655 12 23.8303 12 24C12 25.1046 10.8807 26 9.5 26C8.11929 26 7 25.1046 7 24C7 22.8954 8.11929 22 9.5 22C9.69829 22 9.89118 22.0185 10.0761 22.0534V15.8358C10.0761 15.0246 10.6052 14.3083 11.3806 14.0698L17.4893 12.1905C18.2021 11.9712 18.9239 12.5043 18.9239 13.2502V21.5082C18.9736 21.6655 19 21.8303 19 22C19 23.1046 17.8807 24 16.5 24C15.1193 24 14 23.1046 14 22C14 20.8954 15.1193 20 16.5 20C16.6983 20 16.8912 20.0185 17.0761 20.0534Z",fill:"#C4C4C4"})]})}function u(e){return(0,s.jsxs)("svg",{width:"24",height:"27",viewBox:"0 0 28 32",fill:"white",...e,children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#EFEFEF"}),(0,s.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E2E2E2"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 15C7 14.4477 7.44772 14 8 14H20C20.5523 14 21 14.4477 21 15C21 15.5523 20.5523 16 20 16H8C7.44772 16 7 15.5523 7 15ZM7 19C7 18.4477 7.44772 18 8 18H20C20.5523 18 21 18.4477 21 19C21 19.5523 20.5523 20 20 20H8C7.44772 20 7 19.5523 7 19ZM8 22C7.44772 22 7 22.4477 7 23C7 23.5523 7.44772 24 8 24H15C15.5523 24 16 23.5523 16 23C16 22.4477 15.5523 22 15 22H8Z",fill:"#C4C4C4"})]})}function h(e){return(0,s.jsxs)("svg",{width:"24",height:"27",viewBox:"0 0 28 32",fill:"white",...e,children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#EFEFEF"}),(0,s.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E2E2E2"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.9143 17.8125C21.2432 17.8125 22.3205 16.7352 22.3205 15.4062C22.3205 14.0773 21.2432 13 19.9143 13C18.5853 13 17.508 14.0773 17.508 15.4062C17.508 16.7352 18.5853 17.8125 19.9143 17.8125ZM9.08063 16.0838C9.42048 15.5174 10.2414 15.5174 10.5812 16.0838L13.7013 21.284L15.0893 19.4333C15.4393 18.9667 16.1393 18.9667 16.4893 19.4333L18.8643 22.6C19.2969 23.1768 18.8853 24 18.1643 24H13.7855H13.4143H5.87635C5.19622 24 4.77612 23.258 5.12605 22.6748L9.08063 16.0838Z",fill:"#C4C4C4"})]})}function m(e){return(0,s.jsxs)("svg",{width:"24",height:"27",viewBox:"0 0 28 32",fill:"white",...e,children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#EFEFEF"}),(0,s.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E2E2E2"}),(0,s.jsx)("rect",{x:"7",y:"20",width:"4",height:"4",stroke:"#C4C4C4",strokeWidth:"2"}),(0,s.jsx)("circle",{cx:"12.5",cy:"13.5",r:"2.5",stroke:"#C4C4C4",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M15.4689 21.25L18.5 16L21.5311 21.25H15.4689Z",stroke:"#C4C4C4",strokeWidth:"2"})]})}function p(e){return(0,s.jsxs)("svg",{width:"24",height:"27",viewBox:"0 0 28 32",fill:"white",...e,children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#EFEFEF"}),(0,s.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E2E2E2"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.1061 25.2121C17.4783 25.2121 20.2121 22.4783 20.2121 19.1061C20.2121 15.7338 17.4783 13 14.1061 13C10.7338 13 8 15.7338 8 19.1061C8 22.4783 10.7338 25.2121 14.1061 25.2121ZM16.2945 19.8756C16.8288 19.5017 16.8288 18.7104 16.2945 18.3365L14.175 16.8528C13.5524 16.417 12.6969 16.8624 12.6969 17.6224V20.5897C12.6969 21.3497 13.5524 21.7951 14.175 21.3593L16.2945 19.8756Z",fill:"#C4C4C4"})]})}function f(e){return(0,s.jsxs)("svg",{width:"24",height:"27",viewBox:"0 0 28 32",fill:"white",...e,children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2 26.5C2 28.433 3.567 30 5.5 30H22.5C24.433 30 26 28.433 26 26.5V10.5H19.5C18.3954 10.5 17.5 9.60457 17.5 8.5V2H5.5C3.567 2 2 3.567 2 5.5V26.5Z",fill:"#EFEFEF"}),(0,s.jsx)("path",{d:"M26 10.5L17.5 2V8.5C17.5 9.60457 18.3954 10.5 19.5 10.5H26Z",fill:"#E2E2E2"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 13C11.2386 13 9 15.2501 9 18.0256C9 20.1019 10.0788 21.4751 11.0711 22.7383C11.4054 23.1638 11.7299 23.5768 12 24C12.515 24.8069 12.9234 25.4282 13.2332 25.8905C13.607 26.4482 14.393 26.4482 14.7668 25.8905C15.0766 25.4282 15.485 24.8069 16 24C16.2783 23.564 16.6142 23.1523 16.9591 22.7295C17.943 21.5235 19 20.228 19 18.0256C19 15.2501 16.7614 13 14 13ZM14 20C15.1046 20 16 19.1046 16 18C16 16.8954 15.1046 16 14 16C12.8954 16 12 16.8954 12 18C12 19.1046 12.8954 20 14 20Z",fill:"#C4C4C4"})]})}var x=n(91042),g=n(91529),b=n(8273);let v=e=>{var t;let{file:n,used:i,isPrivateInPublic:o=!1,isBucketUnavailable:c=!1,isBucketError:d=!1}=e;return o||c||d?(0,s.jsxs)("div",{className:"flex f7 items-center",children:[(0,s.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,s.jsx)(a,{mimeType:n.mimeType}),(0,s.jsx)("div",{className:"flex absolute bottom-0 br-100 bg-red justify-center items-center",style:{right:"-3px",width:14,height:14},children:(0,s.jsx)(l.Z,{className:"white","aria-label":"Private file",style:{width:14,height:14}})})]}),(0,s.jsxs)("div",{className:"ph2 overflow-x-hidden",children:[(0,s.jsx)("div",{className:"truncate pb1 fw6 dark-gray",title:n.name,children:n.name}),(0,s.jsx)("div",{className:"truncate gray lh-title",children:o?"Only available in private notebooks":c?"Private file storage unavailable":"Unable to access file"})]})]}):(0,s.jsxs)("div",{className:"flex f7 items-center",children:[(0,s.jsxs)("div",{className:"relative flex-shrink-0",children:[(null===(t=n.mimeType)||void 0===t?void 0:t.startsWith("image/"))&&"url"in n?(0,s.jsx)("img",{src:n.url,alt:n.name,className:"br2 ba bw1 b--light-silver",style:{width:20,height:24,objectFit:"cover"}}):(0,s.jsx)(a,{mimeType:n.mimeType}),i&&(0,s.jsx)("div",{className:"flex absolute bottom-0 br-100 bg-blue justify-center items-center",style:{right:"-3px",width:14,height:14},children:(0,s.jsx)(r.Z,{className:"white","aria-label":"Private file",style:{width:14,height:14}})})]}),(0,s.jsxs)("div",{className:"ph2 overflow-x-hidden",children:["downloadUrl"in n?(0,s.jsx)("a",{className:"db truncate pb1 fw6 no-underline dark-gray hover-blue",href:n.downloadUrl,title:n.name,children:n.name}):(0,s.jsx)("div",{className:"truncate pb1 fw6 dark-gray",title:n.name,children:n.name}),(0,s.jsxs)("div",{className:"truncate gray lh-title",children:[(0,b.lL)(n)?(0,s.jsx)("span",{className:"f7 gray",children:"Local"}):i?(0,s.jsx)("span",{className:"f7 fw6 blue",children:"In use"}):(0,s.jsx)("span",{className:"f7 gray",children:"Unused"}),(0,s.jsx)("span",{className:"light-gray",children:" • "}),"size"in n?(0,s.jsxs)(s.Fragment,{children:[(0,g.BU)(n.size),(0,s.jsx)("span",{className:"light-gray",children:" • "})]}):null,(0,s.jsx)(x.q,{time:n.createTime})]})]})]})}},45770:function(e,t,n){n.d(t,{q:function(){return r}});var s=n(85893);let r=e=>{let{text:t,matcher:n,highlightClass:r="underline"}=e,l=[],a=0;for(let[e,i]of n.matches(t).sort((e,t)=>{let[n]=e,[s]=t;return n-s}))e=Math.max(a,e),(i=Math.max(a,i))>e&&(e>a&&l.push((0,s.jsx)(s.Fragment,{children:t.slice(a,e)})),l.push((0,s.jsx)("span",{className:r,children:t.slice(e,i)},e)),a=i);return l.push((0,s.jsx)(s.Fragment,{children:t.slice(a)})),(0,s.jsx)(s.Fragment,{children:l})}},52234:function(e,t,n){var s=n(85893);t.Z=e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",...e,children:[(0,s.jsx)("path",{d:"M10.2929 8.29291L11.7071 9.70712L9.4142 12L11.7071 14.2929L10.2929 15.7071L6.58577 12L10.2929 8.29291Z"}),(0,s.jsx)("path",{d:"M8 11L14 11L14 13L8 13L8 11Z"}),(0,s.jsx)("path",{d:"M2 3C2 1.89543 2.89543 1 4 1H10L14 5V8H12V6H9V3H4V13H6V15H4C2.89543 15 2 14.1046 2 13V3Z"})]})},98436:function(e,t,n){var s=n(85893);t.Z=e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:[(0,s.jsx)("rect",{x:"9",y:"12",width:"2",height:"10",transform:"rotate(-180 9 12)",fill:"currentColor"}),(0,s.jsx)("path",{d:"M12 9L8 13L4 9",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),e.children]})},22878:function(e,t,n){var s=n(85893);t.Z=e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:[(0,s.jsx)("rect",{x:"7",y:"4",width:"2",height:"10",fill:"currentColor"}),(0,s.jsx)("path",{d:"M4 7L8 3L12 7",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),e.children]})},56249:function(e,t,n){var s=n(85893);t.Z=e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",...e,children:[(0,s.jsx)("circle",{cx:"4",cy:"3",r:"2",strokeWidth:"1.5"}),(0,s.jsx)("circle",{cx:"12",cy:"13",r:"2",strokeWidth:"1.5"}),(0,s.jsx)("path",{d:"M4 5V11C4 12.1046 4.89543 13 6 13H7",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M12 11V5C12 3.89543 11.1046 3 10 3H9",strokeWidth:"2"})]})},87081:function(e,t,n){var s=n(85893);t.Z=e=>(0,s.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",...e,children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 2.15771L3.98463 4.50001L5 5.0923L9.01537 2.75001L8 2.15771ZM11 3.90771L6.98463 6.25001L8 6.8423L12.0154 4.50001L11 3.90771ZM13 6.24104L9 8.57438V13.259L13 10.9256V6.24104ZM7 13.259V8.57438L3 6.24104V10.9256L7 13.259ZM7.24419 0.283189C7.71124 0.0107464 8.28876 0.0107473 8.75581 0.283189L14.5039 3.63623C14.8111 3.81544 15 4.14434 15 4.50001V11.2128C15 11.7463 14.7166 12.2397 14.2558 12.5085L8.50387 15.8638C8.19251 16.0454 7.80749 16.0454 7.49613 15.8638L1.74419 12.5085C1.28337 12.2397 1 11.7463 1 11.2128V4.50001C1 4.14434 1.18891 3.81544 1.49613 3.63623L7.24419 0.283189Z"})})},97543:function(e,t,n){var s=n(85893);t.Z=e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",...e,children:[(0,s.jsx)("path",{d:"M2 3C2 1.89543 2.89543 1 4 1H10L14 5V8H12V6H9V3H4V13H6V15H4C2.89543 15 2 14.1046 2 13V3Z"}),(0,s.jsx)("path",{d:"M7.3598 12.7682L8.64017 11.2318L11 13.1983L13.3598 11.2318L14.6402 12.7682L11 15.8017L7.3598 12.7682Z"}),(0,s.jsx)("path",{d:"M10 15L10 9L12 9L12 15L10 15Z"})]})},92790:function(e,t,n){var s=n(85893);t.Z=e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:[(0,s.jsx)("path",{d:"M11 15V15C11 14.4477 10.5523 14 10 14L6 14C5.44772 14 5 14.4477 5 15V15",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M3 3L13 3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M11 8.25L13 3L15 8.25C15 9.2165 14.1046 10 13 10C11.8954 10 11 9.2165 11 8.25Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M1 8.25L3 3L5 8.25C5 9.2165 4.10457 10 3 10C1.89543 10 1 9.2165 1 8.25Z",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M8 3L8 14",stroke:"currentColor",strokeWidth:"2"})]})},24321:function(e,t,n){var s=n(85893);t.Z=e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd",...e,children:[(0,s.jsx)("path",{d:"M3 1.75C2.30964 1.75 1.75 2.30964 1.75 3C1.75 3.69036 2.30964 4.25 3 4.25C3.69036 4.25 4.25 3.69036 4.25 3C4.25 2.30964 3.69036 1.75 3 1.75ZM0.25 3C0.25 1.48122 1.48122 0.25 3 0.25C4.51878 0.25 5.75 1.48122 5.75 3C5.75 4.51878 4.51878 5.75 3 5.75C1.48122 5.75 0.25 4.51878 0.25 3Z"}),(0,s.jsx)("path",{d:"M13 11.75C12.3096 11.75 11.75 12.3096 11.75 13C11.75 13.6904 12.3096 14.25 13 14.25C13.6904 14.25 14.25 13.6904 14.25 13C14.25 12.3096 13.6904 11.75 13 11.75ZM10.25 13C10.25 11.4812 11.4812 10.25 13 10.25C14.5188 10.25 15.75 11.4812 15.75 13C15.75 14.5188 14.5188 15.75 13 15.75C11.4812 15.75 10.25 14.5188 10.25 13Z"}),(0,s.jsx)("path",{d:"M10 12C9.44771 12 9 11.5523 9 11V5C9 3.34315 7.65685 2 6 2H5V4H6C6.55228 4 7 4.44772 7 5V11C7 12.6569 8.34315 14 10 14H11V12H10Z"})]})},14944:function(e,t,n){var s=n(85893);t.Z=e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round",...e,children:[(0,s.jsx)("path",{d:"M2 9V5.89453C2 5.34225 2.44772 4.89453 3 4.89453H10C10.5523 4.89453 11 5.34225 11 5.89453V13.8945C11 14.4468 10.5523 14.8945 10 14.8945H8"}),(0,s.jsx)("line",{x1:"4",y1:"10",x2:"4",y2:"16"}),(0,s.jsx)("path",{d:"M5 3L5 2.00001L12 2C13.1046 2 14 2.89543 14 4V12H13"}),(0,s.jsx)("line",{x1:"7",y1:"13",x2:"1",y2:"13"}),e.children]})},12300:function(e,t,n){var s=n(85893);t.Z=e=>(0,s.jsxs)("svg",{width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",...e,children:[(0,s.jsx)("path",{d:"M8 1h3v1l-1 1v4l2 .875V9H9v5.125L8 15l-1-.875V9H4V7.875L6 7V3L5 2V1z"}),e.children]})},69872:function(e,t,n){n.d(t,{E:function(){return r}});var s=n(85893);let r=e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",...e,children:[(0,s.jsx)("path",{d:"M8 9L8 3C8 2.44772 8.44772 2 9 2L11 2",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M5 6L8 9L11 6",strokeWidth:"2"}),(0,s.jsx)("circle",{cx:"8",cy:"14",r:"0.5"}),(0,s.jsx)("circle",{cx:"5",cy:"14",r:"0.5"}),(0,s.jsx)("circle",{cx:"11",cy:"14",r:"0.5"})]})},38620:function(e,t,n){n.d(t,{x:function(){return r}});var s=n(85893);let r=e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",...e,children:[(0,s.jsx)("path",{d:"M8 9L8 3C8 2.44772 8.44772 2 9 2L11 2",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M5 6L8 9L11 6",strokeWidth:"2"}),(0,s.jsx)("circle",{cx:"8",cy:"14",r:"0.5"})]})},34453:function(e,t,n){var s=n(85893),r=n(94184),l=n.n(r),a=n(93091);t.Z=e=>{let{className:t,...n}=e;return(0,s.jsx)(a.Z,{className:l()("rotate-180",t),...n})}},93091:function(e,t,n){var s=n(85893);t.Z=e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:[(0,s.jsx)("path",{xmlns:"http://www.w3.org/2000/svg",d:"M7.8 2.26667L5.6 5.2C5.22229 5.70361 4.62951 6 4 6V13L5.36656 13.6833C5.78313 13.8916 6.24247 14 6.7082 14H12.2192C12.6781 14 13.0781 13.6877 13.1894 13.2425L14.6894 7.24254C14.8472 6.61139 14.3698 6 13.7192 6H12H9V2.66667C9 2.29848 8.70152 2 8.33333 2C8.1235 2 7.9259 2.0988 7.8 2.26667Z",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("path",{xmlns:"http://www.w3.org/2000/svg",d:"M0 6C0 5.44772 0.447715 5 1 5H2V14H1C0.447715 14 0 13.5523 0 13V6Z",fill:"currentColor",stroke:"none",strokeWidth:"2"})]})},35433:function(e,t,n){var s=n(85893);t.Z=e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",...e,children:[(0,s.jsx)("rect",{x:"3",y:"7",width:"10",height:"7",rx:"0.5"}),(0,s.jsx)("path",{d:"M5 7.5V5C5 1.36704 9.9495 1.03365 10.8577 4"})]})},25915:function(e,t,n){var s=n(85893);t.Z=e=>(0,s.jsx)("svg",{viewBox:"0 0 16 16",width:"16",height:"16",fill:"none",strokeWidth:"1.5",strokeLinecap:"round",stroke:"currentColor",...e,children:(0,s.jsx)("path",{d:"M6.983 2.57l-5.021 8.25a1.19 1.19 0 0 0 1.017 1.785h10.013a1.19 1.19 0 0 0 1.017-1.784L9.017 2.57a1.19 1.19 0 0 0-2.034 0zM8 5.45V8M8 10v.1"})})},67752:function(e,t,n){n.d(t,{W:function(){return a}});var s=n(85893),r=n(94184),l=n.n(r);function a(e){let{icon:t,text:n,className:r=""}=e,a=(0,s.jsx)(t,{className:l()("nb1",r)});return n?(0,s.jsxs)("b",{children:[a," ",n]}):a}},50852:function(e,t,n){n.d(t,{e:function(){return c}});var s=n(85893),r=n(40645),l=n.n(r),a=n(94184),i=n.n(a),o=n(11974);let c=e=>{let{shortcut:t}=e;return(0,s.jsx)("span",{title:(0,o._)(t),className:"f7",suppressHydrationWarning:!0,children:t.split("-").map((e,t)=>(0,s.jsxs)("span",{suppressHydrationWarning:!0,className:"jsx-802d2fca74968b19 "+(i()("dib",t>0?"ml1":"","Drag"===e||"Click"===e?"":"tc br2 ph1 key-shadow")||""),children:[("Drag"===e||"Click"===e)&&"+ ",(0,o.Z)(e),(0,s.jsx)(l(),{id:"802d2fca74968b19",children:"span.jsx-802d2fca74968b19{min-width:6px}.key-shadow.jsx-802d2fca74968b19{-webkit-box-shadow:0 0 0 1px#dedede,1px 1px 0 1px var(--silver);-moz-box-shadow:0 0 0 1px#dedede,1px 1px 0 1px var(--silver);box-shadow:0 0 0 1px#dedede,1px 1px 0 1px var(--silver)}"})]},t))})}},7564:function(e,t,n){n.d(t,{P:function(){return M}});var s=n(85893),r=n(46350),l=n(67294),a=n(6687),i=n(60938),o=n(77761),c=n(68059),d=n(98436),u=n(22878),h=n(38784),m=n(64756),p=n(58551),f=n(14944),x=n(12300),g=n(41978),b=n(81027),v=n(46582),j=n(49611),y=n(78047),V=n(64664),w=n(67534),C=n(11974),k=n(46470),N=n(21482),L=n(33888);let M=2500,Z=(0,l.memo)(function(e){var t;let{node:n,hasPrevious:a,hasNext:i,editorFocused:o,editorKey:Z,editorMode:H,editorReadonly:S,editorSettings:R,editors:E,dirty:_,dispatch:F}=e,{id:D,data:I,pinned:P}=n,A=(null==I?void 0:null===(t=I.display)||void 0===t?void 0:t.mode)==="none",{canAttach:T,canDeleteNode:B}=(0,L.v9)(e=>{let{notebook:t,currentUser:n}=e;return{canAttach:(0,w.j5)(n,t),canDeleteNode:t.model.nodes.length>1}}),[z,O]=(0,l.useState)(null),W=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.hA,{icon:_?g.s:g.Z,title:"Run cell ".concat((0,C.Z)("Shift-Enter")),className:_?"blue":"",onClick:()=>{E.applyCommand(Z,(0,j.z)("click","nodeToolbar"))}}),(0,s.jsx)(c.hA,{icon:x.Z,title:"".concat(P?"Unpin":"Pin"," cell ").concat((0,C.Z)("Mod-.")),className:P?"blue ml2":"ml2",joinRight:!0,onClick:()=>F({type:"togglePin",id:D})}),(0,s.jsx)(c.hA,{icon:A?m.Z:p.Z,title:"".concat(A?"Show":"Hide"," output ").concat((0,C.Z)("Mod-,")),className:"ml2",joinLeft:!0,onClick:()=>F({type:"toggleDisplay",id:D})}),(0,s.jsx)(c.hA,{icon:h.Z,title:"Select cell ".concat((0,C.Z)("Escape-X")),suppressHydrationWarning:!0,className:"ml2",onClick:()=>F({type:"selectionPromote"})}),(0,s.jsx)(c.hA,{icon:u.Z,title:"Move cell up ".concat((0,C.Z)("Ctrl-Shift-Up")),suppressHydrationWarning:!0,className:"ml2",disabled:!a,joinRight:!0,onClick:()=>F({type:"moveUp",id:D})}),(0,s.jsx)(c.hA,{icon:d.Z,title:"Move cell down ".concat((0,C.Z)("Ctrl-Shift-Down")),suppressHydrationWarning:!0,className:"ml2",disabled:!i,joinLeft:!0,onClick:()=>F({type:"moveDown",id:D})}),(0,s.jsx)(c.hA,{icon:f.Z,title:"Duplicate cell ".concat((0,C.Z)("Shift-Alt-Mod-Down")),suppressHydrationWarning:!0,className:"ml2",onClick:e=>{F({type:"duplicate",id:D,before:e.shiftKey})}}),(0,s.jsx)(c.hA,{icon:b.Z,title:B?"Double-click to delete cell ".concat((0,C.Z)("Alt-Backspace")):"Delete cell (Cannot delete the only cell)",suppressHydrationWarning:!0,className:"ml2",destructive:!!z,disabled:!B,text:z?"Delete?":"",onClick:e=>{z?(F({type:"remove",focusAfter:e.shiftKey,focusBefore:!e.shiftKey,id:D}),window.clearTimeout(z),O(null)):O(window.setTimeout(()=>O(null),M))}}),o&&N.qz[H].toolbar.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"ml2 mv1 bl bw1 br2",style:{borderColor:"var(--observable-focus-light-blue)"}}),N.qz[H].toolbar.filter(e=>!e.requiresAttachments||T).map(e=>(0,s.jsx)(c.hA,{"data-cy":e.name,icon:e.icon,title:e.title,joinLeft:e.joinLeft,joinRight:e.joinRight,suppressHydrationWarning:!0,className:"ml2",onClick:()=>{"attach"!==e.name||R.fileUploadsOn?e.onClick(Z,E,D,F):R.loginToUpload&&F({type:"showModal",modal:"login",modalProps:{loginReason:"files"},trigger:"click",source:"nodeEditorToolbarAttachButton"})}},e.name))]}):null,(0,s.jsx)("div",{className:"flex flex-grow-1"}),(0,s.jsx)(c.hA,{icon:v.Z,title:"Blur cell ".concat((0,C.Z)("Escape")),suppressHydrationWarning:!0,transparent:!0,onMouseDown:e=>{e.stopPropagation()},onClick:()=>{F({type:"blur",id:D})}})]});return(0,k.t)()?(0,s.jsx)("div",{className:"pt1 pb2 near-black",style:{marginLeft:-14,marginRight:-14,minWidth:"calc(100% + 28px)",borderBottomRightRadius:"0.25rem",borderTopRightRadius:0,backgroundColor:"var(--observable-focus-lightest-blue)"},onMouseDown:e=>{e.preventDefault()},children:(0,s.jsx)("div",{className:"ph2 w-100 flex relative no-wrap overflow-y-hidden overflow-x-auto",children:W})}):(0,s.jsx)(r.h,{children:(0,s.jsx)("div",{className:"fixed left-0 right-0 bottom-0 pv2 z-1 bg-white b--silver bt near-black dn-print",onMouseDown:e=>{e.preventDefault(),E.refocus()},children:(0,s.jsx)(V.Z,{className:"w-100",children:(0,s.jsxs)("div",{className:"flex relative",style:{marginLeft:-14,marginRight:-14},children:[(0,s.jsx)("div",{className:"absolute h-100 flex items-center pr2",style:{font:"var(--monospace-font)",right:"100%"},onMouseDown:e=>{e.stopPropagation()},children:(0,s.jsx)(y.Q,{node:n,source:"nodeToolbar",dispatch:F,disabled:S,style:{textAlign:"right",width:"calc(max((100vw - var(--max-width-8))/2, 0px))"}})}),W]})})})})});t.Z=e=>{let{node:t,dirty:n,hasPrevious:r,hasNext:l,editorFocused:c,editorState:d,editors:u,dispatch:h}=e,m=d.field(i.C);return(0,s.jsx)(Z,{node:t,hasPrevious:r,hasNext:l,editorFocused:c,editorKey:d.field(a.A),editorMode:m,editorSettings:d.field(o.i),editors:u,dirty:n,dispatch:h,editorReadonly:d.readOnly})}},78047:function(e,t,n){n.d(t,{Q:function(){return u}});var s=n(85893),r=n(67294),l=n(79384),a=n(69872),i=n(38620),o=n(83879),c=n(11974),d=n(31207);let u=r.forwardRef(function(e,t){let{node:n,dispatch:u,disabled:h,autoWidth:m=!1,className:p,style:f,source:x,onSubmit:g=()=>{},onFocus:b}=e,{id:v}=n,j=(0,d.u2)(n)||"",[y,V]=(0,r.useState)(j),[w,C]=(0,r.useState)(!1),k=y!==j,N=!w&&""!==y&&k,L="cell ".concat(n.id);function M(e){return(!y||!!(0,d.r1)(y))&&(u({type:"setName",name:y,id:v,source:x,replaceReferences:e}),!0)}return(0,r.useEffect)(()=>V(j),[j]),(0,s.jsxs)("div",{className:"relative flex items-stretch",children:[(0,s.jsx)(l.Z,{value:y,"data-cy":"cell-name-input-".concat(x),spellCheck:"false",autoCorrect:"off",autoCapitalize:"none",disabled:h,className:p,style:{paddingRight:k?20:8,color:!y||(0,d.r1)(y)?void 0:"var(--red)",font:"var(--monospace-font)",textOverflow:"ellipsis",maxWidth:200,minWidth:75,width:m?"calc(".concat(k?16:0,"px + (").concat((y||L).length," * 8.5px) + (2 * var(--spacing-small)))"):(null==f?void 0:f.minWidth)||75,...f},minimal:!0,maxLength:65536,placeholder:L,large:!1,onChange:e=>V(e.target.value.replace(/\s/g,"")),onBlur:async()=>{if(await Promise.resolve(),!M(!1))return V(j)},onKeyDown:e=>{if(C(!!e.altKey),("Enter"===e.key||("s"===e.key||"\xdf"===e.key)&&e[o.Ao]&&!e.shiftKey)&&M(!e.altKey)){if(e.preventDefault(),e.shiftKey||"s"===e.key||"\xdf"===e.key)return e.stopPropagation();g()}},onKeyUp:e=>{e.altKey||C(!1)},onFocus:b,ref:t}),k?(0,s.jsx)("button",{title:"Rename cell and replace references ".concat((0,c.Z)("Enter"),"\nRename cell ").concat((0,c.Z)("Alt-Enter")),suppressHydrationWarning:!0,className:"absolute top-0 right-0 h-100 bg-transparent bn ph1 blue hover-dark-blue flex items-center pointer squishy",onMouseDown:()=>u({type:"setName",name:y,id:v,source:"nodeToolbar",replaceReferences:N}),children:N?(0,s.jsx)(a.E,{}):(0,s.jsx)(i.x,{})}):null]})})},29501:function(e,t,n){n.d(t,{i:function(){return eN}});var s=n(85893),r=n(94184),l=n.n(r),a=n(67294),i=n(40645),o=n.n(i),c=n(6032),d=n(27522),u=n(64063),h=n.n(u),m=n(9231),p=n(1984);let f=e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:[(0,s.jsx)("rect",{x:"3",y:"5",width:"10",height:"2",rx:"0.5",fill:"currentColor"}),(0,s.jsx)("path",{d:"M9 3.5C9 3.22386 9.22386 3 9.5 3H10.5C10.7761 3 11 3.22386 11 3.5V12.5C11 12.7761 10.7761 13 10.5 13H9.5C9.22386 13 9 12.7761 9 12.5V3.5Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M5 3.5C5 3.22386 5.22386 3 5.5 3H6.5C6.77614 3 7 3.22386 7 3.5V12.5C7 12.7761 6.77614 13 6.5 13H5.5C5.22386 13 5 12.7761 5 12.5V3.5Z",fill:"currentColor"}),(0,s.jsx)("rect",{x:"3",y:"9",width:"10",height:"2",rx:"0.5",fill:"currentColor"})]}),x=e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 5C4 3.89543 4.89543 3 6 3H10C11.1046 3 12 3.89543 12 5V6.27924C12 7.1401 11.4491 7.90438 10.6325 8.17661L9 8.72076V10H7V8.72076C7 7.8599 7.55086 7.09562 8.36754 6.82339L10 6.27924V5H6V6H4V5Z",fill:"currentColor"}),(0,s.jsx)("rect",{x:"7",y:"11",width:"2",height:"2",rx:"0.5",fill:"currentColor"})]});var g=e=>(0,s.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 4.70711C4 3.7643 4.7643 3 5.70711 3H10C11.1046 3 12 3.89543 12 5V6H10V5H6.41421L8 6.58579C8.78105 7.36683 8.78105 8.63316 8 9.41421L6.41421 11H10V10H12V11C12 12.1046 11.1046 13 10 13H5.70711C4.7643 13 4 12.2357 4 11.2929C4 10.8401 4.17986 10.4059 4.5 10.0858L6.58579 8L4.5 5.91421C4.17986 5.59407 4 5.15986 4 4.70711Z",fill:"currentColor"})}),b=n(46582),v=n(85293),j=n(94878),y=n(89604),V=n(88577),w=n(85049),C=n(21482),k=n(33888);let N={x:{name:"X",title:"Horizontal encoding"},y:{name:"Y",title:"Vertical encoding"},color:{name:"Color",title:"Color and series encoding"},size:{name:"Size",title:"Size encoding for dot marks"},fx:{name:"Facet X",title:"Horizontal facet encoding"},fy:{name:"Facet Y",title:"Vertical facet encoding"},mark:{name:"Mark",title:"Override for automatic mark selection"}},L=["#9d5bf3","#ff57f6","#ff77a7","#ffc850","#ffff53","#adff7f","#39ffc9","#2bffff","#65a7ff","#6e40aa","#c83dac","#ff5375","#ff8c38","#c9d33a","#79f659","#28ea8d","#1eb8d0","#4775de","#4d2d77","#8c2b78","#b33a52","#b36227","#8d9429","#55ac3e","#1ca463","#158192","#32529b","#000000","#666666","#cccccc","#ffffff"],M=["x","y","color","size"];function Z(e){let{x:t,y:n,color:s,size:r}=e;if(t.reduce&&n.reduce);else if(t.reduce)return["y"];else if(n.reduce)return["x"];else if(s.reduce||r.reduce)return["x","y"];return[]}let H=()=>(0,s.jsx)("div",{className:"bb b--light-gray ma0 mb1"}),S=e=>{let{show:t}=e;return t?(0,s.jsx)(p.Z,{className:"mr1"}):(0,s.jsx)("div",{style:{width:12},className:"mr1"})},R=e=>{let{value:t,specValue:n,options:r,label:l,allowNull:a}=e;return(0,s.jsxs)(v.uf,{style:{padding:"4px 0",margin:0},children:[(0,s.jsx)("div",{className:"gray f7 ph12 mb2 mt1",children:l}),(0,s.jsx)(H,{}),a&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.wt,{value:"__null",className:"flex items-center justify-between ph12",children:(0,s.jsxs)("span",{className:"flex items-center flex-auto",children:[(0,s.jsx)(S,{show:"__null"===t}),"—"]})},"__null"),(0,s.jsx)(H,{})]}),(0,s.jsx)(v.wt,{value:"__undefined",className:"flex items-center justify-between ph12",children:(0,s.jsxs)("span",{className:"flex items-center flex-auto justify-between",children:[(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)(S,{show:"__undefined"===t}),"Auto"]}),"__undefined"===t&&(0,s.jsx)("span",{className:"gray",children:n||"—"})]})},"__undefined"),(0,s.jsx)(H,{}),r.map(e=>(0,s.jsxs)(v.wt,{value:e,className:"flex items-center ph12",children:[(0,s.jsx)(S,{show:e===t}),(0,s.jsx)("span",{className:"truncate",children:e})]},"".concat(e)))]})},E=e=>{let{options:t,onChange:n,value:r,chartSpec:a,focusedOrSelected:i}=e;r=null===r?"__null":void 0===r?"__undefined":r;let o=null==a?void 0:a.mark;return(0,s.jsxs)(v.vz,{onChange:n,value:r,className:l()("flex-auto bn br2 br--left chart-input","__undefined"===r?i?"bg-observable-focus-light-blue":"bg-light-silver":"bg-white"),style:{overflow:"visible"},children:[(0,s.jsxs)(v.Y4,{className:"flex items-center justify-between f6 fw5 br2 br--left",style:{margin:0},children:[(0,s.jsx)("div",{className:l()("flex items-stretch pl2","__undefined"===r?"mid-gray":""),children:"__undefined"===r?"Auto".concat(o?": ".concat(o):""):"__null"===r?"—":r}),(0,s.jsx)(v.r9,{className:"inline-flex items-center pr2",children:(0,s.jsx)(m.Z,{})})]}),(0,s.jsx)(v.jI,{style:{maxHeight:"400px",overflowY:"scroll"},children:(0,s.jsx)(R,{value:r,specValue:o,options:t,label:"Mark",allowNull:!1})})]})},_=e=>{let{channel:t,options:n,onChange:r,value:a,chartSpec:i}=e;a=null===a?"__null":void 0===a?"__undefined":a;let o=i?i[t].reduce:void 0,c=i&&Z(i).map(e=>i[e].value||e).join(" and "),d=c&&o?"count"===o?"Count by ".concat(c):"".concat(o[0].toUpperCase()+o.slice(1)," of ").concat(i[t].value||"–"," by ").concat(c):void 0;return(0,s.jsxs)(v.vz,{onChange:r,value:a,className:"bn br2 chart-input",style:{overflow:"visible",color:"inherit"},title:d,children:[(0,s.jsxs)(v.Y4,{className:l()("br2 flex items-center justify-between f7 fw5","__undefined"===a?"o-50":""),style:{margin:0},children:[(0,s.jsx)(g,{className:"mr1"}),("__undefined"!==a||o)&&(0,s.jsx)("div",{className:"flex items-stretch pr2 lh-solid",children:"__undefined"===a?o?"Auto: ".concat(o):"":"__null"===a?"—":a}),(0,s.jsx)(v.r9,{className:"inline-flex items-center pr2",children:(0,s.jsx)(m.Z,{})})]}),(0,s.jsx)(v.jI,{style:{maxHeight:"400px",overflowY:"scroll",minWidth:180},children:(0,s.jsx)(R,{value:a,specValue:o,options:n,label:"Reducer",allowNull:!0})})]})},F={number:f,integer:f,bigint:f,string:e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:[(0,s.jsx)("path",{d:"M13 4C13 3.44772 12.5523 3 12 3H10C9.44772 3 9 3.44772 9 4V7C9 7.55228 9.44772 8 10 8H13V4Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M7 4C7 3.44772 6.55228 3 6 3H4C3.44772 3 3 3.44772 3 4V7C3 7.55228 3.44772 8 4 8H7V4Z",fill:"currentColor"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.00001 8H7.00001V9C7.00001 9.8692 6.85308 10.6012 6.37625 11.2687C5.94256 11.8759 5.28996 12.3419 4.55471 12.8321L3.44531 11.168C4.21007 10.6581 4.55747 10.3741 4.74878 10.1063C4.89694 9.89883 5.00001 9.63081 5.00001 9V8Z",fill:"currentColor"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 8H13V9C13 9.8692 12.8531 10.6012 12.3762 11.2687C11.9426 11.8759 11.29 12.3419 10.5547 12.8321L9.44531 11.168C10.2101 10.6581 10.5575 10.3741 10.7488 10.1063C10.8969 9.89883 11 9.63081 11 9V8Z",fill:"currentColor"})]}),boolean:e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.1652 3.00672C11.1107 3.00227 11.0556 3 11 3H5C3.89543 3 3 3.89543 3 5V11C3 12.1046 3.89543 13 5 13H11C12.1046 13 13 12.1046 13 11V6.82873L11 8.82873V11H5L5 5H9.17188L11.1652 3.00672Z",fill:"currentColor"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.7071 4.70711L8.00001 10.4142L5.29291 7.70711L6.70712 6.29289L8.00001 7.58579L12.2929 3.29289L13.7071 4.70711Z",fill:"currentColor"})]}),date:e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:[(0,s.jsx)("circle",{cx:"8",cy:"8",r:"5",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 3H9V7.58579L10.7071 9.29289L9.29289 10.7071L7 8.41421V3Z",fill:"currentColor"})]}),object:e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.99997 4.5C2.99997 3.67157 3.67154 3 4.49997 3H6.99997V5H4.99997V5.76393C4.99997 6.07442 4.92768 6.38065 4.78883 6.65836L3.50018 8L4.78883 9.34164C4.92768 9.61935 4.99997 9.92558 4.99997 10.2361V11H6.99997V13H4.49997C3.67154 13 2.99997 12.3284 2.99997 11.5V10.2361L2.16145 8.55902C1.98549 8.20711 1.98549 7.79289 2.16145 7.44098L2.99997 5.76393V4.5Z",fill:"currentColor"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13 4.5C13 3.67157 12.3285 3 11.5 3H9.00003V5H11V5.76393C11 6.07442 11.0723 6.38065 11.2112 6.65836L12.4998 8L11.2112 9.34164C11.0723 9.61935 11 9.92558 11 10.2361V11H9.00003V13H11.5C12.3285 13 13 12.3284 13 11.5V10.2361L13.8386 8.55902C14.0145 8.20711 14.0145 7.79289 13.8386 7.44098L13 5.76393V4.5Z",fill:"currentColor"})]}),buffer:e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 5H5L5 11H6V5ZM5 3C3.89543 3 3 3.89543 3 5V11C3 12.1046 3.89543 13 5 13H6C7.10457 13 8 12.1046 8 11V5C8 3.89543 7.10457 3 6 3H5Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M10.374 3.08397C10.4562 3.02922 10.5527 3 10.6514 3H11.5C11.7761 3 12 3.22386 12 3.5V11H12.5C12.7761 11 13 11.2239 13 11.5V12.5C13 12.7761 12.7761 13 12.5 13H9.5C9.22386 13 9 12.7761 9 12.5V11.5C9 11.2239 9.22386 11 9.5 11H10V6H9.5C9.22386 6 9 5.77614 9 5.5V4.26759C9 4.10042 9.08355 3.9443 9.22265 3.85157L10.374 3.08397Z",fill:"currentColor"})]}),array:e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 5C3 3.89543 3.89543 3 5 3H7V5H5V11H7V13H5C3.89543 13 3 12.1046 3 11V5Z",fill:"currentColor"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 5H9V3H11C12.1046 3 13 3.89543 13 5V11C13 12.1046 12.1046 13 11 13H9V11H11V5Z",fill:"currentColor"})]})},D=e=>{let{data:t,channel:n,value:r,dispatch:l,setIsExpanded:i}=e,o=(0,y.Nq)(t,l),{isExpanded:c}=(0,d.kR)();return(0,a.useEffect)(()=>i(c),[c,i]),(0,s.jsxs)(v.uf,{style:{padding:"4px 0",margin:0},children:[(0,s.jsx)("div",{className:"gray f7 ph12 mb2 mt1",children:"Field"}),(0,s.jsx)(H,{}),(0,s.jsx)(v.wt,{value:"__undefined",className:"flex items-center justify-between ph12",children:(0,s.jsxs)("span",{className:"flex items-center flex-auto",children:[(0,s.jsx)(S,{show:"undefined"===r.type}),"—"]})},"__undefined"),(0,s.jsx)(H,{}),o?[...o].map(e=>{var t;let[n,{type:l}]=e,a=null!==(t=F[l])&&void 0!==t?t:x;return(0,s.jsxs)(v.wt,{value:n,className:"flex items-center ph12",children:[(0,s.jsx)(S,{show:n===r.value}),(0,s.jsx)(a,{className:"moon-gray mr1 flex-shrink-0"}),(0,s.jsx)("span",{className:"truncate",children:n})]},"".concat(n))}):null,"color"===n?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"bb b--light-gray ma0 mb2"}),(0,s.jsx)("div",{className:"ph12 pt1 flex flex-wrap mb2",style:{gap:3.7},children:L.map(e=>(0,s.jsx)(v.wt,{className:"w1 h1 db ba br2 color-option",value:"__".concat(e),style:{margin:0,background:e,borderColor:"constant"===r.type&&r.value===e?"black":"rgba(0,0,0,0.3)"}},e))})]}):null]})},I=e=>{var t;let{id:n,data:r,channel:i,value:o,dispatch:c,focused:d,selected:u}=e,[p,f]=(0,a.useState)("other"),[g,b]=(0,a.useState)(!1),y=(0,a.useRef)(null),w=C.mc.defaultNode.data.config;function k(e){var t;let s=(0,V.VQ)(r);if(!s)return;let l=new j.n4(s,"","chart"),a=null!==(t=o.value)&&void 0!==t?t:"";l.run(c).then(t=>{let s=Array.from(t.keys()),r=s.indexOf(a),l=-1;if(0===r&&"prev"===e||r===s.length-1&&"next"===e){c({type:"setChartConfig",id:n,config:{[i]:C.pG},source:"arrow"});return}if("undefined"===o.type?("prev"===e&&(l=s.length-1),"next"===e&&(l=0)):("prev"===e&&(l=r-1),"next"===e&&(l=r+1)),void 0===s[l]){console.error("index ".concat(l," does not exist"));return}let d=t.get(s[l]);d&&f(d.type),c({type:"setChartConfig",id:n,config:{[i]:{type:"field",value:s[l],...o.reduce&&{reduce:o.reduce}}},source:"arrow"})},e=>{console.error("Error fetching chart schema: ",e)})}(0,a.useEffect)(()=>{y.current&&d&&"x"===i&&h()(r.config,w)&&y.current.focus()},[i,r,d,w]),(0,a.useEffect)(()=>{let e=(0,V.VQ)(r);if(!e)return;let t=new j.n4(e,"","chart");o.value&&t.run(c).then(e=>{if(o.value){let t=e.get(o.value);t&&t.type!==p&&f(t.type)}},e=>{console.error("Error fetching chart schema: ",e)})},[o,i,r,c,p,f]);let N=null!==(t=F[p])&&void 0!==t?t:x;return(0,s.jsxs)(v.vz,{onKeyDown:e=>{if(!g)switch(e.key){case"ArrowLeft":k("prev");break;case"ArrowRight":k("next");break;case"Backspace":case"Delete":c({type:"setChartConfig",id:n,config:{[i]:C.pG},source:"clear"})}},onChange:e=>{c({type:"setChartConfig",id:n,config:{[i]:"__undefined"===e?C.pG:"__"===e.slice(0,2)?{type:"constant",value:e.slice(2)}:{type:"field",value:e,...void 0!==o.reduce&&{reduce:o.reduce}}},source:"dropdown"})},value:"undefined"!==o.type?"".concat(o.value):"__undefined",disabled:!o,className:l()("flex-auto bn br2 br--left",void 0===o.value?d||u?"bg-observable-focus-light-blue":"bg-light-silver":"bg-white","chart-input field-selector"),style:{overflow:"visible"},children:[(0,s.jsxs)(v.Y4,{className:"br2 br--left flex items-center justify-between f6 fw5",style:{margin:0},ref:y,title:"Arrow ←/→ to cycle; delete to clear",children:[(0,s.jsxs)("div",{className:"flex items-center truncate",children:["undefined"!==o.type&&(0,s.jsx)(N,{className:"moon-gray mh1 db flex-shrink-0"}),"undefined"===o.type?(0,s.jsx)("div",{className:"pl2 mid-gray",children:"—"}):(0,s.jsx)("div",{className:"truncate",children:o.value})]}),(0,s.jsx)(v.r9,{className:"inline-flex items-center pr2",children:(0,s.jsx)(m.Z,{})})]}),(0,s.jsx)(v.jI,{style:{maxHeight:"400px",overflowY:"scroll"},children:(0,s.jsx)(D,{data:r,channel:i,value:o,dispatch:c,setIsExpanded:b})})]})},P=e=>{let{id:t,data:n,channel:r,value:a,chartSpec:i,focused:o,selected:d,dispatch:u}=e,m=h()(a,{type:"undefined"}),{name:p,title:f}=N[r],x=i&&Z(i).includes(r),g=M.includes(r),v=("x"===r||"y"===r)&&!n.config.x.value&&!n.config.y.value;return(0,s.jsxs)("div",{className:"ma2",children:[(0,s.jsxs)("div",{className:"mb1 pl1 flex justify-between items-center",style:{paddingRight:23},children:[(0,s.jsxs)("div",{className:"ph1 fw4 f7",title:v?"Set x or y to see chart":f+(x?" (grouped)":""),children:[p,v?"*":""]}),g&&(0,s.jsx)(_,{channel:r,options:c.ns,value:a.reduce,chartSpec:i,onChange:e=>{u({type:"setChartConfig",id:t,config:{[r]:"__undefined"===e?{type:a.type,...void 0!==a.value&&{value:a.value}}:"__null"===e?{type:a.type,value:a.value,reduce:null}:{type:"constant"===a.type?"undefined":a.type,value:"constant"===a.type?void 0:a.value,reduce:e}},source:"dropdown"})}})]}),(0,s.jsxs)("div",{className:"flex items-stretch",style:{gap:1},children:["mark"===r?(0,s.jsx)(E,{options:c.Vv,value:a.value,chartSpec:i,onChange:e=>{u({type:"setChartConfig",id:t,config:{[r]:"__undefined"===e?{type:"undefined"}:{type:"constant",value:e}},source:"dropdown"})},focusedOrSelected:o||d}):(0,s.jsx)(I,{id:t,data:n,channel:r,value:a,dispatch:u,focused:o,selected:d}),(0,s.jsx)("button",{className:l()("br2 br--right chart-button flex-shrink-0 flex items-center justify-center pa0 bn",m?o||d?"bg-observable-focus-light-blue":"bg-light-silver":"pointer bg-white"),style:{width:22},disabled:m,onClick:()=>{u({type:"setChartConfig",id:t,config:{[r]:C.pG},source:"clear"})},title:"Clear",children:(0,s.jsx)(b.Z,{className:m?"o-40":""})})]})]},r)},A=e=>{let{node:t,dispatch:n,hovered:r,focused:a,selected:i}=e,{id:d,data:u}=t,{...h}=u.config,m=u.source,{chartSpec:p}=(0,k.v9)(e=>{var t;let{notebook:n}=e;return{chartSpec:null===(t=n.workerStatus.get(d))||void 0===t?void 0:t.chartSpec}});return m.name?(0,s.jsxs)("div",{style:{margin:"0 -14px",padding:"0 2px 5px 2px",minHeight:w.T6,borderBottomLeftRadius:a||r?0:void 0},className:"jsx-f939d1f466b891fe "+(l()("br2 br--bottom",a||i?"bg-observable-focus-lightest-blue observable-focus-darker-blue":"bg-near-white mid-gray")||""),children:[(0,s.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(100%, ".concat(400,"px), auto))"),boxSizing:"border-box"},className:"jsx-f939d1f466b891fe",children:(function(e,t){let n=[];for(let t=0,s=e.length;t<s;t+=2)n.push(e.slice(t,t+2));return n})(c.CH,0).map((e,t)=>(0,s.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(".concat(200,"px, 1fr))")},className:"jsx-f939d1f466b891fe",children:[e.map(e=>(0,s.jsx)(P,{id:d,data:u,focused:a,selected:i,channel:e,value:h[e]||C.pG,chartSpec:p,dispatch:n},e)),1===e.length&&(0,s.jsx)("div",{className:"jsx-f939d1f466b891fe"})]},t))}),(0,s.jsx)(o(),{id:"f939d1f466b891fe",children:".chart-button:focus{outline:1px solid var(--blue)}.chart-input span:focus{outline:1px solid var(--blue)}.color-option[data-current-nav]{border-color:white!important;outline:1px solid var(--mid-gray)}"})]}):null};var T=n(83281),B=n(15850),z=n(18527),O=n(76480),W=n(13370);let q=e=>{var t,n,r,i;let{node:o,dispatch:c,hovered:d,focused:u,selected:h,setOperations:m,operations:p,columnsFlash:f,setColumnsFlash:x}=e,{id:g}=o,b=(null!==(r=null===(t=p.filter)||void 0===t?void 0:t.length)&&void 0!==r?r:0)+(null!==(i=null===(n=p.sort)||void 0===n?void 0:n.length)&&void 0!==i?i:0),[v,j]=(0,a.useState)(!1),[y,V]=(0,a.useState)(!1),C=(0,W.GS)(W.ro);return(0,s.jsxs)("div",{className:l()("flex items-stretch flex-wrap br2 br--bottom",u||h?"bg-observable-focus-lightest-blue":"bg-near-white"),style:{margin:"0 -14px",padding:"4px 6px",rowGap:2,minHeight:w.T6,borderBottomLeftRadius:u||d?0:void 0},children:[(0,s.jsx)(B.w,{id:g,flash:v,setFlash:j,mobile:C}),(0,s.jsx)(T.o,{id:g,flash:f,setFlash:x,mobile:C}),(0,s.jsx)(O.PE,{id:g,flash:y,setFlash:V,mobile:C}),(0,s.jsx)(z.p2,{id:g,mobile:C}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{onClick:function(){c({type:"setDataOperations",id:g,operations:{sort:function(){let e=p.sort?[...p.sort]:[],t=[...o.data.operations.sort];return e.length>0&&o.data.operations.sort.length>0&&(t=o.data.operations.sort.filter(t=>e[0].column!==t.column)),[...e,...t]}(),filter:function(){let e=p.filter?[...p.filter]:[],t=[...o.data.operations.filter];return e.length>0&&o.data.operations.filter.length>0&&(t=o.data.operations.filter.filter(t=>e.find(e=>{let{type:n,operands:s}=e;return s[0].value===t.operands[0].value&&n===t.type})?null:t)),[...e,...t]}()},source:"table"}),p.filter&&j(!0),p.sort&&V(!0),m({filter:void 0,sort:void 0})},className:l()("bn br2 f6 fw6 pv1 ph2 ml2 pointer",b>0?"bg-blue white":"bg-white moon-gray"),children:"Save"})})]})};var U=n(6687),G=n(60938),Y=n(88094),K=e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:[(0,s.jsx)("line",{x1:"12",y1:"11",x2:"12",y2:"15",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("line",{x1:"4",y1:"9",x2:"4",y2:"15",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("circle",{cx:"12",cy:"9",r:"2",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("circle",{cx:"4",cy:"7",r:"2",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("line",{x1:"12",y1:"1",x2:"12",y2:"7",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("line",{x1:"4",y1:"1",x2:"4",y2:"5",stroke:"currentColor",strokeWidth:"2"})]}),X=n(23585);let $=e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:[(0,s.jsx)("rect",{x:"3",y:"10",width:"9",height:"2",fill:"currentColor"}),(0,s.jsx)("rect",{x:"4",y:"4",width:"9",height:"2",fill:"currentColor"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.7071 7.29289L14.4142 11L10.7071 14.7071L9.29291 13.2929L11.5858 11L9.29291 8.70711L10.7071 7.29289Z",fill:"currentColor"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.29288 1.29289L1.58577 5L5.29288 8.70711L6.70709 7.29289L4.4142 5L6.70709 2.70711L5.29288 1.29289Z",fill:"currentColor"})]});var J=n(62814);let Q=e=>{let{node:t,dispatch:n,focused:r,selected:a}=e,{id:i,data:o}=t,c=o.source,d=(0,W.GS)(W.ro),u=(0,W.GS)(W.Mo),m=C.mc.defaultNode.data.config,p=h()(o.config,m),f="undefined"===o.config.x.type&&"undefined"===o.config.y.type,x=[{title:"Clear Chart Selections",label:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(b.Z,{className:"pr1"}),!u&&"Clear All"]}),onClick:()=>{n({id:t.id,type:"setChartConfig",config:null,source:"clearAll"})},disabled:p},{title:"Swap X and Y Dimensions",label:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)($,{className:"pr1"}),!u&&"Swap X/Y"]}),onClick:()=>{n({type:"setChartConfig",id:i,config:{x:o.config.y,y:o.config.x},source:"swap"})},disabled:f},{title:"Customize",label:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(K,{className:"pr1"}),!u&&"Customize"]}),children:(0,s.jsx)(Y.l,{id:i,data:o,dispatch:n}),onClick:d?()=>{n({type:"showModal",modal:"chartCustomize",modalProps:{id:i}})}:()=>{},disabled:!1}];return c.name?d?(0,s.jsx)("div",{className:"flex align-items pr1",children:(0,s.jsx)(J.v2,{children:e=>{let{isExpanded:t}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(J.j2,{className:l()("bn pointer",t?"bg-observable-focus-light-blue br2":"bg-transparent"),children:(0,s.jsx)(X.v,{className:l()("flex align-items hover-black",t?"black":"dark-gray")})}),(0,s.jsx)(J.qy,{position:J.Ly.bottomLeft,children:x.map(e=>{let{title:t,label:n,onClick:r,disabled:l}=e;return(0,s.jsx)("div",{children:(0,s.jsx)(J.sN,{onSelect:r,disabled:l,title:t,className:"flex items-center f7 fw6",children:n})},t)})})]})}})}):(0,s.jsx)("div",{className:"flex items-center",style:{maxHeight:w.T6-4},children:x.map(e=>{let{title:t,label:n,onClick:i,disabled:o,children:c}=e;return(0,s.jsx)("div",{children:(0,s.jsxs)(J.v2,{children:[(0,s.jsx)(J.j2,{onClick:i,disabled:o,title:t,className:l()("flex items-center bg-transparent bn f7 fw6 ph1",u?"mr2":"mr3",o?"moon-gray":"pointer hover-black",r||a?"dark-gray":"mid-gray",{"pointer hover-black pa0 ma0":"Customize"===t}),children:n}),c]})},t)})}):null};var ee=n(18701),et=n(41978),en=n(78047),es=n(82149),er=n(26596),el=n(11974),ea=n(8273);let ei=e=>{let{node:t,editorState:n,hovered:r,focusedFromEditor:i}=e,{id:o,mode:c,value:d}=t,u=d.length!==n.doc.length||d!==n.doc.toString(),{focused:h,selectionFocused:m,pending:p,readonly:f,hasTable:x}=(0,k.v9)(e=>{var t,n;let{notebook:s}=e;return{owner:s.owner,roles:s.roles,focused:s.focusId===o,selectionFocused:s.selectionFocusId===o||s.selection.has(o),pending:(null===(t=s.workerStatus.get(o))||void 0===t?void 0:t.status)==="pending",readonly:(0,ea.os)(s),hasTable:!!(null===(n=s.heights.get(o))||void 0===n?void 0:n.display)}}),g=(0,k.I0)(),b=(0,a.useRef)(null);return(0,a.useEffect)(()=>{if("table"===c&&h&&!i){var e;null===(e=b.current)||void 0===e||e.focus()}},[c,h,i]),(0,s.jsxs)("div",{className:l()("pea flex justify-between items-stretch br2 bb b--white br--top",h||m?"bg-observable-focus-lightest-blue":"bg-near-white"),style:{borderTopLeftRadius:x||h||m||r?0:void 0,borderTopRightRadius:x?0:void 0,borderBottomLeftRadius:"table"===c&&(h||m||r)?0:void 0,margin:"0 -14px",padding:"table"===c?"4px 0":"2px 0",height:w.T6+("table"===c?5:1)},children:[(0,s.jsxs)("div",{className:"flex items-stretch",children:[(0,s.jsx)(en.Q,{node:t,dispatch:g,source:"nodeEditor",autoWidth:!0,className:"bg-transparent",style:{marginLeft:6,boxShadow:"none"},onFocus:h?void 0:e=>{g({type:"focus",id:o}),e.target.focus()},disabled:f,ref:b}),(0,s.jsx)(es.aN,{node:t})]}),(0,s.jsxs)("div",{className:"flex",children:["chart"===c&&(0,s.jsx)(Q,{node:t,dispatch:g,focused:h,selected:m}),(0,s.jsx)("button",{title:"Run cell ".concat((0,el.Z)("Shift-Enter")),suppressHydrationWarning:!0,className:l()("bg-transparent bn br2 f6 fw5 flex items-center pointer squishy pr2",u?"blue hover-dark-blue":h||m?"observable-focus-dark-blue hover-blue":"moon-gray hover-mid-gray"),onMouseDown:er.PF,onClick:()=>g({type:"commit",id:o,trigger:"click",source:"nodeEditor"}),children:p?(0,s.jsx)(ee.Z,{}):u?(0,s.jsx)(et.s,{}):(0,s.jsx)(et.Z,{})})]})]})};var eo=n(12300),ec=n(49611),ed=n(7564);let eu=e=>{let{node:{id:t,data:{source:n}},dispatch:s}=e,r=(0,a.useRef)();return(0,a.useEffect)(()=>{if(null===n.name){r.current=void 0,s({type:"sqlDialectUpdated",id:t,dialect:"sql"});return}let e=new j.YG(n);r.current=e,e.run(s).then(n=>{let{dialect:l}=n;e===r.current&&s({type:"sqlDialectUpdated",id:t,dialect:l=(0,V.h8)(l)})},()=>{e===r.current&&s({type:"sqlDialectUpdated",id:t,dialect:"sql"})})},[s,t,n]),null};var eh=n(73935),em=n(39567),ep=n(68059),ef=e=>(0,s.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:(0,s.jsx)("path",{d:"M9.25 5L6.75 8L9.25 11",stroke:"currentColor",strokeWidth:"2"})}),ex=n(6916),eg=n(5152);let eb=n.n(eg)()(()=>Promise.all([n.e(7381),n.e(8013)]).then(n.bind(n,78013)),{loadableGenerated:{webpack:()=>[78013]}}),ev=e=>{var t;let{node:n,editors:r}=e,{signatureHelpData:l,signatureHelpNodeId:i}=(0,k.v9)(e=>{let{notebook:t}=e;return{signatureHelpData:t.signatureHelpData,signatureHelpNodeId:t.signatureHelpNodeId}}),c=null==l?void 0:l.selectedItemIndex,[d,u]=(0,a.useState)(null!=c?c:0),h=()=>r.repositionTooltips(n.id);if((0,a.useEffect)(h),(0,a.useEffect)(()=>{void 0!==c&&u(c)},[c,u]),!(null==l?void 0:l.items.length)||i!==n.id||d>=l.items.length)return null;let m=l.items[d];return(0,s.jsxs)("div",{style:{maxHeight:270,fontSize:"0.8125rem"},className:"jsx-208ac902b607ba5c dark-gray bg-white ba b--silver br2 shadow-4 overflow-y-auto",children:[(0,s.jsxs)("div",{className:"jsx-208ac902b607ba5c lh-copy mw6",children:[(0,s.jsx)(ej,{item:m,argumentIndex:null!==(t=l.argumentIndex)&&void 0!==t?t:0,onReady:h}),l.items.length>1?(0,s.jsxs)("div",{onMouseDown:er.PF,className:"jsx-208ac902b607ba5c bt b--moon-gray pv2 pl2 pr3 flex items-center",children:[(0,s.jsx)(ep.hU,{style:{padding:2},disabled:d<=0,"aria-label":"Previous overload",onClick:()=>u(d-1),icon:ef}),(0,s.jsx)("span",{className:"jsx-208ac902b607ba5c mh1 tabular-nums b",children:d+1})," /",(0,s.jsx)("span",{className:"jsx-208ac902b607ba5c mh1 tabular-nums b",children:l.items.length}),(0,s.jsx)("span",{className:"jsx-208ac902b607ba5c ml1",children:"overloads"}),(0,s.jsx)(ep.hU,{style:{padding:2},disabled:d>=l.items.length-1,"aria-label":"Next overload",onClick:()=>u(d+1),icon:ex.Z})]}):null]}),(0,s.jsx)(o(),{id:"208ac902b607ba5c",children:".tabular-nums.jsx-208ac902b607ba5c{font-variant-numeric:tabular-nums}"})]})},ej=e=>{let{item:{prefixDisplayParts:t,parameters:n,suffixDisplayParts:r,documentation:l,tags:i},argumentIndex:o,onReady:c}=e;i=i.filter(e=>"param"!==e.name&&"returns"!==e.name);let d=n.length&&n.length>o?n[o].documentation:[];return d.length||l.length||c(),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"f7 code pv2 ph3 mt1",children:[(0,s.jsx)(ey,{parts:t}),n.map((e,t)=>(0,s.jsxs)(a.Fragment,{children:[t>0?(0,s.jsx)("span",{children:", "}):null,(0,s.jsx)("span",{className:o===t?"b blue":"",children:(0,s.jsx)(ey,{parts:e.displayParts})})]},t)),(0,s.jsx)(ey,{parts:r})]}),d.length?(0,s.jsx)("div",{className:"bt b--silver ph3",children:d.map((e,t)=>(0,s.jsx)(eb,{onReady:c,children:e.text},t))}):null,l.length?(0,s.jsx)("div",{className:"bt b--silver ph3",children:l.map((e,t)=>(0,s.jsx)(eb,{onReady:c,children:e.text},t))}):null,i.length?(0,s.jsx)("div",{className:"bt b--silver pv2 ph3",children:i.map((e,t)=>{var n;return(0,s.jsx)("div",{className:t<i.length-1?"pb1":"",children:e.text?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:["@",e.name]}),"link"===e.name?(0,s.jsx)("a",{rel:"ugc nofollow noreferrer",href:(0,em.A)(null===(n=e.text[0])||void 0===n?void 0:n.text),children:(0,s.jsx)(ey,{parts:e.text})}):(0,s.jsx)("div",{className:"example"===e.name?"code":"",children:(0,s.jsx)(ey,{parts:e.text})})]}):null},"tag-".concat(t))})}):null]})},ey=e=>{let{parts:t,boldIndex:n}=e;return(0,s.jsx)(s.Fragment,{children:t.map((e,t)=>(0,s.jsx)("span",{className:l()(e.kind,n===t?" b":""),children:e.text},t))})},eV=e=>{let{node:t,editors:n,container:r}=e;return(0,eh.createPortal)((0,s.jsx)(ev,{node:t,editors:n}),r)};var ew=n(83879),eC=n(96440);let ek=(0,n(13727).V)([[ew.Mq?"Alt-Tab":"Shift-Alt-ArrowDown",e=>{let{dispatch:t,id:n}=e;return t({type:"focusAfter",id:n}),!0}],[ew.Mq?"Shift-Alt-Tab":"Shift-Alt-ArrowUp",e=>{let{dispatch:t,id:n}=e;return t({type:"focusBefore",id:n}),!0}]]),eN=a.memo(function(e){let{node:t,editorState:n,assistFocused:r,focused:i,hovered:o,selected:c,hasPrevious:d,hasNext:u,editors:h,compareStyle:m,operations:p,setOperations:f,columnsFlash:x,setColumnsFlash:g}=e,{id:b,value:v,pinned:j}=t,y=n.field(U.A),V=n.field(G.C),N=(0,k.I0)(),L=(0,a.useRef)(null),M=(0,a.useRef)(null),[Z,H]=(0,a.useState)(!1),[S,R]=(0,a.useState)(!1),E=(0,W.GS)(W.ro),{hasOutput:_,pending:F}=(0,k.v9)(e=>{var t;let{notebook:n}=e;return{hasOutput:(0,eC.Gv)(n.heights.get(b))>0,pending:(null===(t=n.workerStatus.get(b))||void 0===t?void 0:t.status)==="pending"}}),D=v.length!==n.doc.length||v!==n.doc.toString();return(0,a.useEffect)(()=>(M.current=E?null:document.createElement("div"),h.attach(y,L.current,M.current),()=>h.detach(y)),[h,E,y]),(0,a.useEffect)(()=>{if(!i)return;let e=L.current;function t(){H(document.hasFocus())}function n(){H(e.contains(document.activeElement))}function s(){H(!1)}return e.addEventListener("focusin",t),e.addEventListener("focusout",s),addEventListener("focus",n),addEventListener("blur",s),H(document.hasFocus()&&e.contains(document.activeElement)),()=>{e.removeEventListener("focusin",t),e.removeEventListener("focusout",s),removeEventListener("focus",n),removeEventListener("blur",s),H(!1)}},[i]),(0,a.useEffect)(()=>{i||R(!1)},[i]),(0,s.jsxs)("div",{className:"relative pea",onKeyDown:function(e){(0,C.hN)(t)&&ek({dispatch:N,id:b},e)&&(e.preventDefault(),e.stopPropagation())},children:[M.current?(0,s.jsx)(eV,{node:t,editors:h,container:M.current}):null,"sql"===t.mode&&(0,s.jsx)(eu,{node:t,dispatch:N}),(0,s.jsxs)("div",{onClick:()=>{i||(R(!0),N({type:"focus",id:b}))},children:[(0,C.sO)(t)&&(0,s.jsx)(ei,{node:t,editorState:n,hovered:o,focusedFromEditor:S}),"table"===t.mode?(0,s.jsx)(q,{node:t,dispatch:N,hovered:o,focused:i,selected:c,operations:p,setOperations:f,columnsFlash:x,setColumnsFlash:g}):"chart"===t.mode?(0,s.jsx)(A,{node:t,dispatch:N,hovered:o,focused:i,selected:c}):null]}),(0,s.jsxs)("div",{ref:L,className:l()(o&&"node-hover",n.readOnly&&"node-readonly",i&&"node-focus",c&&"node-select",i||c||"add"!==m?"":" node-add","sql"===V&&"node-toolbar","relative",(0,C.hN)(t)&&"dn",r&&"node-assist"),children:[!("sql"===V||"table"===V)&&(0,s.jsx)("button",{title:"Run cell ".concat((0,el.Z)("Shift-Enter")),suppressHydrationWarning:!0,className:l()("flex items-center absolute top-0 bg-transparent bn br2 pointer squishy pr2",D?"blue hover-dark-blue":i||c?"observable-focus-dark-blue hover-blue":"moon-gray hover-mid-gray","dn-print"),onMouseDown:er.PF,onClick:()=>h.applyCommand(y,(0,ec.z)("click","nodeEditor")),style:{right:-14,height:w.T6},children:F?(0,s.jsx)(ee.Z,{}):D?(0,s.jsx)(et.s,{}):(0,s.jsx)(et.Z,{})}),i&&!n.readOnly&&(0,s.jsx)(ed.Z,{node:t,dirty:D,editorFocused:Z,editorState:n,editors:h,hasPrevious:d,hasNext:u,dispatch:N})]}),(o||i)&&_&&(0,s.jsx)("div",{className:"flex absolute moon-gray",style:{top:4,left:-55},children:(0,s.jsx)(eo.Z,{className:l()(n.readOnly?"":"pointer","squishy",j&&!n.readOnly?"blue":"hover-mid-gray"),role:"button","aria-label":j?"Unpin":"Pin",onMouseDown:er.PF,onClick:()=>n.readOnly?void 0:N({type:"togglePin",id:b}),style:{padding:"3px 0 2px 0"},children:(0,s.jsxs)("title",{suppressHydrationWarning:!0,children:[j?"Unpin":"Pin"," cell ",(0,el.Z)("Mod-.")]})})})]})})},53504:function(e,t,n){n.d(t,{a:function(){return tH}});var s=n(85893),r=n(94184),l=n.n(r),a=n(5152),i=n.n(a),o=n(67294),c=n(23181),d=n(97069),u=n(63650),h=n(97542),m=n(81027),p=n(91042),f=n(68059),x=n(23585),g=n(25915),b=n(36779),v=n(62814),j=n(59615),y=n(67534),V=n(91529),w=n(52332),C=n(8273),k=n(68098),N=n(33888);let L=e=>{let{dispatch:t,comment:n,first:r,repeated:a}=e,{showDelete:i,showReportAbuse:o,showUpdate:c}=(0,N.v9)(e=>{let{notebook:t,currentUser:s}=e;return{showDelete:(0,w.Ss)(n,s,t),showReportAbuse:s&&!(0,C.ws)(t),showUpdate:(0,w.O4)(n,s)}}),{create_time:d,update_time:L,content:M,user:Z}=n,H=(0,C.tO)(n)?"comment-local-".concat(n.nonce):"comment-".concat(n.id),S=i||c||o&&!(0,C.tO)(n);return(0,s.jsxs)("div",{id:H,"data-cy":"comment",className:l()("pv2 hide-child",r||a?"":"bt b--light-gray"),children:[(0,s.jsxs)("div",{className:"flex pb1 items-center justify-between lh-title",children:[(0,s.jsxs)("div",{className:"flex items-center min-w-0",children:[a?null:(0,s.jsxs)(b.Z,{href:(0,k.AW)(Z),className:"inline-flex truncate no-underline dark-gray hover-blue items-center mr2",children:[(0,s.jsx)(u.Yt,{user:{...Z,type:"individual"},size:24,className:"mr2 br-100"}),(0,s.jsx)("span",{className:"truncate fw5",children:(0,V.KY)(Z)})]}),(0,C.tO)(n)?null:(0,s.jsxs)("a",{className:"mid-gray no-underline nowrap",href:"#".concat(H),children:[(0,s.jsx)(p.q,{time:d}),L&&" (edited)"]})]}),(0,s.jsxs)(v.v2,{children:[(0,s.jsx)(f.hU,{title:"Comment actions",className:S?"":"o-0",colorless:!0,disabled:!S,icon:x.v,asMenuButton:!0}),(0,s.jsxs)(v.qy,{"data-testid":"comment-actions",style:{minWidth:105},children:[c&&(0,s.jsxs)(v.sN,{"data-cy":"update-comment","aria-label":"Update comment",onSelect:()=>{(0,C.tO)(n)||t({type:"updateCommentStatus",nodeId:n.node_id,status:"updateInitiated",commentId:n.id})},children:[(0,s.jsx)(h.Z,{className:"w1 mr2"}),"Edit"]}),i&&(0,s.jsxs)(v.sN,{"data-cy":"delete-comment","aria-label":"Delete comment",className:"hover-dark-red hover-bg-washed-red",disabled:!(0,y.id)(n),onSelect:()=>{t({type:"showModal",modal:"deleteComment",modalProps:{comment:n}})},children:[(0,s.jsx)(m.Z,{className:"w1 mr2"}),"Delete"]}),o&&!(0,C.tO)(n)&&(0,s.jsxs)(v.sN,{"data-cy":"report-comment","aria-label":"Report comment",style:{width:210},onSelect:()=>{t({type:"showModal",modal:"reportAbuse",modalProps:{comment:n}})},children:[(0,s.jsx)(g.Z,{className:"w1 mr2"}),"Report spam or abuse"]})]})]})]}),(0,s.jsx)("div",{className:"overflow-x-hidden break-word pre-wrap",children:(0,s.jsx)(j.R,{content:M})})]})};var M=n(40645),Z=n.n(M);let H=e=>{let{children:t}=e;return(0,s.jsxs)("span",{className:"relative-ns v-mid disappear-child",style:{lineHeight:0},children:[(0,s.jsx)("span",{className:"dib ml2 f7 fw6 tc mid-gray hover-dark-gray bg-white ba b--silver br-pill hover-b--light-silver pointer",style:{width:"1.1rem",height:"1.1rem",lineHeight:"1.15rem"},children:"?"}),(0,s.jsx)("nav",{className:"db absolute tl lh-solid z-3 child",style:{right:"-11px",width:"16rem"},"aria-label":"submenu","aria-hidden":!open,children:(0,s.jsx)("div",{className:"f7 white bg-black br2 overflow-hidden",style:{marginTop:"7px"},children:(0,s.jsx)("div",{className:"ph2 pv1 lh-copy",children:t})})})]})},S=e=>{let{notebookAccessText:t,isUpdatingComment:n=!1}=e,r="You are ".concat(n?"editing comments":"commenting"," on a ").concat(t.toLowerCase()," notebook.");return(0,s.jsxs)("div",{className:"inline-flex items-center",children:[(0,s.jsx)("div",{className:"db-ns dn mr2 f7 mid-gray",children:r}),(0,s.jsxs)(H,{children:[(0,s.jsxs)("span",{className:"dn-ns di",children:[r," "]}),"Your comment will be visible to anyone who can read this notebook."]})]})};function R(e){e.style.height="auto",e.style.height="".concat(e.scrollHeight,"px")}let E=e=>{let{nodeId:t,dispatch:n,comment:r,isUpdatingComment:a,first:i}=e,{currentUser:c,subscriptionState:d,notebookAccess:u}=(0,N.v9)(e=>{let{notebook:t,currentUser:n}=e;return{currentUser:n,subscriptionState:t.subscriptionState,notebookAccess:(0,C.wF)(t)}}),[h,m]=(0,o.useState)((null==r?void 0:r.content)||""),p=(0,o.useRef)(null),x=(0,o.useCallback)(e=>{R(p.current),m(e.target.value)},[p]);(0,o.useEffect)(()=>{let{current:e}=p;if(h&&e){let t=h.length;e.setSelectionRange(t,t),R(e)}},[]);let g=(0,o.useCallback)(e=>{if(r){n({type:"updateCommentStatus",status:"unresolved",nodeId:r.node_id,commentId:r.id});return}n({type:"commentComposeCancel",nodeId:t,trigger:e,content:h.trim(),source:"commentCompose"})},[t,n,h,r]),b=(0,o.useCallback)((e,s)=>{e.preventDefault();let r=h.trim();r&&c&&(n({type:"commentCreated",nodeId:t,content:r,trigger:s,currentUser:c,source:"commentCompose"}),"default"===d&&n({type:"updateSubscription",status:"comments"}),m(""))},[t,h,c,m,n,d]),v=(0,o.useCallback)((e,s)=>{e.preventDefault();let l=h.trim();l&&r&&n({type:"updateComment",nodeId:t,content:l,trigger:s,source:"commentCompose",commentId:r.id})},[t,h,n,r]),j=(0,o.useCallback)(e=>{"Enter"===e.key&&(e.metaKey||e.ctrlKey)?a?v(e,"keypress"):b(e,"keypress"):"Escape"===e.key&&(!h.trim()||a)&&g("keypress")},[g,b,v,a,h]),y=(0,C.OA)(c)?"true":"false";return(0,s.jsxs)("form",{onSubmit:e=>a?v(e,"click"):b(e,"click"),style:{borderColor:"#e6e2d4"},className:"jsx-1815c2d8dd4ca4e0 "+(l()("flex relative flex-column items-stretch mt",{bt:!i})||""),children:[(0,s.jsx)("textarea",{style:{resize:"none"},onKeyDown:j,autoFocus:!0,rows:1,ref:p,value:h,name:"comment_description",maxLength:65536,onChange:x,spellCheck:y,className:"jsx-1815c2d8dd4ca4e0 w-100 sans-serif f6 dark-gray br2 lh-f6 bg-transparent ph0 pv3 bn"}),(0,s.jsxs)("div",{className:"jsx-1815c2d8dd4ca4e0 flex pv2 justify-between",children:[(0,s.jsx)(S,{notebookAccessText:u,isUpdatingComment:!!a}),(0,s.jsxs)(f.CQ,{children:[(0,s.jsx)(f.kq,{text:"Cancel",onClick:()=>g("click")}),(0,s.jsx)(f.KM,{type:"submit",text:a?"Save":"Comment",disabled:!h.trim()||a&&h===(null==r?void 0:r.content)})]})]}),(0,s.jsx)(Z(),{id:"1815c2d8dd4ca4e0",children:"textarea.jsx-1815c2d8dd4ca4e0::-webkit-input-placeholder{color:var(--moon-gray)}textarea.jsx-1815c2d8dd4ca4e0:-moz-placeholder{color:var(--moon-gray)}textarea.jsx-1815c2d8dd4ca4e0::-moz-placeholder{color:var(--moon-gray)}textarea.jsx-1815c2d8dd4ca4e0:-ms-input-placeholder{color:var(--moon-gray)}textarea.jsx-1815c2d8dd4ca4e0::-ms-input-placeholder{color:var(--moon-gray)}textarea.jsx-1815c2d8dd4ca4e0::placeholder{color:var(--moon-gray)}"})]})};var _=n(12055),F=n(15784),D=n(31207);function I(e,t,n){return"".concat(e,"@latest#").concat(t||"cell-".concat(n))}function P(e,t,n,s,r,l,a,i){return s?r?{name:"Hide ".concat((0,C.xC)(s,"comment")),action:{type:"hideComments",nodeId:e,trigger:"click",source:"nodeGutterMenu"}}:{name:"Show ".concat((0,C.YY)(s,"comment")),action:{type:"showComments",nodeId:e,trigger:"click",source:"nodeGutterMenu"}}:l?{name:"Cancel comment",action:{type:"commentComposeCancel",nodeId:e,content:"",trigger:"click",source:"nodeGutterMenu"}}:a?i?{name:"Add comment",action:{type:"showModal",modal:"pausedComment",modalProps:{latestVersionPath:I(n,t,e)}}}:{name:"Add comment",action:{type:"commentComposeOpen",nodeId:e,trigger:"click",source:"nodeGutterMenu"}}:{name:"Add comment",action:{type:"showModal",modal:"login",modalProps:{loginReason:"comment"},trigger:"click",source:"comment"}}}var A=(0,N.$j)(e=>{let{notebook:t}=e;return{isCommentable:(0,y.H7)(t)}},e=>({dispatch:e}))(e=>{let{dispatch:t,commentCount:n,node:r,isCommentable:a,className:i="",...o}=e,{isCommentsOpen:c,isComposeOpen:u,canComment:h,isPausedLoad:m,path:p}=(0,N.v9)(e=>{let{notebook:t}=e;return{isCommentsOpen:t.openComments.has(r.id),isComposeOpen:t.composingComments.has(r.id),canComment:(0,w.RF)(t),isPausedLoad:t.isPausedLoad,path:(0,F.UW)(t)}});if(!a)return null;let{name:f,action:x}=P(r.id,(0,D.u2)(r),p,n,c,u,h,m),g=c?"blue":"";return(0,s.jsxs)("button",{onClick:e=>{e.stopPropagation(),t(x)},title:f,"aria-label":f,className:l()("flex items-center sans-serif f6 pointer pa0 hover-mid-gray moon-gray bg-transparent bn no-wrap",i),...o,children:[n>0?(0,s.jsx)("span",{className:"pr1 ".concat(g),children:n>=9?"9+":n}):(0,s.jsx)(d.G,{className:g}),(0,s.jsx)(_.Z,{className:g})]})}),T=n(6916),B=e=>(0,s.jsx)("svg",{width:"8",height:"16",viewBox:"0 0 8 16",fill:"none",...e,children:(0,s.jsx)("path",{d:"M1 9.5L4 7L7 9.5",stroke:"currentColor",strokeWidth:"1.8"})});let z=e=>{let{numResolved:t,numUnresolved:n,expanded:r,onToggle:a}=e;return(0,s.jsx)("div",{className:l()("flex nl2 nr2",n?"bb":"","b--light-gray"),children:(0,s.jsxs)("button",{type:"button",onClick:a,className:"inline-flex w-100 pa2 f6 mid-gray bg-transparent i pointer bn",children:[r?(0,s.jsx)(B,{className:"mr2"}):(0,s.jsx)(T.Z,{className:"mr2"}),t>1?"".concat(t," resolved comments"):"1 resolved comment"]})})};var O=n(85049);function W(e,t){return e.map((n,r)=>"updateInitiated"===n.status?(0,s.jsx)(E,{nodeId:n.node_id,comment:n,isUpdatingComment:!0,dispatch:t,first:0===r},"remote-".concat(n.id)):(0,s.jsx)(L,{dispatch:t,comment:n,first:0===r,repeated:r>0&&e[r].user.id===e[r-1].user.id},(0,C.tO)(n)?"local-".concat(n.nonce):"remote-".concat(n.id)))}var q=(0,N.$j)((e,t)=>{let{notebook:n,currentUser:s}=e;return{resolvedComments:(0,F.o7)(n,t.nodeId),unresolvedComments:(0,F.HS)(n,t.nodeId),notebook:n,currentUser:s}},e=>({dispatch:e}))(e=>{let{nodeId:t,nodeName:n,notebook:r,currentUser:a,resolvedComments:i,unresolvedComments:o,dispatch:u}=e;if(!r.openComments.has(t)||!(0,y.H7)(r))return null;let h=(0,w.f$)(r)&&o.length>0,m=r.composingComments.has(t),p=r.expandedResolvedComments.has(t);return(0,s.jsx)("div",{className:"relative pea sans-serif f6 lh-f6 dark-gray",style:{paddingTop:"0.75rem"},children:(0,s.jsxs)("div",{className:"bg-washed-yellow",style:{maxWidth:640+2*O.Mv,marginLeft:-O.Mv,marginRight:-O.Mv,paddingLeft:O.Mv,paddingRight:O.Mv},children:[p&&W(i,u),i.length>0&&(0,s.jsx)(z,{numResolved:i.length,numUnresolved:o.length,expanded:p,onToggle:function(){u({type:"toggleResolvedComments",nodeId:t,trigger:"click",source:"commentBox"})}}),W(o,u),m?(0,s.jsx)(E,{nodeId:t,dispatch:u,first:o.length+i.length===0}):(0,s.jsxs)("div",{className:l()("flex","justify-".concat(h?"between":"end"),"bg-washed-yellow pb2"),children:[h&&(0,s.jsx)(f.sn,{onClick:function(){u({type:"resolveComments",nodeId:t,trigger:"click",source:"commentBox"})},disabled:!o.every(e=>(0,y.Lj)(e)),text:"Resolve",className:"mr2"}),(0,C.fC)(r)&&!(0,w.RF)(r)?(0,s.jsx)("div",{className:"inline-flex ph2 nr2 pt1 pb3 f6 dark-gray items-center",children:(0,s.jsx)(c.h,{commentingLock:r.commentingLock})}):(0,s.jsx)(f.sn,{icon:d.Z,text:"Comment",onClick:function(){(0,w.RF)(r)?r.isPausedLoad?u({type:"showModal",modal:"pausedComment",modalProps:{latestVersionPath:I((0,F.UW)(r),n,t)}}):u({type:"commentComposeOpen",nodeId:t,trigger:"click",source:"commentBox"}):a||u({type:"showModal",modal:"login",modalProps:{loginReason:"comment"},trigger:"click",source:"comment"})}})]})]})})}),U=e=>{let{id:t,dispatch:n}=e;return(0,s.jsx)("button",{title:"Jump to error",onClick:()=>n({type:"focusError",id:t}),className:"absolute pv1 ph2 bg-near-white red f7 fw5 bn br3 pointer pea",style:{top:-28,right:-14},children:"Jump to error"})},G=e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:[(0,s.jsx)("rect",{x:"5",y:"7",width:"6",height:"2",rx:"1",fill:"currentColor"}),(0,s.jsx)("rect",{x:"3",y:"3",width:"10",height:"10",rx:"1",stroke:"currentColor",strokeWidth:"2"})]}),Y=n(47985),K=n(35433),X=n(7384),$=n(97795),J=n(88027),Q=n(86171);let ee=(0,N.$j)(e=>{let{notebook:t}=e;return{notebook:t}},e=>({dispatch:e}))(e=>{let{id:t,notebook:n,dispatch:r}=e,a=(0,X.DY)(n.model,t),i=(0,D.Qc)(a).body.source.value,c=(0,$.uF)(n),d=(0,$.uF)(n,{ignoreResolutions:!0}),u=(0,o.useMemo)(()=>{if(!c||!d)return;let{directImports:e}=(0,$.$r)(c);return(0,$.ng)(d.specifiers,e,n.model.resolutions).get(i)},[i,c,d,n.model.resolutions]);if(!u)return null;let h=(0,$.xT)(null==c?void 0:c.specifiers[i]);return J.Z.parse(i)&&(0,Q.qU)(a)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{title:"".concat(u.updatesAvailable?"Updates available. ":"").concat("locked"===u.lockStatus?"This import and all of its dependencies are locked.":"unlocked"===u.lockStatus?"This import and all of its dependencies are unlocked, so the latest version will always be imported.":"Not all of this import's dependencies are locked."," Click to open the Dependencies pane and manage versions."),onClick:()=>{r({type:"showNotebookDependencyDetails",updatesAvailable:u.updatesAvailable,status:u.lockStatus,specifier:i})},className:Z().dynamic([["13fb8458e6e11fcc",[h?"color: var(--white)":"",u.updatesAvailable?"background-color: var(--observable-focus-light-blue)":"",h?"background-color: var(--red)":"",h?"color: var(--white)":"",h?"background-color: var(--red);":""]]])+" "+(l()(u.updatesAvailable?"has-updates ":"","lock-status absolute hover-mid-gray pv1 ph2 bg-near-white f7 fw5 bn gray br4 pointer flex items-center align-center pea")||""),children:"locked"===u.lockStatus?(0,s.jsx)(Y.Z,{}):"unlocked"===u.lockStatus?(0,s.jsx)(K.Z,{}):(0,s.jsx)(G,{})}),(0,s.jsx)(Z(),{id:"13fb8458e6e11fcc",dynamic:[h?"color: var(--white)":"",u.updatesAvailable?"background-color: var(--observable-focus-light-blue)":"",h?"background-color: var(--red)":"",h?"color: var(--white)":"",h?"background-color: var(--red);":""],children:".lock-status.__jsx-style-dynamic-selector{padding-left:10px;padding-right:10px;top:-28px;right:-14px;color:var(--observable-focus-dark-blue);".concat(h?"color: var(--white)":"").concat(u.updatesAvailable?"background-color: var(--observable-focus-light-blue)":"").concat(h?"background-color: var(--red)":"",".lock-status.__jsx-style-dynamic-selector:hover{color:var(--mid-gray);").concat(h?"color: var(--white)":"",'.has-updates.__jsx-style-dynamic-selector::after{content:"";position:absolute;top:0;right:0;width:7px;height:7px;background-color:var(--observable-focus-dark-blue);').concat(h?"background-color: var(--red);":"","-webkit-border-radius:3.5px;-moz-border-radius:3.5px;border-radius:3.5px}")})]}):null});var et=n(28109),en=n(83108),es=n(89361),er=n(96440),el=n(21482);let ea=e=>{var t;let{node:n,editorState:r,focused:a,assistFocused:i,selected:c,selectionFocused:d,editorOpen:u,workerHeight:h,editors:m,hovered:p,hasPrevious:f,hasNext:x,editorComponent:g}=e,b=(0,N.I0)(),v=(0,o.useRef)(null),j=(0,o.useRef)(null),y=(0,o.useRef)(null),V=(0,o.useRef)(null),{id:w}=n,C=(0,D.u2)(n),k=(0,N.v9)(e=>{var t,n;let{notebook:s}=e;return null===(n=s.workerStatus.get(w))||void 0===n?void 0:null===(t=n.display)||void 0===t?void 0:t.mode}),{jumpToError:L}=r.field(en.ei).find(e=>{let{jumpToError:t}=e;return t})||{},[M,Z]=(0,o.useState)({filter:void 0,sort:void 0}),[H,S]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{let e=(0,er.jn)(j.current,w,"editor",b),t=(0,er.jn)(y.current,w,"comments",b),n=(0,er.jn)(V.current,w,"display",b);return()=>{e.disconnect(),t.disconnect(),n.disconnect()}},[w,b]),(0,o.useEffect)(()=>{d&&(0,es.zT)(v.current)},[d]),(0,s.jsxs)("div",{ref:v,className:l()("relative node pen",p||a?"node-hover":""),"data-node-id":w,id:"nodeName"!==C&&C||void 0,style:{marginTop:O.KI,marginBottom:O.KI,paddingTop:h},onMouseEnter:()=>b({type:"hover",id:w}),children:[c||d?(0,s.jsx)("div",{className:"absolute br2 z-1",style:{top:1,left:-13,right:-13,bottom:1,boxShadow:c&&d?"0px 0px 0px 2px var(--lightest-blue), 0px 0px 0px 4px var(--faint-blue)":c?"0px 0px 0px 2px var(--washed-blue)":"0px 0px 0px 2px var(--lightest-blue)"}}):null,(0,s.jsx)("div",{ref:V,children:(0,el.kk)(n)&&"table"===k&&(0,s.jsx)(et.V,{node:n,operations:M,setOperations:Z,setColumnsFlash:S,editorOpen:u})}),(0,s.jsxs)("div",{ref:j,className:"relative",children:[L?(0,s.jsx)(U,{dispatch:b,id:w}):(null===(t=(0,D.Qc)(n).body)||void 0===t?void 0:t.type)==="ImportDeclaration"?(0,s.jsx)(ee,{id:w}):null,u&&(0,s.jsx)(g,{node:n,editorState:r,focused:a,assistFocused:i,hovered:p,selected:c||d,editors:m,hasPrevious:f,hasNext:x,operations:M,setOperations:Z,columnsFlash:H,setColumnsFlash:S})]}),(0,s.jsx)("div",{ref:y,children:(0,s.jsx)(q,{nodeId:w,nodeName:C})})]})};var ei=()=>(0,s.jsx)("div",{className:"absolute w-100 bt b--blue",style:{marginTop:Math.floor(-O.KI/2)}}),eo=n(9277),ec=n(56537),ed=n(1984),eu=n(13370);let eh=e=>{let{dispatch:t,mode:n,id:r,disabled:l}=e;return(0,s.jsx)(s.Fragment,{children:Object.entries(el.qz).filter(e=>{let[,{convertible:t}]=e;return t}).map(e=>{let[a,{label:i,icon:o}]=e,c=n===a;return(0,s.jsxs)(v.sN,{disabled:l,"aria-label":"editor-menu-".concat(i),className:c?"blue":"dark-gray hover-black",onSelect:()=>{t({type:"setMode",id:r,source:"gutterMenu",trigger:"click",mode:a})},children:[(0,s.jsx)("span",{className:"w1 h1 mr1",children:(0,s.jsx)(o,{})}),i,c&&(0,s.jsx)(ed.Z,{className:"ml1"})]},a)})})};var em=(0,N.$j)(()=>({}),e=>({dispatch:e}))(e=>{let{dispatch:t,node:n,mode:r,focused:a,selected:i,hovered:o,className:c="",readOnly:d,children:u,...h}=e,{id:m}=n,{convertible:p}=el.qz[r],{className:f,styles:x}={styles:(0,s.jsx)(Z(),{id:"3669d7fb48fa64a5",dynamic:[eu.pp],children:"@media ".concat(eu.pp,"{*.__jsx-style-dynamic-selector{-webkit-border-bottom-left-radius:var(--border-radius-2);-moz-border-radius-bottomleft:var(--border-radius-2);border-bottom-left-radius:var(--border-radius-2)}}")}),className:Z().dynamic([["3669d7fb48fa64a5",[eu.pp]]])};return(0,s.jsx)(v.v2,{children:e=>{let{isExpanded:n}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(v.j2,{title:"".concat(el.qz[r].label).concat(p?"\nClick to set language":""),className:l()(a||i&&o?"observable-focus-dark-blue":i?"washed-blue":n?"dark-gray":o?"gray":"moon-gray",p?a||i?"pointer hover-blue":o?"pointer hover-mid-gray":"pointer":"",a||i&&o?"bg-observable-focus-light-blue":o?"bg-light-silver":"bg-transparent",f,c,"bn pa0 focus-z-1"),disabled:!p,...h,children:[u,x]}),(0,s.jsx)(v.qy,{position:v.Ly.right,children:(0,s.jsx)(eh,{dispatch:t,id:m,mode:r,disabled:d})})]})}})}),ep=n(80583),ef=n(46350),ex=n(38784),eg=n(19703),eb=n(87081),ev=n(97543),ej=n(56419),ey=n(14944),eV=n(12300),ew=n(46582),eC=n(9337);class ek extends eC.i{async process(e){let t=await e({type:"request_download_type",node_id:this._id});return{type:eN(t.type),typeAsView:eN(t.typeAsView)}}constructor(e){super(),this._id=e}}function eN(e){return e?"blob"===e.type?{type:"blob",mime:"".concat(e.mime)}:{type:"".concat(e.type)}:void 0}class eL extends eC.i{async process(e){return await e({type:"request_download",node_id:this._id,as_view:this._asView,download_type:this._type,format:this._format})}constructor(e,t,n,s){super(),this._id=e,this._asView=t,this._type=n,this._format=s}}var eM=n(86342),eZ=n(60141);let eH=e=>{let{commentCount:t,editorOpen:n,focused:r,readOnly:a,selected:i,hovered:c,commentable:d,node:u,className:m="",children:p,...f}=e,{id:x,pinned:g,mode:b}=u,j=(0,D.u2)(u),y=(0,N.I0)(),{hasOutput:V,isNodeUnsaved:k,isCommentingLocked:L,isCommentsOpen:M,isComposeOpen:H,canComment:S,notebookSpecifier:R,deletable:E,isPausedLoad:I,path:A}=(0,N.v9)(e=>{let{notebook:t}=e;return{hasOutput:(0,er.Gv)(t.heights.get(x))>0,isNodeUnsaved:x>t.saveVersion,isCommentingLocked:(0,C.fC)(t),isCommentsOpen:t.openComments.has(u.id),isComposeOpen:t.composingComments.has(u.id),canComment:(0,w.RF)(t),notebookSpecifier:(0,C.J6)(t),deletable:t.model.nodes.length>1,isPausedLoad:t.isPausedLoad,path:(0,F.UW)(t)}}),T=(0,o.useRef)(null),B=(0,o.useRef)(!1),[z]=(0,eM._)(x,T,B,a,y,"node","notebook");async function O(e,t,n){let s;try{s=await new eL(x,e,t,n).run(y)}catch(e){y({type:"showErrorToast",message:"Unable to download.",key:"download"});return}(0,eZ.L)(s,"".concat(j||"untitled").concat(n?".".concat(n):""))}function W(){y({type:r?"blur":"focus",id:x})}let{name:q,action:U}=P(x,j,A,t,M,H,S,I);function G(){y(U)}let Y="Click for cell actions\nDrag to move cell",{className:K,styles:X}={styles:(0,s.jsx)(Z(),{id:"1e239f92adb2389e",dynamic:[eu.pp,n&&V?0:"var(--border-radius-2)"],children:'*.__jsx-style-dynamic-selector{will-change:transform;cursor:"grab"}@media '.concat(eu.pp,"{*.__jsx-style-dynamic-selector{-webkit-border-top-left-radius:var(--border-radius-2);-moz-border-radius-topleft:var(--border-radius-2);border-top-left-radius:var(--border-radius-2);-webkit-border-bottom-left-radius:").concat(n&&V?0:"var(--border-radius-2)",";-moz-border-radius-bottomleft:").concat(n&&V?0:"var(--border-radius-2)",";border-bottom-left-radius:").concat(n&&V?0:"var(--border-radius-2)","}}")}),className:Z().dynamic([["1e239f92adb2389e",[eu.pp,n&&V?0:"var(--border-radius-2)"]]])},$=!!j,J=!n&&!g,Q=!g&&V,ee=V&&!a,et=!a,en=!a,es=E&&!a,ea=d&&(t>0||S||!L)&&!a,ei=(0,D.q8)(u),eo=!V&&el.qz[u.mode].convertible&&!a;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.v2,{children:e=>{let{isExpanded:t}=e;return B.current=t,(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(v.j2,{ref:T,title:Y,"aria-label":Y,className:l()(r||i&&c?"observable-focus-dark-blue":i?"washed-blue":t?"dark-gray":c?"gray":"moon-gray",r||i?"hover-blue":c?"hover-mid-gray":"",r||i&&c?"bg-observable-focus-light-blue":c?"bg-light-silver":"bg-transparent",!(r||c||!V||t)&&"dn",K,m,"bn pa0 focus-z-1"),...f,children:[p,X]}),(0,s.jsxs)(v.qy,{position:v.Ly.right,children:[$?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.Uk,{href:"#".concat(j),children:(0,s.jsx)("div",{className:"mw5 code f7 fw5 hover-blue",children:j})}),(0,s.jsx)(v.R,{})]}):null,J?(0,s.jsxs)(v.sN,{onSelect:W,children:[(0,s.jsx)(h.Z,{className:"w1 h1 mr1"}),"Edit"]}):Q?(0,s.jsxs)(v.sN,{onSelect:W,children:[(0,s.jsx)(ew.Z,{className:"w1 h1 mr1"}),"Close"]}):null,ee&&(0,s.jsxs)(v.sN,{onSelect:()=>y({type:"togglePin",id:x}),children:[(0,s.jsx)(eV.Z,{className:"w1 h1 mr1","aria-label":g?"Unpin":"Pin"}),g?"Unpin":"Pin"]}),ea&&(0,s.jsxs)(v.sN,{onSelect:G,"aria-label":q,disabled:k,title:k?"Fork this notebook to comment on this cell":void 0,children:[(0,s.jsx)(_.Z,{className:"w1 h1 mr1"}),q]}),ei&&(0,s.jsxs)(v.sN,{title:"Copy the code to import this cell",onSelect:async()=>{await navigator.clipboard.writeText(function(e,t){let{body:n}=(0,D.Qc)(e);if((null==n?void 0:n.type)==="ImportDeclaration"){let{specifiers:e,injections:t,source:s}=n;if(!t)return"import {".concat(e.map(e=>{let{imported:{name:t},local:{name:n},view:s,mutable:r}=e;return"".concat(s?"viewof ".concat(t):r?"mutable ".concat(t):t).concat(t===n?"":" as ".concat(n))}).join(", "),'} from "').concat(s.value,'"')}let s=(0,D.Ad)(e);return"import {".concat(s.join(", "),'} from "').concat(t,'"')}(u,R)),y({type:"showSuccessToast",message:"Copied import code to clipboard"})},children:[(0,s.jsx)(eb.Z,{className:"w1 h1 mr1"}),"Copy import"]}),en&&(0,s.jsxs)(v.sN,{onSelect:()=>y({type:"selectionToggle",id:x}),children:[(0,s.jsx)(ex.Z,{className:"w1 h1 mr1"}),i?"Deselect":"Select"]}),et&&(0,s.jsxs)(v.sN,{onSelect:()=>y({type:"duplicate",id:x,before:!1}),children:[(0,s.jsx)(ey.Z,{className:"w1 h1 mr1"}),"Duplicate"]}),(0,s.jsxs)(v.sN,{title:"Copy a link to this cell",onSelect:async()=>{let e=new URL("#".concat(j||"cell-".concat(x)),window.location.href);await navigator.clipboard.writeText(e.href),y({type:"showSuccessToast",message:"Copied link to clipboard"})},children:[(0,s.jsx)(ej.ZP,{className:"w1 h1 mr1"}),"Copy link"]}),(0,s.jsxs)(v.sN,{disabled:!j,title:j?"Embed this cell in a web page":"Name this cell to embed",onSelect:()=>y({type:"showModal",modal:"embed",modalProps:{selectedNode:u},source:"nodeGutterMenu"}),children:[(0,s.jsx)(eg.Z,{className:"w1 h1 mr1"}),"Embed"]}),(0,s.jsx)(eE,{onDownload:O,id:x,dispatch:y}),(0,s.jsx)(eE,{asView:!0,onDownload:O,id:x,dispatch:y}),es&&(0,s.jsx)(eS,{dispatch:y,id:x}),eo?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.R,{}),(0,s.jsx)(eh,{dispatch:y,id:x,mode:b,disabled:a})]}):null]})]})}}),z&&(0,s.jsx)(ef.h,{children:(0,s.jsx)("div",{style:{position:"fixed",top:0,right:0,bottom:0,left:0,cursor:"grabbing",zIndex:1}})})]})},eS=e=>{let{dispatch:t,id:n}=e,[r,l]=(0,o.useState)(!1),{isExpanded:a}=(0,ep.uF)();return(0,o.useEffect)(()=>{a||l(!1)},[a]),r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(v.ti,{children:"Are you sure?"}),(0,s.jsxs)(v.sN,{onSelect:()=>t({type:"remove",id:n}),className:"hover-dark-red hover-bg-washed-red",children:[(0,s.jsx)(m.Z,{"aria-label":"Delete confirmation",className:"w1 h1 mr1"}),"Delete"]})]}):(0,s.jsxs)(v.sN,{onMouseUp:function(e){e.preventDefault(),l(!0)},onSelect:()=>t({type:"remove",id:n}),className:"hover-dark-red hover-bg-washed-red",children:[(0,s.jsx)(m.Z,{"aria-label":"Delete",className:"w1 h1 mr1"}),"Delete"]})},eR=new Set(["csv","map","set","typedarray","array","object"]),eE=e=>{let{asView:t=!1,id:n,dispatch:r,onDownload:l}=e,[a,i]=(0,o.useState)(),{isExpanded:c}=(0,ep.uF)();if((0,o.useEffect)(()=>{c?new ek(n).run(r).then(i,()=>{}):i(void 0)},[r,n,c]),void 0===a)return null;let d=t?a.typeAsView:a.type;return void 0===d?null:(0,s.jsxs)(s.Fragment,{children:["svg"===d.type&&(0,s.jsxs)(v.sN,{onSelect:()=>l(t,d.type,"svg"),children:[(0,s.jsx)(ev.Z,{className:"w1 h1 mr1"}),"Download SVG"]}),("svg"===d.type||"canvas"===d.type||"html"===d.type)&&(0,s.jsxs)(v.sN,{onSelect:()=>l(t,d.type,"png"),children:[(0,s.jsx)(ev.Z,{className:"w1 h1 mr1"}),"Download PNG"]}),"css"===d.type&&(0,s.jsxs)(v.sN,{onSelect:()=>l(t,d.type,"css"),children:[(0,s.jsx)(ev.Z,{className:"w1 h1 mr1"}),"Download CSS"]}),"blob"===d.type&&(0,s.jsxs)(v.sN,{onSelect:()=>l(t,d.type,function(e){switch(e){case"image/png":return"png";case"image/jpeg":return"jpg";case"image/gif":return"gif";case"image/bmp":return"bmp";case"application/json":return"json";case"application/x-sqlite3":return"db";case"application/zip":return"zip";case"text/css":return"css";case"text/csv":return"csv";case"text/plain":return"txt";case"text/html":return"html";case"text/javascript":return"js";case"audio/mpeg":return"mp3";case"video/mp4":return"mp4";case"text/tab-separated-values":return"tsv"}return""}(d.mime)),children:[(0,s.jsx)(ev.Z,{className:"w1 h1 mr1"}),"Download file"]}),"csv"===d.type&&(0,s.jsxs)(v.sN,{onSelect:()=>l(t,d.type,"csv"),children:[(0,s.jsx)(ev.Z,{className:"w1 h1 mr1"}),"Download CSV"]}),"string"===d.type&&(0,s.jsxs)(v.sN,{onSelect:()=>l(t,d.type,"txt"),children:[(0,s.jsx)(ev.Z,{className:"w1 h1 mr1"}),"Download text"]}),eR.has(d.type)&&(0,s.jsxs)(v.sN,{onSelect:()=>l(t,d.type,"json"),children:[(0,s.jsx)(ev.Z,{className:"w1 h1 mr1"}),"Download JSON"]})]})};var e_=n(83879),eF=n(11974);let eD=(0,o.memo)(function(e){let{editorOpen:t,focused:n,selecting:r,selected:l,selectionFocused:a,height:i,hovered:o,commentable:c,node:d,readOnly:u,mode:h,outputHeight:m,isCollectionsSidebarOpen:p}=e,{id:f,pinned:x}=d,g=(0,N.I0)(),b=m>0,{nodeComments:v,saveVersion:j}=(0,N.v9)(e=>{let{notebook:t}=e;return{nodeComments:t.comments.get(d.id),saveVersion:t.saveVersion}}),y=el.qz[h].icon,V=(0,eu.GS)("screen and (max-width: ".concat(p?"115em":"75em",")")),w=O.re,C=b?Math.min(Math.max(m,O.NQ),O.T6):O.T6,k=(v||[]).filter(e=>e.node_id===d.id&&e.node_id<=j);return(0,s.jsxs)("div",{id:"cell-".concat(f),style:{height:i},className:Z().dynamic([["bdb261996879aa35",[O.Mv]]])+" absolute gutter dn-print",children:[!V&&(o||k.length>0)&&(0,s.jsx)(A,{commentCount:k.length,node:d,className:"absolute top-0 z-1",style:{right:(w+4)*2,height:C}}),(0,s.jsx)("button",{"aria-label":"gutter",onMouseEnter:()=>g({type:"hover",id:f}),onClick:e=>{r||e[e_.Ao]?(g({type:"blur"}),g({type:"selectionToggle",id:f})):g({type:n?"blur":"focus",id:f})},title:r?l?"Unselect cell":"Select cell":x?n?"Blur cell ".concat((0,eF.Z)("Escape")):"Focus cell":n?"Close cell ".concat((0,eF.Z)("Escape")):"Edit cell",suppressHydrationWarning:!0,className:Z().dynamic([["bdb261996879aa35",[O.Mv]]])+" db bn bg-transparent absolute top-0 bottom-0 right-0 w-100 pointer moon-gray hover-mid-gray focus-z-1",children:(n||o||r)&&(0,s.jsx)("div",{style:{right:w+4,width:w,height:C},className:Z().dynamic([["bdb261996879aa35",[O.Mv]]])+" absolute top-0 flex items-center justify-center",children:r?(0,s.jsx)("input",{type:"checkbox",checked:l,className:Z().dynamic([["bdb261996879aa35",[O.Mv]]])+" pointer"}):b?(0,s.jsx)(eo.Z,{style:{transform:t?"":"rotate(-90deg)",transition:"transform 150ms ease"}}):null})}),(0,s.jsx)(eH,{node:d,focused:n,selected:l||a,editorOpen:t,hovered:o,readOnly:u,commentCount:k.length,commentable:c,className:"absolute top-0",style:{right:1,width:w,height:b?Math.max(m,C):i},children:(0,s.jsx)("div",{style:{width:w,height:C},className:Z().dynamic([["bdb261996879aa35",[O.Mv]]])+" absolute top-0 flex items-center justify-center",children:b?(0,s.jsx)(ec.Z,{}):t||o?(0,s.jsx)(y,{className:Z().dynamic([["bdb261996879aa35",[O.Mv]]])}):null})}),b&&t&&(0,s.jsx)("div",{style:{top:m,height:"calc(100% - ".concat(m,"px)")},className:Z().dynamic([["bdb261996879aa35",[O.Mv]]])+" absolute right-0",children:(0,s.jsx)(em,{node:d,mode:h,focused:n,hovered:o,selected:l||a,className:"absolute bottom-0",readOnly:u,style:{top:-1,right:1,width:w,borderTop:"solid 1px white"},children:(0,s.jsx)("div",{style:{width:w,height:O.T6},className:Z().dynamic([["bdb261996879aa35",[O.Mv]]])+" absolute top-0 flex items-center justify-center",children:(0,s.jsx)(y,{className:Z().dynamic([["bdb261996879aa35",[O.Mv]]])})})})}),(0,s.jsx)(Z(),{id:"bdb261996879aa35",dynamic:[O.Mv],children:".gutter.__jsx-style-dynamic-selector{width:-webkit-calc((100vw - 100%) / 2 - ".concat(O.Mv,"px + 1px);width:-moz-calc((100vw - 100%) / 2 - ").concat(O.Mv,"px + 1px);width:calc((100vw - 100%) / 2 - ").concat(O.Mv,"px + 1px);margin-left:-webkit-calc((100% - 100vw)/2);margin-left:-moz-calc((100% - 100vw)/2);margin-left:calc((100% - 100vw)/2)}")})]})});var eI=n(36354),eP=n(45770);let eA=e=>{let{newUntil:t}=e,n=+t-+new Date;return(0,s.jsx)("span",{className:"br2 ttu ml1 bg-faint-blue dark-blue",style:{padding:3,fontSize:"0.5rem",filter:n<2592e5?"saturate(".concat(n/2592e5,")"):void 0},children:"New"})};var eT=n(90747),eB=n(32775),ez=n(88815),eO=n(97658),eW=n(55560),eq=n(26596),eU=n(12254),eG=n(34790),eY=n(78120),eK=n(33083),eX=n(55148),e$=n(45063),eJ=n(46588),eQ=e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:[(0,s.jsx)("path",{d:"M9.68457 9.76671L13.4927 8.90167L13.3285 5",stroke:"currentColor",strokeWidth:"1.6"}),(0,s.jsx)("path",{d:"M1 8.57188C4.2091 5.26919 9.5576 4.85634 13.3016 8.98472",stroke:"currentColor",strokeWidth:"1.6"})]}),e1=n(79098),e0=n(15736),e2=n(68825),e3=e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:[(0,s.jsx)("path",{d:"M13 6C13 6.87768 13 7.5 12.3301 8.5L8 14L3.66987 8.5C3 7.5 3 6.87768 3 6C3 5.12232 3.23103 4.2601 3.66987 3.5C4.10871 2.7399 4.7399 2.10872 5.5 1.66987C6.2601 1.23103 7.12232 1 8 1C8.87768 1 9.7399 1.23103 10.5 1.66987C11.2601 2.10871 11.8913 2.7399 12.3301 3.5C12.769 4.2601 13 5.12232 13 6Z",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("circle",{cx:"8",cy:"6",r:"2",fill:"currentColor"})]}),e5=n(3353),e4=n(83347),e8=n(38613),e7=n(38445);let e6=e=>(0,s.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,s.jsxs)("g",{fill:"currentColor",children:[(0,s.jsx)("path",{d:"M19.7071 15.7071C19.3166 15.3166 19.3166 14.6834 19.7071 14.2929L24.2929 9.70711C24.6834 9.31658 25.3166 9.31658 25.7071 9.70711L30.2929 14.2929C30.6834 14.6834 30.6834 15.3166 30.2929 15.7071L25.7071 20.2929C25.3166 20.6834 24.6834 20.6834 24.2929 20.2929L19.7071 15.7071Z"}),(0,s.jsx)("rect",{x:"39",y:"5",width:"8",height:"8",rx:"2"}),(0,s.jsx)("rect",{x:"39",y:"17",width:"8",height:"8",rx:"2"}),(0,s.jsx)("rect",{x:"3.5",y:"11.5",width:"7",height:"7",rx:"1.5",stroke:"currentColor"})]}),(0,s.jsx)("path",{stroke:"currentColor",strokeOpacity:"0.35",strokeWidth:"2",d:"M38 21L36 21C35.4477 21 35 20.5523 35 20L35 15M35 15L32 15M35 15L35 10C35 9.44772 35.4477 9 36 9L38 9 M12 15L18 15"})]});var e9=n(89896),te=n(94878),tt=n(32485),tn=n(88577),ts=n(99053),tr=n(57035),tl=n(97635);let ta=[{items:[to("js"),to("md"),to("html")]},{title:"Suggestions",items:[{type:"small",label:"Create\xa0table",category:"Suggestions",icon:e7.i,filter:e=>{let{suggestions:t}=e;return t.includes("table")},action:(e,t)=>{let{previousId:n}=t;null!==n&&e({type:"insertSuggestion",id:n,suggestion:e=>({id:n,before:!1,node:{mode:"table",data:{source:{type:"cell",name:e},operations:{...el.Zu.defaultNode.data.operations,from:{table:(0,tl.Z)({type:"cell",name:e,dialect:"array"})}}}},type:"insert"})})}},{type:"small",label:"Create\xa0chart",category:"Suggestions",icon:e1.k,filter:e=>{let{suggestions:t}=e;return t.includes("chart")},action:(e,t)=>{let{previousId:n}=t;null!==n&&e({type:"insertSuggestion",id:n,suggestion:e=>({id:n,before:!1,node:{mode:"chart",data:{...el.mc.defaultNode.data,source:{type:"cell",name:e}}},type:"insert"})})}},{type:"small",label:"Create\xa0Plot\xa0map",category:"Suggestions",icon:e3,filter:e=>{let{suggestions:t}=e;return t.includes("map")},action:(e,t)=>{let{previousId:n}=t;null!==n&&e({type:"insertSuggestion",id:n,suggestion:e=>({id:n,before:!1,node:{mode:"js",value:'Plot.plot({ projection: "equal-earth", marks: [Plot.geo('.concat(e,")] })")},type:"insert"})})}},{type:"small",label:"Create\xa0Leaflet\xa0map",category:"Suggestions",icon:e3,filter:e=>{let{suggestions:t}=e;return t.includes("map")},action:(e,t)=>{let{previousId:n}=t;null!==n&&e({type:"insertSuggestion",id:n,suggestion:e=>({id:n,before:!1,node:{mode:"js",value:'{\n  const container = yield htl.html`<div style="height: 500px;">`;\n  const map = L.map(container);\n  const layer = L.geoJSON('.concat(e,').addTo(map);\n  map.fitBounds(layer.getBounds(), {maxZoom: 9});\n  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {\n    attribution: "\xa9 <a href=https://www.openstreetmap.org/copyright>OpenStreetMap</a> contributors"\n  }).addTo(map);\n}')},type:"insert"})})}},{type:"small",label:"Convert\xa0to\xa0JavaScript",category:"Suggestions",icon:eQ,filter:e=>{let{previousMode:t}=e;return"chart"===t},action:async(e,t)=>{let{previousId:n,previousNode:s,chartSpec:r}=t;if(null===n||!s)return;let l=await (0,ts.F)(function(e,t){if(!e||"chart"!==e.mode||!t)return"";let n=Object.keys(e.data.config.options).length?(0,eK.db)(e.data.config.options):null,{fx:s,fy:r,x:{zero:l},y:{zero:a},color:{value:i,color:o},markImpl:c,markOptions:d,transformImpl:u,transformOptions:h,colorMode:m}=t,p="{".concat(Object.entries(d).map(e=>{let[t,n]=e;if(void 0!==n)return t===m?"".concat(t,": ").concat("string"==typeof o?JSON.stringify(o):"string"==typeof i?(0,eK.D5)(i)?"(d) => d[".concat(JSON.stringify(i),"]"):JSON.stringify(i):void 0):"".concat(t,": ").concat(JSON.stringify(n))}).filter(e=>e).join(", "),"}"),f=u?"Plot.".concat(u,"(").concat(JSON.stringify(h),", ").concat(p,")"):p,x=null!=s||null!=r?"Plot.frame({strokeOpacity: 0.1})":null,g=[l?"Plot.ruleX([0])":null,a?"Plot.ruleY([0])":null],b="Plot.".concat(c,"(").concat((0,eK.TG)(e.data.source),", ").concat(f,")");return"Plot.plot({".concat(n?"\n    ".concat(n.slice(1,n.length-1),","):"","\n    marks: [\n      ").concat(("stroke"===m?[x,...g,b]:[x,b,...g]).filter(e=>e).join(",\n    "),"\n    ]\n  })")}(s,r));if(l.length>65536)throw Error("generated Plot code is too long");e({type:"insertAfter",id:n,node:{mode:"js",value:l},trigger:"click",source:"nodeInserterMenu"})}},{type:"small",label:"Convert\xa0to\xa0SQL",category:"Suggestions",icon:eQ,filter:e=>{let{previousMode:t}=e;return"table"===t},action:(e,t)=>{let n,{previousId:s,previousNode:r}=t;if(null!==s&&(null==r?void 0:r.mode)==="table"){try{n=(0,tn.M7)(r.data)}catch(e){n={name:"",type:"cell"}}new te.zL(n,r.data.operations).run(e).then(tr.Je,e=>(console.error("Error fetching query: ",e),"")).then(t=>{e({type:"insertAfter",id:s,node:{mode:"sql",data:{source:n},value:t},trigger:"click",source:"nodeInserterMenu"})})}}}]},{title:"Data",items:[{type:"large",label:"SQL query",category:"Data",description:"Query a database",icon:e=>(0,s.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,s.jsx)("path",{d:"M30 11C30 11.2456 29.7749 11.7372 28.7954 12.2269C27.8758 12.6867 26.5353 13 25 13C23.4647 13 22.1242 12.6867 21.2046 12.2269C20.2251 11.7372 20 11.2456 20 11C20 10.7544 20.2251 10.2628 21.2046 9.77311C22.1242 9.31327 23.4647 9 25 9C26.5353 9 27.8758 9.31327 28.7954 9.77311C29.7749 10.2628 30 10.7544 30 11Z",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29 13.2361C30.2275 12.6868 31 11.8885 31 11V13V15.25C31 17.0449 28.3137 18 25 18C21.6863 18 19 17.0449 19 15.25V13V11C19 11.8885 19.7725 12.6868 21 13.2361V13.2365V13.2475V13.2585V13.2695V13.2805V13.2915V13.3025V13.3136V13.3246V13.3357V13.3467V13.3578V13.3689V13.3799V13.391V13.4021V13.4133V13.4244V13.4355V13.4466V13.4578V13.4689V13.4801V13.4912V13.5024V13.5136V13.5248V13.536V13.5472V13.5584V13.5696V13.5808V13.592V13.6032V13.6145V13.6257V13.6369V13.6482V13.6594V13.6707V13.6819V13.6932V13.7045V13.7158V13.727V13.7383V13.7496V13.7609V13.7722V13.7835V13.7948V13.8061V13.8174V13.8287V13.84V13.8513V13.8626V13.874V13.8853V13.8966V13.9079V13.9193V13.9306V13.9419V13.9533V13.9646V13.9759V13.9873V13.9986V14.0099V14.0213V14.0326V14.0439V14.0553V14.0666V14.0779V14.0893V14.1006V14.1119V14.1233V14.1346V14.1459V14.1573V14.1686V14.1799V14.1913V14.2026V14.2139V14.2252V14.2366V14.2479V14.2592V14.2705V14.2818V14.2931V14.3044V14.3157V14.327V14.3383V14.3496V14.3609V14.3722V14.3834V14.3947V14.406V14.4172V14.4285V14.4398V14.451V14.4623V14.4735V14.4847V14.496V14.5072V14.5184V14.5296V14.5408V14.552V14.5632V14.5744V14.5856V14.5968V14.608V14.6191V14.6303V14.6414V14.6526V14.6637V14.6748V14.6859V14.6971V14.7082V14.7193V14.7303V14.7414V14.7525V14.7635V14.7746V14.7856V14.7967V14.8077V14.8187V14.8297V14.8407V14.8517V14.8627V14.8736V14.8846V14.8955V14.9065V14.9174V14.9283V14.9392V14.9501V14.961V14.9719V14.9827V14.9936V15.0044V15.0152V15.026V15.0368V15.0476V15.0584V15.0691V15.0799V15.0906V15.1013V15.1121V15.1227V15.1334V15.1441V15.1459C21.0646 15.2086 21.216 15.3194 21.542 15.4585C22.291 15.7779 23.4959 16 25 16C26.5041 16 27.709 15.7779 28.458 15.4585C28.784 15.3194 28.9354 15.2086 29 15.1459V15.1396V15.132V15.1243V15.1165V15.1087V15.1009V15.093V15.0851V15.0772V15.0692V15.0612V15.0531V15.045V15.0369V15.0287V15.0205V15.0123V15.004V14.9957V14.9874V14.979V14.9706V14.9622V14.9537V14.9452V14.9366V14.928V14.9194V14.9108V14.9021V14.8934V14.8847V14.8759V14.8671V14.8582V14.8494V14.8405V14.8315V14.8226V14.8136V14.8046V14.7955V14.7864V14.7773V14.7682V14.759V14.7498V14.7405V14.7313V14.722V14.7127V14.7033V14.694V14.6846V14.6751V14.6657V14.6562V14.6467V14.6372V14.6276V14.618V14.6084V14.5988V14.5891V14.5794V14.5697V14.56V14.5502V14.5404V14.5306V14.5208V14.5109V14.501V14.4911V14.4812V14.4713V14.4613V14.4513V14.4413V14.4312V14.4212V14.4111V14.401V14.3909V14.3807V14.3705V14.3604V14.3502V14.3399V14.3297V14.3194V14.3091V14.2988V14.2885V14.2782V14.2678V14.2574V14.247V14.2366V14.2262V14.2157V14.2053V14.1948V14.1843V14.1738V14.1632V14.1527V14.1421V14.1316V14.121V14.1104V14.0997V14.0891V14.0784V14.0678V14.0571V14.0464V14.0357V14.025V14.0142V14.0035V13.9927V13.982V13.9712V13.9604V13.9496V13.9387V13.9279V13.9171V13.9062V13.8953V13.8845V13.8736V13.8627V13.8518V13.8409V13.8299V13.819V13.8081V13.7971V13.7862V13.7752V13.7642V13.7532V13.7422V13.7312V13.7202V13.7092V13.6982V13.6872V13.6761V13.6651V13.654V13.643V13.6319V13.6209V13.6098V13.5987V13.5877V13.5766V13.5655V13.5544V13.5433V13.5322V13.5211V13.51V13.4989V13.4878V13.4767V13.4656V13.4545V13.4434V13.4322V13.4211V13.41V13.3989V13.3878V13.3766V13.3655V13.3544V13.3433V13.3321V13.321V13.3099V13.2988V13.2877V13.2765V13.2654V13.2543V13.2432V13.2361ZM29.0419 15.0893C29.0447 15.0899 29.0398 15.1028 29.0191 15.1261C29.0288 15.1003 29.0392 15.0886 29.0419 15.0893ZM20.9581 15.0893C20.9608 15.0886 20.9712 15.1003 20.9809 15.1261C20.9602 15.1028 20.9553 15.0899 20.9581 15.0893Z",fill:"currentColor"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M29 13.2361C30.2275 12.6868 31 11.8885 31 11V13V19C31 20.7949 28.3137 22 25 22C21.6863 22 19 20.7949 19 19V13V11C19 11.8885 19.7725 12.6868 21 13.2361V13.2457V13.2647V13.2838V13.3029V13.3221V13.3413V13.3605V13.3798V13.3992V13.4185V13.438V13.4574V13.4769V13.4965V13.5161V13.5357V13.5554V13.5751V13.5948V13.6146V13.6344V13.6543V13.6741V13.6941V13.714V13.734V13.7541V13.7741V13.7942V13.8144V13.8345V13.8547V13.8749V13.8952V13.9155V13.9358V13.9561V13.9765V13.9969V14.0174V14.0378V14.0583V14.0788V14.0994V14.1199V14.1405V14.1611V14.1818V14.2024V14.2231V14.2438V14.2646V14.2853V14.3061V14.3269V14.3477V14.3686V14.3894V14.4103V14.4312V14.4521V14.473V14.494V14.515V14.5359V14.5569V14.5779V14.599V14.62V14.6411V14.6621V14.6832V14.7043V14.7254V14.7465V14.7677V14.7888V14.81V14.8311V14.8523V14.8735V14.8947V14.9158V14.937V14.9583V14.9795V15.0007V15.0219V15.0431V15.0644V15.0856V15.1069V15.1281V15.1494V15.1706V15.1919V15.2131V15.2344V15.2556V15.2769V15.2981V15.3194V15.3406V15.3619V15.3831V15.4043V15.4256V15.4468V15.468V15.4893V15.5105V15.5317V15.5529V15.5741V15.5953V15.6165V15.6376V15.6588V15.68V15.7011V15.7222V15.7434V15.7645V15.7856V15.8067V15.8278V15.8488V15.8699V15.8909V15.9119V15.9329V15.9539V15.9749V15.9959V16.0168V16.0377V16.0586V16.0795V16.1004V16.1212V16.1421V16.1629V16.1837V16.2044V16.2252V16.2459V16.2666V16.2873V16.3079V16.3286V16.3492V16.3698V16.3903V16.4108V16.4313V16.4518V16.4723V16.4927V16.5131V16.5334V16.5538V16.5741V16.5944V16.6146V16.6348V16.655V16.6751V16.6953V16.7153V16.7354V16.7554V16.7754V16.7953V16.8152V16.8351V16.855V16.8748V16.8945V16.9142V16.9339V16.9536V16.9732V16.9928V17.0123V17.0318V17.0512V17.0706V17.09V17.1093V17.1286V17.1478V17.167V17.1862V17.2053V17.2243V17.2433V17.2623V17.2812V17.3001V17.3189V17.3377V17.3564V17.3751V17.3937V17.4123V17.4308V17.4493V17.4677V17.4861V17.5044V17.5227V17.5409V17.559V17.5771V17.5952V17.6132V17.6311V17.649V17.6668V17.6846V17.7023V17.72V17.7375V17.7551V17.7726V17.79V17.8073V17.8246V17.8418V17.859V17.8761V17.8932V17.9101V17.927V17.9439V17.9607V17.9774V17.9941V18.0106V18.0272V18.0436V18.06V18.0763V18.0926V18.1088V18.1249V18.1409V18.1569V18.1728V18.1886V18.2044V18.22V18.2357V18.2512V18.2667V18.282V18.2974V18.3126V18.3278V18.3428V18.3579V18.3728V18.3876V18.4024V18.4171V18.4317V18.4463V18.4607V18.4751V18.4894V18.5036V18.5178V18.5318V18.5458V18.5597V18.5735V18.5872V18.6008V18.6144V18.6278V18.6412V18.6545V18.6677V18.6808V18.6938V18.7068V18.7196V18.7324V18.745V18.7576V18.7701V18.7825V18.7948V18.807V18.8191V18.8312V18.8431V18.8549V18.8667V18.8783V18.8899V18.9013V18.9127V18.9239V18.9341C21.0457 19.0021 21.1957 19.1633 21.6288 19.3729C22.3708 19.7321 23.5531 20 25 20C26.4469 20 27.6292 19.7321 28.3712 19.3729C28.8043 19.1633 28.9543 19.0021 29 18.9341V18.9314V18.9232V18.9148V18.9064V18.8978V18.889V18.8802V18.8712V18.8621V18.8529V18.8436V18.8342V18.8246V18.8149V18.8051V18.7952V18.7852V18.7751V18.7648V18.7545V18.744V18.7334V18.7227V18.7119V18.701V18.69V18.6788V18.6676V18.6562V18.6448V18.6332V18.6215V18.6098V18.5979V18.5859V18.5738V18.5616V18.5493V18.5369V18.5244V18.5118V18.4991V18.4863V18.4733V18.4603V18.4472V18.434V18.4207V18.4073V18.3938V18.3802V18.3666V18.3528V18.3389V18.3249V18.3109V18.2967V18.2825V18.2681V18.2537V18.2392V18.2246V18.2099V18.1951V18.1802V18.1652V18.1502V18.1351V18.1198V18.1045V18.0891V18.0737V18.0581V18.0425V18.0267V18.0109V17.995V17.9791V17.963V17.9469V17.9307V17.9144V17.898V17.8816V17.865V17.8484V17.8318V17.815V17.7982V17.7813V17.7643V17.7473V17.7302V17.713V17.6957V17.6784V17.661V17.6435V17.6259V17.6083V17.5907V17.5729V17.5551V17.5372V17.5193V17.5012V17.4832V17.465V17.4468V17.4285V17.4102V17.3918V17.3734V17.3549V17.3363V17.3176V17.2989V17.2802V17.2614V17.2425V17.2236V17.2046V17.1855V17.1665V17.1473V17.1281V17.1088V17.0895V17.0702V17.0507V17.0313V17.0118V16.9922V16.9726V16.9529V16.9332V16.9134V16.8936V16.8737V16.8538V16.8339V16.8139V16.7938V16.7737V16.7536V16.7334V16.7132V16.6929V16.6726V16.6523V16.6319V16.6115V16.591V16.5705V16.55V16.5294V16.5088V16.4881V16.4674V16.4467V16.426V16.4052V16.3843V16.3635V16.3426V16.3217V16.3007V16.2797V16.2587V16.2376V16.2166V16.1954V16.1743V16.1531V16.132V16.1107V16.0895V16.0682V16.0469V16.0256V16.0043V15.9829V15.9615V15.9401V15.9187V15.8972V15.8757V15.8543V15.8327V15.8112V15.7897V15.7681V15.7465V15.7249V15.7033V15.6816V15.66V15.6383V15.6166V15.595V15.5733V15.5515V15.5298V15.5081V15.4863V15.4646V15.4428V15.421V15.3992V15.3774V15.3556V15.3338V15.312V15.2902V15.2684V15.2465V15.2247V15.2029V15.181V15.1592V15.1373V15.1155V15.0936V15.0718V15.0499V15.0281V15.0063V14.9844V14.9626V14.9407V14.9189V14.8971V14.8753V14.8534V14.8316V14.8098V14.788V14.7662V14.7445V14.7227V14.7009V14.6792V14.6574V14.6357V14.614V14.5923V14.5706V14.5489V14.5272V14.5056V14.4839V14.4623V14.4407V14.4191V14.3975V14.376V14.3544V14.3329V14.3114V14.2899V14.2685V14.247V14.2256V14.2042V14.1829V14.1615V14.1402V14.1189V14.0976V14.0763V14.0551V14.0339V14.0128V13.9916V13.9705V13.9494V13.9283V13.9073V13.8863V13.8654V13.8444V13.8235V13.8026V13.7818V13.761V13.7402V13.7195V13.6988V13.6781V13.6575V13.6369V13.6164V13.5959V13.5754V13.5549V13.5345V13.5142V13.4939V13.4736V13.4534V13.4332V13.413V13.3929V13.3729V13.3529V13.3329V13.313V13.2931V13.2733V13.2535V13.2361ZM29.0175 18.8988C29.0186 18.899 29.0166 18.9065 29.0086 18.9204C29.0125 18.9055 29.0165 18.8985 29.0175 18.8988ZM20.9825 18.8988C20.9835 18.8985 20.9875 18.9055 20.9914 18.9204C20.9834 18.9065 20.9814 18.899 20.9825 18.8988Z",fill:"currentColor"})]}),action:(e,t)=>{let{nextId:n,trigger:s}=t;return e({type:"insertBefore",id:n,node:{mode:"sql"},trigger:s,source:"nodeInserterMenu"})}},{type:"large",label:"File attachment",category:"Data",description:"Upload a local file",icon:e=>(0,s.jsx)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:(0,s.jsx)("path",{d:"M24.7851 9.69193L24.0524 10.3725L24.7851 9.69193ZM20.2008 14.0556L19.4849 14.7538L20.2008 14.0556ZM22.4652 13.2134L28.5448 19.4466L29.9766 18.0501L23.8969 11.8169L22.4652 13.2134ZM27.6793 20.2908L20.9167 13.3574L19.4849 14.7538L26.2476 21.6873L27.6793 20.2908ZM24.0524 10.3725L30.5173 17.3321L31.9827 15.9709L25.5177 9.01134L24.0524 10.3725ZM20.7743 10.4956C21.5997 9.46123 23.1518 9.40298 24.0524 10.3725L25.5177 9.01134C23.785 7.14606 20.7991 7.25813 19.2111 9.24804L20.7743 10.4956ZM20.9167 13.3574C20.1543 12.5758 20.0933 11.3489 20.7743 10.4956L19.2111 9.24804C17.9009 10.8898 18.0183 13.2502 19.4849 14.7538L20.9167 13.3574ZM28.5448 20.2908C28.3076 20.534 27.9165 20.534 27.6793 20.2908L26.2476 21.6873C27.2697 22.7352 28.9544 22.7352 29.9766 21.6873L28.5448 20.2908ZM28.5448 19.4466C28.7739 19.6814 28.7739 20.056 28.5448 20.2908L29.9766 21.6873C30.9633 20.6756 30.9633 19.0617 29.9766 18.0501L28.5448 19.4466Z",fill:"currentColor"})}),filter:e=>{let{allowFileAttachments:t}=e;return t},action:(e,t)=>{let{nextId:n}=t;(0,tt.Z)().then(t=>{e({type:"attachLocalFiles",files:t,beforeId:n,source:"filesPane",trigger:"click"})})}},{type:"large",label:"Cloud file",category:"Data",description:"Load a file from Google or Microsoft",icon:e=>(0,s.jsx)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M30.057 10.115C29.2921 9.31814 28.026 9.29226 27.2292 10.0572L24.3436 12.8272L22.9585 11.3844L25.8442 8.61437C27.4379 7.08452 29.97 7.13628 31.4998 8.72997C33.0297 10.3237 32.9779 12.8558 31.3842 14.3856L28.4986 17.1557L27.1136 15.7129L29.9992 12.9428C30.7961 12.1779 30.822 10.9118 30.057 10.115ZM19.9571 19.8102C20.722 20.6071 21.9881 20.6329 22.7849 19.868L25.6706 17.098L27.0556 18.5408L24.1699 21.3108C22.5763 22.8407 20.0441 22.7889 18.5143 21.1952C16.9844 19.6015 17.0362 17.0694 18.6299 15.5396L21.5155 12.7695L22.9005 14.2123L20.0149 16.9824C19.218 17.7473 19.1922 19.0134 19.9571 19.8102ZM26.4787 12.1636L22.1503 16.3187L23.5353 17.7615L27.8638 13.6065L26.4787 12.1636Z",fill:"currentColor"})}),filter:e=>{let{allowPrivateData:t}=e;return t},action:e=>e({type:"showModal",modal:"addCloudFile"})},...eJ.B7.map(e=>tc(e,"js","Data"))]},{title:"Tables",items:[{type:"large",label:"Data table",category:"Tables",description:"Filter and summarize tabular data",icon:e=>{let{width:t="50",height:n="30",viewBox:r="-17 -7 50 30",...l}=e;return(0,s.jsx)(e7.i,{width:t,height:n,viewBox:r,...l})},action:(e,t)=>{let{nextId:n,trigger:s}=t;return e({type:"insertBefore",id:n,node:{mode:"table"},trigger:s,source:"nodeInserterMenu"})}},{...tc(eJ.Cq.find(e=>{let{label:t}=e;return"Table\xa0input"===t}),"js","Tables"),label:"JavaScript table"},{...tc(eJ.L7.find(e=>{let{label:t}=e;return"Table"===t}),"md","Tables"),label:"Markdown table"},{label:"HTML table",category:"Tables",description:"Basic custom table layout",icon:e=>(0,s.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor",...e,children:[(0,s.jsxs)("g",{fill:"currentColor",children:[(0,s.jsx)("path",{d:"M4 5C4 4.44772 4.44772 4 5 4H18V10H4V5Z",fill:"currentColor"}),(0,s.jsx)("rect",{x:"4",y:"11",width:"14",height:"7",fillOpacity:"0.35"}),(0,s.jsx)("path",{d:"M4 19H18V26H5C4.44772 26 4 25.5523 4 25V19Z",fillOpacity:"0.35"}),(0,s.jsx)("rect",{x:"18",y:"4",width:"14",height:"6",fill:"currentColor"}),(0,s.jsx)("rect",{x:"18",y:"11",width:"14",height:"7",fillOpacity:"0.35"}),(0,s.jsx)("rect",{x:"18",y:"19",width:"14",height:"7",fillOpacity:"0.35"}),(0,s.jsx)("path",{d:"M32 4H45C45.5523 4 46 4.44772 46 5V10H32V4Z",fill:"currentColor"}),(0,s.jsx)("rect",{x:"32",y:"11",width:"14",height:"7",fillOpacity:"0.35"}),(0,s.jsx)("path",{d:"M32 19H46V25C46 25.5523 45.5523 26 45 26H32V19Z",fillOpacity:"0.35"})]}),(0,s.jsx)("path",{d:"M18 26V4",stroke:"white"}),(0,s.jsx)("path",{d:"M32 26V4",stroke:"white"})]}),type:"large",action:(e,t)=>{let{previousId:n}=t;return e({type:"insertSnippet",apply:td('<table>\n  <thead>\n    <tr>\n      <th>Name</th>\n      <th>Fuel economy</th>\n      <th>Year</th>\n    </tr>\n  </thead>\n  <tbody>\n    ${cars.slice(0, 5).map(car => htl.html`<tr>\n      <td>${car["name"]}</td>\n      <td>${car["economy (mpg)"]} mpg</td>\n      <td>’${car["year"]}</td>\n    </tr>`)}\n  </tbody>\n</table>'),label:"Insert",mode:"html",afterId:n})}}]},{title:"Plot",items:[{type:"large",label:"Chart",category:"Plot",description:"Quick plots without code",icon:e=>{let{width:t="50",height:n="30",viewBox:r="-17 -7 50 30",...l}=e;return(0,s.jsx)(e1.k,{width:t,height:n,viewBox:r,...l})},action:(e,t)=>{let{nextId:n,trigger:s}=t;return e({type:"insertBefore",id:n,node:{mode:"chart"},trigger:s,source:"nodeInserterMenu"})}},...eJ.aS.map(e=>tc(e,"js","Plot"))]},{title:"Maps",items:[{label:"Interactive map",category:"Maps",description:"Zoomable map with Leaflet",thumbnail:e=>(0,s.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,s.jsx)("path",{d:"M29 19H31V20H30V22H29V19Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M38 23V21V20H40V19H42V20H43V21H44V23H43V24H42V25H41V23H38Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M46 23V24H45V25H44H43V24H44H45V23H46Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M41 18V17H43V18H44V19H42V18H41Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M37 19H40V18H39V17H40V16H41V15H39V16H38V17H36V18H37V19Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M23 11H24H25V10H26V9H27H28V10H27V11H29V12H30V13H32V14H33V16H34V17H35V14H36V16H38V14H39V11H38V10H39H40V12H41V9H40V8H39V7H40H41V8H42V5H39V4H37V5H34V4H31V5H30V6H29V4H28V6H27V5H26V7H24V8H23V9H22V11H23Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M24 11V12H29V13H30V15H28V16H30V17H29V18H28V20V21H27V23H26V24H25V23H24V17H21V16H20V14H21V13H22V12H23V11H24Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M6 12V9H5V8H4V7H5V6H6V5H8V6H12V5H13H14V4H16V6H14V7H16V9H15V10H14V11H13V12H12V13H10V14V15H11H15V16H16V17H17V18H19V20H18V22H17V24H16V25H15V27H16V28H15V27H13V21H12V20H11V16H9V15H8V13H7V12H6Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M17 5V4H21V5H20V6H19V7H18V5H17Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M21 6H22V7H21V6Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M23 3H25V4H23V3Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M23 5H25V6H24V7H23V5Z",fill:"currentColor"})]}),apply:(0,eJ.eu)(e=>"#{1:".concat(e("map"),'} = {\n  const container = yield htl.html`<div style="height: 500px;">`;\n  const map = L.map(container).setView([#{2:37.774}, #{3:-122.423}], #{4:13});\n  L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {\n    attribution: "\xa9 <a href=https://www.openstreetmap.org/copyright>OpenStreetMap</a> contributors"\n  }).addTo(map);\n}'))}].map(e=>tc(e,"js","Maps"))},{title:"Trees and Networks",items:[{label:"Tidy tree",description:"Tree diagram with Plot",thumbnail:e=>(0,s.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,s.jsx)("path",{d:"M10 15H14C15.1046 15 16 14.1046 16 13V11C16 9.89543 16.8954 9 18 9H22 M10 15H14C15.1046 15 16 15.8954 16 17V19C16 20.1046 16.8954 21 18 21H22 M40 4H36C34.8954 4 34 4.89543 34 6V7C34 8.10457 33.1046 9 32 9H28H40 M32 21H28H40M32 21C33.1046 21 34 20.1046 34 19V18C34 16.8954 34.8954 16 36 16H40M32 21C33.1046 21 34 21.8954 34 23V24C34 25.1046 34.8954 26 36 26H40",stroke:"currentColor",strokeOpacity:"0.35",strokeWidth:"2"}),(0,s.jsxs)("g",{fill:"currentColor",children:[(0,s.jsx)("rect",{x:"5",y:"14",width:"4",height:"2",rx:"0.5"}),(0,s.jsx)("rect",{x:"23",y:"8",width:"4",height:"2",rx:"0.5"}),(0,s.jsx)("rect",{x:"23",y:"20",width:"4",height:"2",rx:"0.5"}),(0,s.jsx)("rect",{x:"41",y:"15",width:"4",height:"2",rx:"0.5"}),(0,s.jsx)("rect",{x:"41",y:"20",width:"4",height:"2",rx:"0.5"}),(0,s.jsx)("rect",{x:"41",y:"25",width:"4",height:"2",rx:"0.5"}),(0,s.jsx)("rect",{x:"41",y:"3",width:"4",height:"2",rx:"0.5"}),(0,s.jsx)("rect",{x:"41",y:"8",width:"4",height:"2",rx:"0.5"})]})]}),mode:"js",type:"snippet",apply:(0,eG.DB)('Plot.plot({\n  axis: null,\n  margin: 20,\n  marginRight: 120,\n  marks: [\n    Plot.tree(flare.slice(0, 50), {path: "name", delimiter: "."})\n  ]\n})')},{label:"Circle packing",description:"Nested hierarchy with D3",thumbnail:e=>(0,s.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,s.jsxs)("g",{stroke:"currentColor",children:[(0,s.jsx)("circle",{cx:"33",cy:"13",r:"9.5"}),(0,s.jsxs)("g",{strokeOpacity:"0.35",children:[(0,s.jsx)("circle",{cx:"14.5",cy:"10.5",r:"7",stroke:"#C4C4C4"}),(0,s.jsx)("circle",{cx:"20",cy:"22",r:"3.5",stroke:"#C4C4C4"})]})]}),(0,s.jsxs)("g",{fill:"currentColor",children:[(0,s.jsx)("circle",{cx:"30",cy:"9",r:"3"}),(0,s.jsx)("circle",{cx:"37",cy:"14",r:"4"}),(0,s.jsx)("circle",{cx:"29",cy:"16",r:"3"}),(0,s.jsxs)("g",{fillOpacity:"0.35",children:[(0,s.jsx)("circle",{cx:"16.5",cy:"12.5",r:"2.5"}),(0,s.jsx)("circle",{cx:"12.5",cy:"8.5",r:"2.5"}),(0,s.jsx)("circle",{cx:"20",cy:"22",r:"2"})]})]})]}),mode:"js",type:"snippet",apply:(0,eG.DB)('Pack(flare, {\n  path: (d) => d.name.replaceAll(".", "/"), // e.g. flare/animate/Easing\n  label: (d) => d.name.split(".").pop(), // display text\n  value: (d) => d?.size, // area of each circle\n  title: (d, n) => [n.id, n.value.toLocaleString()].join("\\n"), // hover text\n  width,\n  height: 720\n})'),imports:[["Pack","@d3/pack"]]},{label:"Icicle partition",description:"Left-to-right hierarchy with D3",thumbnail:e=>(0,s.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor",...e,children:[(0,s.jsx)("rect",{x:"5",y:"5",width:"12",height:"8"}),(0,s.jsx)("rect",{x:"18",y:"9",width:"13",height:"4"}),(0,s.jsx)("rect",{x:"32",y:"11",width:"13",height:"2"}),(0,s.jsxs)("g",{fillOpacity:"0.35",children:[(0,s.jsx)("rect",{x:"5",y:"14",width:"12",height:"6"}),(0,s.jsx)("rect",{x:"18",y:"14",width:"13",height:"2"}),(0,s.jsx)("rect",{x:"18",y:"17",width:"13",height:"3"}),(0,s.jsx)("path",{d:"M18 5H31V8H18V5Z"}),(0,s.jsx)("rect",{x:"32",y:"9",width:"13",height:"1"}),(0,s.jsx)("rect",{x:"32",y:"17",width:"13",height:"1"}),(0,s.jsx)("rect",{x:"32",y:"19",width:"13",height:"1"}),(0,s.jsx)("path",{d:"M32 21H45V24C45 24.5523 44.5523 25 44 25H32V21Z"}),(0,s.jsx)("rect",{x:"5",y:"21",width:"12",height:"4"}),(0,s.jsx)("path",{d:"M18 21H31V25H18V21Z"})]})]}),mode:"js",type:"snippet",apply:(0,eG.DB)('Icicle(flare, {\n  path: (d) => d.name.replaceAll(".", "/"), // e.g. flare/animate/Easing\n  label: (d) => d.name.split(".").pop(), // display text\n  value: (d) => d?.size, // height of each rect\n  title: (d, n) => [n.id, n.value.toLocaleString()].join("\\n"), // hover text\n  width,\n  height: 500\n})'),imports:[["Icicle","@d3/icicle"]]},{label:"Sunburst partition",description:"Radial hierarchy with D3",thumbnail:e=>(0,s.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor",...e,children:[(0,s.jsx)("path",{fillOpacity:"0.35",d:"M23.9648 12.1524L21.9997 8.67561C22.7855 8.30283 23.6335 8.07995 24.5 8.0179V12.0116C24.3177 12.0421 24.1386 12.0892 23.9648 12.1524Z M24.5 7.01473C23.4609 7.07979 22.4438 7.34711 21.5061 7.80229L19.5357 4.31631C20.0106 4.07343 20.4998 3.86315 21 3.68631C22.1242 3.28884 23.3038 3.06032 24.5 3.01044V7.01473Z M30.1374 21.1337L32.8953 24.0368C32.072 24.7562 31.1554 25.3586 30.1716 25.8284C29.6279 26.0881 29.0637 26.3073 28.4834 26.4833C26.595 27.0562 24.5944 27.1544 22.6589 26.7694C20.7234 26.3844 18.9128 25.5281 17.3873 24.2761C17.2123 24.1325 17.0417 23.9843 16.8756 23.8315L19.7071 21C19.7783 21.0628 19.8507 21.1244 19.9243 21.1848C20.9414 22.0195 22.1486 22.5905 23.4391 22.8472C24.6441 23.0869 25.8869 23.0456 27.0713 22.7282C27.1176 22.7158 27.1637 22.703 27.2098 22.6897C27.2474 22.6789 27.285 22.6678 27.3225 22.6564C28.3561 22.3429 29.3131 21.8241 30.1374 21.1337Z M26.6958 17.511L29.4464 20.4064C28.7363 20.9905 27.9161 21.4304 27.032 21.6986C26.7691 21.7783 26.5025 21.8423 26.2336 21.8905C25.3756 22.0441 24.494 22.0365 23.6344 21.8655C22.5053 21.6409 21.4491 21.1414 20.5593 20.4111C20.5111 20.3716 20.4635 20.3314 20.4165 20.2907L23.2404 17.4667C23.5891 17.7154 23.9873 17.8879 24.4089 17.9718C24.8976 18.069 25.4027 18.0442 25.8796 17.8995C26.1706 17.8112 26.4456 17.68 26.6958 17.511Z M21.9927 14.6304C21.9897 14.6546 21.987 14.6788 21.9846 14.703C21.9358 15.1989 22.01 15.6992 22.2007 16.1595C22.2888 16.3723 22.4006 16.5735 22.5333 16.7596L19.7093 19.5836C19.2192 19.0178 18.8213 18.3751 18.5328 17.6788C18.0923 16.6153 17.9209 15.4595 18.0337 14.3139C18.0609 14.0381 18.1043 13.765 18.1635 13.4959L21.9927 14.6304Z M22.2768 13.6716C22.3365 13.5492 22.4046 13.4306 22.4807 13.3167C22.6508 13.0621 22.8579 12.8357 23.0942 12.6444L21.1291 9.16767C21.0857 9.19646 21.0427 9.22572 21 9.25545C20.2847 9.75353 19.6666 10.3823 19.1797 11.111C18.8808 11.5585 18.6355 12.0371 18.4476 12.5371L22.2768 13.6716Z M17.4858 12.2521C17.7036 11.6563 17.9924 11.0864 18.3475 10.5549C18.9506 9.65233 19.7297 8.88393 20.6355 8.29435L18.6652 4.80836C17.2163 5.70891 15.9735 6.90978 15.0224 8.33317C14.4431 9.20009 13.9815 10.1354 13.6465 11.1145L17.4858 12.2521Z M13.3624 12.0733C13.2182 12.6467 13.1161 13.2317 13.0578 13.8238C12.8644 15.7877 13.1583 17.769 13.9134 19.5922C14.4538 20.8968 15.2184 22.0916 16.1685 23.1244L19 20.2929C18.4181 19.6333 17.947 18.8799 17.6081 18.0618C17.1046 16.8462 16.9086 15.5252 17.0376 14.2158C17.071 13.8767 17.1259 13.5411 17.2017 13.2109L13.3624 12.0733Z"}),(0,s.jsx)("path",{d:"M25.5 3.01044V7.01473C26.6847 7.0889 27.8376 7.42579 28.8749 8.00002C28.9168 8.02321 28.9585 8.04678 29 8.07074C29.151 8.15792 29.2995 8.2502 29.4451 8.34749C30.7355 9.20975 31.7468 10.4283 32.3565 11.8541L36.1589 10.5866C36.1353 10.5269 36.1112 10.4673 36.0866 10.4078C35.1783 8.2151 33.6402 6.34096 31.6668 5.02238C30.8325 4.46488 29.9361 4.01728 29 3.68631C27.8778 3.28956 26.6984 3.0604 25.5 3.01044Z M36.4877 11.5311L32.6915 12.7965C32.9952 13.8564 33.0769 14.9692 32.9298 16.0647L36.8758 16.7224C37.1281 14.9823 36.9947 13.2101 36.4877 11.5311Z M36.6911 17.7054L32.7349 17.046C32.7327 17.0545 32.7304 17.0629 32.7282 17.0713C32.7158 17.1176 32.7029 17.1638 32.6897 17.2098C32.3434 18.4149 31.7181 19.5237 30.8624 20.445L33.6203 23.3481C34.5276 22.4112 35.2716 21.3374 35.8284 20.1716C36.2033 19.3866 36.4933 18.56 36.6911 17.7054Z M25.5 8.0179V12.0116C25.9214 12.0821 26.325 12.2413 26.6834 12.4807C27.1816 12.8136 27.57 13.2869 27.7993 13.8405C28.0286 14.3942 28.0887 15.0034 27.9717 15.5911C27.8826 16.0395 27.6935 16.4599 27.4208 16.8222L30.1714 19.7177C31.0296 18.777 31.6163 17.6184 31.8655 16.3657C31.8742 16.3217 31.8826 16.2777 31.8904 16.2336C32.1262 14.9168 31.9798 13.5589 31.4672 12.3212C30.9545 11.0836 30.0978 10.0199 29 9.25546C28.9633 9.22988 28.9263 9.20463 28.889 9.17973C27.8769 8.50346 26.7084 8.10442 25.5 8.0179Z"})]}),mode:"js",type:"snippet",apply:(0,eG.DB)('Sunburst(flare, {\n  path: (d) => d.name.replaceAll(".", "/"), // e.g. flare/animate/Easing\n  label: (d) => d.name.split(".").pop(), // display text\n  value: (d) => d?.size, // angle of each arc\n  title: (d, n) => [n.id, n.value.toLocaleString()].join("\\n"), // hover text\n  width,\n  height: 720\n})'),imports:[["Sunburst","@d3/sunburst"]]},{label:"Treemap",description:"Nested hierarchy with D3",thumbnail:e=>(0,s.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor",...e,children:[(0,s.jsx)("rect",{x:"5",y:"5",width:"20",height:"12"}),(0,s.jsxs)("g",{fillOpacity:"0.35",children:[(0,s.jsx)("rect",{x:"26",y:"5",width:"18",height:"7"}),(0,s.jsx)("rect",{x:"26",y:"13",width:"9",height:"7"}),(0,s.jsx)("rect",{x:"36",y:"13",width:"8",height:"7"}),(0,s.jsx)("rect",{x:"5",y:"18",width:"20",height:"7"}),(0,s.jsx)("rect",{x:"26",y:"21",width:"12",height:"4"}),(0,s.jsx)("rect",{x:"39",y:"21",width:"5",height:"4"})]})]}),mode:"js",type:"snippet",apply:(0,eG.DB)('Treemap(flare, {\n  path: (d) => d.name.replaceAll(".", "/"), // e.g. flare/animate/Easing\n  label: (d) => d.name.split(".").pop(), // display text\n  group: (d) => d.name.split(".")[1], // for color; e.g. animate\n  value: (d) => d?.size, // area of each rect\n  title: (d, n) => [n.id, n.value.toLocaleString()].join("\\n"), // hover text\n  width,\n  height: 500\n})'),imports:[["Treemap","@d3/treemap"]]},{label:"Force-directed graph",description:"Node-link diagram with D3",thumbnail:e=>(0,s.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"currentColor",...e,children:[(0,s.jsx)("path",{fillOpacity:"0.35",d:"M9.45007 9.62691L14.221 13.8678C14.4808 13.2308 14.9531 12.7032 15.5499 12.3731L10.779 8.13226C10.5192 8.76917 10.0469 9.29678 9.45007 9.62691Z M19.6441 13.5815C19.8712 14.0038 20 14.4869 20 15C20 15.1908 19.9822 15.3773 19.9482 15.5582L27.3559 14.4186C27.1288 13.9962 27 13.5131 27 13C27 12.8093 27.0178 12.6227 27.0518 12.4418L19.6441 13.5815Z M32.0826 10.8407C32.5645 11.3055 32.8912 11.9302 32.9773 12.6294L37.9174 10.1593C37.4355 9.69448 37.1088 9.06979 37.0227 8.37064L32.0826 10.8407Z M41.4899 10.6045C41.051 10.8561 40.5423 11 40 11C39.8374 11 39.6778 10.9871 39.5222 10.9622L40.5101 16.3956C40.9491 16.1439 41.4577 16 42 16C42.1626 16 42.3222 16.0129 42.4778 16.0379L41.4899 10.6045Z M39.4982 20.6562C39.1834 20.1816 39 19.6122 39 19C39 18.9042 39.0045 18.8094 39.0133 18.7159L32.5018 20.3438C32.8166 20.8184 33 21.3878 33 22C33 22.0958 32.9955 22.1906 32.9867 22.2841L39.4982 20.6562Z M29 19.1707C29.3128 19.0602 29.6494 19 30 19C30.3506 19 30.6872 19.0602 31 19.1707V15.8293C30.6872 15.9399 30.3506 16 30 16C29.6494 16 29.3128 15.9399 29 15.8293V19.1707Z M32.0826 15.1593L39.0227 18.6294C39.1088 17.9302 39.4355 17.3055 39.9174 16.8407L32.9773 13.3706C32.8912 14.0698 32.5645 14.6945 32.0826 15.1593Z M15.7066 17.7076C15.0888 17.412 14.588 16.9112 14.2924 16.2934L11.2934 19.2924C11.9112 19.588 12.412 20.0888 12.7076 20.7066L15.7066 17.7076Z"}),(0,s.jsx)("circle",{cx:"8",cy:"7",r:"2"}),(0,s.jsx)("circle",{cx:"17",cy:"15",r:"2"}),(0,s.jsx)("circle",{cx:"10",cy:"22",r:"2"}),(0,s.jsx)("circle",{cx:"30",cy:"13",r:"2"}),(0,s.jsx)("circle",{cx:"42",cy:"19",r:"2"}),(0,s.jsx)("circle",{cx:"30",cy:"22",r:"2"}),(0,s.jsx)("circle",{cx:"40",cy:"8",r:"2"})]}),mode:"js",type:"snippet",apply:(0,eG.DB)("ForceGraph(miserables, {\n  nodeId: (d) => d.id, // node identifier, to match links\n  nodeGroup: (d) => d.group, // group identifier, for color\n  nodeTitle: (d) => d.id, // hover text\n  width,\n  height: 520,\n  invalidation // stop when the cell is re-run\n})"),imports:[["ForceGraph","@d3/force-directed-graph"]]},{label:"Graphviz",description:"Node-link diagram with DOT",thumbnail:e6,apply:tu("dot`digraph g {\n	rankdir = LR;\n	a -> b -> c;\n}`",4,1)},{label:"Mermaid",description:"Node-link diagram with Mermaid",thumbnail:e6,apply:tu("mermaid`graph LR\na-->b\nb-->c`",8,1)}].map(e=>tc(e,"js","Trees and Networks"))},{title:"Inputs",items:eJ.Cq.filter(e=>{let{label:t}=e;return"Table\xa0input"!==t}).map(e=>tc(e,"js","Inputs"))},{title:"Text",items:[...eJ.L7.filter(e=>{let{label:t}=e;return"Table"!==t}).map(e=>{let{label:t,description:n,apply:s,thumbnail:r}=e;return{label:t,description:null!=n?n:"",thumbnail:r||e5.Z,apply:s}}).map(e=>tc(e,"md","Text")),tc({label:"Mathematical formula",description:"Typeset math with TeX",thumbnail:e2.Z,type:"snippet",apply:tu("c = \\pm\\sqrt{a^2 + b^2}")},"tex","Text")]},{title:"Graphics",items:[{label:"D3 starter",category:"Graphics",description:"Scales, axes, margins, and a line",icon:e=>(0,s.jsx)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:(0,s.jsx)("path",{d:"M15 5H16.776C19.5414 5 22.1935 6.00089 24.149 7.78249C26.1044 9.56408 27.203 11.9804 27.203 14.5C27.203 17.0196 26.1044 19.4359 24.149 21.2175C22.1935 22.9991 19.5414 24 16.776 24H15V19.8242H16.776C18.3259 19.8242 19.8122 19.2632 20.9081 18.2648C22.004 17.2663 22.6197 15.9121 22.6197 14.5C22.6197 13.0879 22.004 11.7337 20.9081 10.7352C19.8122 9.73676 18.3259 9.17582 16.776 9.17582H15V5ZM23.3074 5H30.6406C31.849 4.99999 33.0323 5.31362 34.052 5.90417C35.0718 6.49472 35.8857 7.33774 36.3986 8.33453C36.9115 9.33132 37.1021 10.4406 36.9481 11.5325C36.7941 12.6244 36.3018 13.6538 35.5289 14.5C36.3018 15.3462 36.7941 16.3756 36.9481 17.4675C37.1021 18.5594 36.9115 19.6687 36.3986 20.6655C35.8857 21.6623 35.0718 22.5053 34.052 23.0958C33.0323 23.6864 31.849 24 30.6406 24H23.3074C25.1119 22.9702 26.5921 21.5313 27.6034 19.8242H30.6404C30.8736 19.8242 31.1046 19.7823 31.3201 19.701C31.5355 19.6197 31.7313 19.5005 31.8962 19.3502C32.0612 19.2 32.192 19.0216 32.2812 18.8253C32.3705 18.629 32.4164 18.4185 32.4164 18.206C32.4164 17.9935 32.3705 17.7831 32.2812 17.5868C32.192 17.3905 32.0612 17.2121 31.8962 17.0619C31.7313 16.9116 31.5355 16.7924 31.3201 16.7111C31.1046 16.6298 30.8736 16.5879 30.6404 16.5879H28.8644C29.1515 15.2083 29.1515 13.7917 28.8644 12.4121H30.6404C30.8736 12.4121 31.1046 12.3702 31.3201 12.2889C31.5355 12.2076 31.7313 12.0884 31.8962 11.9381C32.0612 11.7879 32.192 11.6095 32.2812 11.4132C32.3705 11.2169 32.4164 11.0065 32.4164 10.794C32.4164 10.5815 32.3705 10.371 32.2812 10.1747C32.192 9.9784 32.0612 9.80002 31.8962 9.64976C31.7313 9.49951 31.5355 9.38032 31.3201 9.299C31.1046 9.21768 30.8736 9.17582 30.6404 9.17582H27.6034C26.5921 7.46865 25.1119 6.02981 23.3074 5V5Z",fill:"currentColor"})}),type:"large",action:(e,t)=>{let{previousId:n}=t;return e({type:"insertSnippet",apply:(0,eJ.eu)(e=>"".concat(e("chart"),' = {\n  const width = 640;\n  const height = 400;\n  const margin = {top: 20, right: 30, bottom: 30, left: 40};\n\n  const x = d3.scaleUtc()\n      .domain(d3.extent(aapl, d => d.Date))\n      .range([margin.left, width - margin.right]);\n\n  const y = d3.scaleLinear()\n      .domain([0, d3.max(aapl, d => d.Close)])\n      .range([height - margin.bottom, margin.top]);\n\n  const svg = d3.create("svg")\n      .attr("width", width)\n      .attr("height", height);\n\n  svg.append("g")\n      .attr("transform", `translate(0,$\\{height - margin.bottom})`)\n      .call(d3.axisBottom(x));\n\n  svg.append("g")\n      .attr("transform", `translate($\\{margin.left},0)`)\n      .call(d3.axisLeft(y));\n\n  svg.append("path")\n      .attr("fill", "none")\n      .attr("stroke", "steelblue")\n      .attr("stroke-width", 1.5)\n      .attr("d", d3.line()\n        .x(d => x(d.Date))\n        .y(d => y(d.Close))\n        (aapl));\n\n  return svg.node();\n}')),label:"D3 starter",mode:"js",afterId:n})}},{label:"SVG",category:"Graphics",description:"Expressive declarative graphics",icon:e=>(0,s.jsx)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",...e,children:(0,s.jsx)("path",{d:"M35 12.2308C35 15.5 29 20.0769 25 24C21 20.0769 15 15.5 15 12.2308C15 8.96154 17 7 19.6667 7C22.3333 7 24.3333 9.61538 25 10.9231C25.6667 9.61538 27.6667 7 30.3333 7C33 7 35 8.96154 35 12.2308Z",stroke:"currentColor",fill:"none",strokeWidth:"2"})}),type:"large",action:(e,t)=>{let{previousId:n}=t;return e({type:"insertSnippet",apply:td('<svg width=${width} height="200" viewBox="0 0 ${width} 200">\n  <rect width="100%" height="100%" fill="hsl(216deg 100% 13%)" />\n</svg>'),label:"SVG",mode:"html",afterId:n})}},{label:"Canvas",category:"Graphics",description:"Low-level, high-performance",icon:e=>(0,s.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",...e,children:[(0,s.jsx)("rect",{x:"30",y:"16",width:"9",height:"9",rx:"1",stroke:"currentColor",fill:"none",strokeWidth:"2"}),(0,s.jsx)("circle",{cx:"25.5",cy:"8.5",r:"5.5",fill:"currentColor",fillOpacity:"0.35"}),(0,s.jsx)("path",{d:"M16.433 12.75L21.6292 21.75C21.8216 22.0833 21.5811 22.5 21.1962 22.5H10.8038C10.4189 22.5 10.1784 22.0833 10.3708 21.75L15.567 12.75C15.7594 12.4167 16.2406 12.4167 16.433 12.75Z",fill:"currentColor",stroke:"#currentColor"})]}),type:"large",action:(e,t)=>{let{previousId:n}=t;return e({type:"insertSnippet",apply:(0,eJ.eu)(e=>"".concat(e("canvas"),' = {\n  const context = DOM.context2d(width, 200);\n  context.fillStyle = "hsl(216deg 100% 13%)";\n  context.fillRect(0, 0, width, 200);\n  return context.canvas;\n}')),label:"Canvas",mode:"js",afterId:n})}}]},{title:"Notifications",items:[{label:"Email notification",type:"large",category:"Notifications",description:"Email a workspace member",icon:e=>(0,s.jsx)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:(0,s.jsx)("path",{d:"M25.543 23.1709C20.8496 23.1709 17.624 20.3057 17.624 15.6475V15.6387C17.624 11.2178 20.7266 8.20312 25.2002 8.20312C29.5156 8.20312 32.3633 10.875 32.3633 14.9883V14.9971C32.3633 17.7568 31.0977 19.4707 29.2256 19.4707C28.1533 19.4707 27.3096 18.9434 26.9053 18.126L26.7998 17.9326H26.7207C26.2461 18.9697 25.3936 19.5146 24.2949 19.5146C22.5107 19.5146 21.2803 17.9941 21.2803 15.665V15.6562C21.2803 13.4941 22.5635 11.9736 24.2861 11.9736C25.2793 11.9736 26.0791 12.4746 26.4395 13.3008H26.5098V12.1758H28.5312V16.2012C28.5312 17.1768 28.8564 17.7129 29.3926 17.7129C30.0869 17.7129 30.5352 16.7285 30.5352 15.1025V15.0938C30.5352 11.8242 28.4697 9.77637 25.1738 9.77637C21.7725 9.77637 19.4521 12.1406 19.4521 15.6562V15.665C19.4521 19.4268 21.9131 21.5625 25.7275 21.5625C26.7822 21.5625 27.8281 21.4043 28.6982 21.1055V22.6875C27.7314 23.0127 26.6768 23.1709 25.543 23.1709ZM24.9189 17.7041C25.7363 17.7041 26.2725 16.957 26.2725 15.7266V15.7002C26.2725 14.5049 25.7363 13.7754 24.9189 13.7754C24.1016 13.7754 23.5918 14.4961 23.5918 15.7178V15.7266C23.5918 16.9746 24.1016 17.7041 24.9189 17.7041Z",fill:"currentColor"})}),action:(e,t)=>{let{previousId:n,currentUser:s}=t;return e({type:"insertSnippet",apply:(0,eJ.eu)(e=>"".concat(e("notify"),' = (await NotificationClient("email:#{').concat((null==s?void 0:s.email)||"you@example.com",'}")).send(#{"Hello"})')),label:"Email notification",mode:"js",afterId:n})}},...[{label:"Slack notification",description:"Message a Slack channel or user",thumbnail:e=>(0,s.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,s.jsx)("path",{d:"M20.3616 17.1107C20.3616 18.0358 19.6059 18.7915 18.6808 18.7915C17.7557 18.7915 17 18.0358 17 17.1107C17 16.1856 17.7557 15.4299 18.6808 15.4299H20.3616V17.1107Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M21.2085 17.1107C21.2085 16.1856 21.9642 15.4299 22.8893 15.4299C23.8144 15.4299 24.5701 16.1856 24.5701 17.1107V21.3192C24.5701 22.2443 23.8144 23 22.8893 23C21.9642 23 21.2085 22.2443 21.2085 21.3192V17.1107Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M22.8893 10.3616C21.9642 10.3616 21.2085 9.60586 21.2085 8.68078C21.2085 7.7557 21.9642 7 22.8893 7C23.8144 7 24.5701 7.7557 24.5701 8.68078V10.3616H22.8893Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M22.8893 11.2085C23.8143 11.2085 24.57 11.9642 24.57 12.8893C24.57 13.8144 23.8143 14.5701 22.8893 14.5701H18.6808C17.7557 14.5701 17 13.8144 17 12.8893C17 11.9642 17.7557 11.2085 18.6808 11.2085H22.8893Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M29.6384 12.8893C29.6384 11.9642 30.3941 11.2085 31.3192 11.2085C32.2443 11.2085 33 11.9642 33 12.8893C33 13.8144 32.2443 14.5701 31.3192 14.5701H29.6384V12.8893Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M28.7915 12.8893C28.7915 13.8143 28.0358 14.57 27.1107 14.57C26.1856 14.57 25.4299 13.8143 25.4299 12.8893V8.68078C25.4299 7.7557 26.1856 7 27.1107 7C28.0358 7 28.7915 7.7557 28.7915 8.68078V12.8893Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M27.1107 19.6384C28.0358 19.6384 28.7915 20.3941 28.7915 21.3192C28.7915 22.2443 28.0358 23 27.1107 23C26.1856 23 25.4299 22.2443 25.4299 21.3192V19.6384H27.1107Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M27.1107 18.7915C26.1856 18.7915 25.4299 18.0358 25.4299 17.1107C25.4299 16.1856 26.1856 15.4299 27.1107 15.4299H31.3192C32.2443 15.4299 33 16.1856 33 17.1107C33 18.0358 32.2443 18.7915 31.3192 18.7915H27.1107Z",fill:"currentColor"})]}),apply:(0,eJ.eu)(e=>"".concat(e("notify"),' = (await NotificationClient("slack:#{#random}")).send(#{"Hello"})'))},{label:"Scheduler-only code",description:"Run when you set a schedule",thumbnail:e=>(0,s.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,s.jsx)("path",{d:"M22 9V12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,s.jsx)("path",{d:"M27 9V12",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19 11H30V13.3414C30.7452 13.6048 31.4229 14.0113 32 14.5278V11C32 9.89543 31.1046 9 30 9H19C17.8954 9 17 9.89543 17 11V19C17 20.1046 17.8954 21 19 21H22.3414C22.1203 20.3744 22 19.7013 22 19H19L19 11Z",fill:"currentColor"}),(0,s.jsx)("circle",{cx:"28",cy:"19",r:"4",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M27.75 18V19.25L28.75 20",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"square"})]}),apply:(0,eJ.eu)(e=>"".concat(e("run"),' = {\n  if (currentUser.login === "scheduler") {\n    #{// This will run only when the notebook is run on a schedule}\n  }\n}'))}].map(e=>tc(e,"js","Notifications"))]},{title:"Sample data",items:[...[{label:"Penguins",description:"Palmer Station, Antarctica",thumbnail:e=>(0,s.jsx)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:(0,s.jsx)("path",{d:"M27.489 15.7992C29.417 17.2547 31.4085 21.1173 31.4085 21.1173C31.4085 21.1173 33.2732 16.8843 30.381 13.4881C27.2441 9.80451 27.8764 8.6083 27.971 8.13256C28.5 3.61729 24.5 3.11731 22 5.11731C20.0721 5.11742 18 5.11731 18 5.11731C18 5.11731 22.9085 7.11729 22.1869 9.58806C21.4085 10.6173 13.4085 24.6173 22.1869 25.6173C23.5756 25.6173 28 25.6173 29.5 25.6173C30 25.5 30 25 30 24.6173",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),apply:(0,eG.DB)("penguins")},{label:"Olympians",description:"2016 Olympic Games",thumbnail:e=>(0,s.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.0212 21.0308L22.3627 23.2294C21.9371 23.5814 21.8774 24.2117 22.2294 24.6373C22.5814 25.0629 23.2117 25.1226 23.6373 24.7706L28.1593 21.0308H25.0212Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M14 17H19",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M15 11L21 11",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M11 14L20 14",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32.4022 8.08441C32.1831 7.98811 31.9289 7.96969 31.6839 8.05134C31.5763 8.08721 31.4788 8.1396 31.3934 8.20474C31.7237 8.08527 32.0683 8.04799 32.4022 8.08441ZM33.9671 11.7386C33.7689 11.9971 33.5119 12.2164 33.2029 12.3739L32.2351 12.8672L33.0514 15.3163C33.2109 15.7947 33.7017 16.0795 34.1962 15.9806L39.1962 14.9806C39.7378 14.8723 40.089 14.3455 39.9807 13.8039C39.8724 13.2624 39.3456 12.9111 38.804 13.0194L34.6696 13.8463L33.9671 11.7386Z",fill:"currentColor"}),(0,s.jsx)("circle",{cx:"35.75",cy:"7.25",r:"2.25",fill:"currentColor"}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M26.8038 5.01942C27.0406 4.97207 27.2865 5.01198 27.4962 5.1318L32.5383 8.01358C32.8901 8.20082 33.1899 8.49394 33.3841 8.87469C33.8857 9.85876 33.4985 11.0708 32.5145 11.5725L27.0965 14.3345L29.8325 18.446C30.0368 18.7529 30.0556 19.1473 29.8815 19.4722C29.7074 19.7972 29.3687 20 29 20H22C21.4477 20 21 19.5523 21 19C21 18.4477 21.4477 18 22 18H27.1334L24.3596 13.8319C24.2979 13.7471 24.242 13.6565 24.193 13.5602C23.6913 12.5762 24.0785 11.3641 25.0626 10.8625L29.5181 8.59104L26.8289 7.05402L22.1961 7.98058C21.6545 8.0889 21.1277 7.73768 21.0194 7.19612C20.9111 6.65456 21.2623 6.12773 21.8038 6.01942L26.8038 5.01942Z",fill:"currentColor"})]}),apply:(0,eG.DB)("olympians")},{label:"Cars",description:"1983 ASA Data Exposition",thumbnail:e=>(0,s.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",...e,children:[(0,s.jsx)("circle",{cx:"3.5",cy:"3.5",r:"2.5",transform:"matrix(-1 0 0 1 36.9319 15)",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("circle",{cx:"3.5",cy:"3.5",r:"2.5",transform:"matrix(-1 0 0 1 19.9319 15)",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M30.4319 18.5H19.4319M13.299 18.5C12.4657 18.5 10.699 18.4 10.299 18C9.79901 17.5 9.79894 13.5 11.2989 13C13.299 12 14.9999 11.5 18.9999 11C21.9999 9.50002 23.7989 8.00001 26.7989 8C28.2989 8.00002 28.2989 8 30.2989 8C33.7989 8 36.7008 8 37.4999 9C38.299 10 39.3676 11.5814 39.4999 13.5C39.6251 15.3146 39.2989 18 38.2989 18C37.4989 18 36.5985 18.3333 35.9319 18.5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]}),apply:(0,eG.DB)("cars")}].map(e=>tc(e,"js","Sample data")),{type:"large",label:"Pizza Paradise",icon:e=>(0,s.jsxs)("svg",{width:"50",height:"30",viewBox:"0 0 50 30",fill:"none",stroke:"currentColor",...e,children:[(0,s.jsx)("path",{d:"M36.7247 17.7757C36.2339 16.3031 30.5389 7.31291 22.8224 4.23626C21.7481 3.84076 21.0148 4.41321 20.7562 4.90975C20.4977 5.40629 20.3824 6.61847 21.7481 7.31291C25.1841 8.2946 32.3356 14.9552 33.8081 19.3729C34.1345 20.352 35.0719 21.0798 36.1467 20.5601C37.2216 20.0404 37.0767 18.8316 36.7247 17.7757Z",strokeWidth:"2"}),(0,s.jsx)("path",{d:"M21.8079 7.30347C19.82 12.4276 17.5667 18.2404 16.3118 21.4953C15.6301 23.2634 14.6217 25.2128 15.1773 25.7505C15.733 26.2881 18.5567 25.2024 19.9328 24.6692C21.6369 24.0089 28.1668 21.4536 33.5873 19.4162",strokeWidth:"2"}),(0,s.jsx)("circle",{cx:"23.9476",cy:"13.6869",r:"1.95424"}),(0,s.jsx)("circle",{cx:"28.6282",cy:"19.608",r:"1.95424"}),(0,s.jsx)("circle",{cx:"18.5062",cy:"21.1391",r:"1.95424"}),(0,s.jsx)("path",{d:"M21.2118 16.5996L21.7751 18.0481",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M24.1605 19.7292L22.9739 20.7329",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M28.7892 15.9595L27.3309 15.4221",strokeLinecap:"round",strokeLinejoin:"round"})]}),description:"Retail sales transactions",category:"Sample data",action:(e,t)=>{e({type:"insertAfter",id:t.previousId,node:{mode:"table",data:{source:{type:"cell",name:"pizza"},operations:{...el.Zu.defaultNode.data.operations,from:{table:(0,tl.Z)({type:"cell",name:"ordersByProductDay",dialect:"array"})}}}},trigger:"Implicit",source:"nodeInserterMenu"})}}]},{title:"Imports",items:eJ.Xk.map(e=>tc(e,"js","Imports"))}],ti=[...["js","md","html"].map(e=>{let{label:t,icon:n}=el.qz[e];return{label:"Insert as ".concat(t),type:"small",icon:n,action:(t,n)=>{let{previousId:s,filter:r}=n;return t({type:"insertSnippet",apply:td(r),label:"Insert",mode:e,afterId:s})}}}),{label:"Search",type:"small",icon:e4.Z,action:(e,t)=>{let{filter:n}=t;return e({type:"showModal",modal:"search",modalProps:{query:n}})}},{label:"Ask ".concat(e9.u7),type:"small",icon:e8.P,filter:e=>{let{allowAIAssist:t}=e;return t},action:(e,t)=>{let{filter:n,previousId:s,previousNode:r,currentUser:l}=t;if(null===l)return;e({type:"showPane",pane:"aiassist"});let a=(0,e$.Z)(8),i=!!r&&!(0,el.hN)(r);e({type:"chatCreateDraft",message:{complete:!1,id:a,node_id:s,sender:l,local:!0,status:"draft",content:(0,eX.dk)(n,{includeCode:i})}}),e({type:"chatSendDraft",id:a,cellIncluded:i,scope:"cell"})}}];function to(e){let{label:t,icon:n}=el.qz[e];return{type:"small",label:t,icon:n,action:(t,n)=>{let{nextId:s,trigger:r}=n;return t({type:"insertBefore",id:s,node:{mode:e},trigger:r,source:"nodeInserterMenu"})}}}function tc(e,t,n){var s,r,l;let a=null!==(s=e.shortLabel)&&void 0!==s?s:e.label;return{type:"large",label:a,category:n,description:null!==(r=e.description)&&void 0!==r?r:"",icon:null!==(l=e.thumbnail)&&void 0!==l?l:e0.Z,newUntil:e.newUntil,action:(n,s)=>{let{previousId:r}=s;return n({type:"insertSnippet",apply:e.apply,label:a,mode:t,afterId:r,imports:e.imports})}}}function td(e){return(t,n,s,r)=>{t.dispatch(t.state.update({changes:{from:s,to:r,insert:e},selection:eY.jT.cursor(s+e.length)}))}}function tu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(s,r,l,a)=>{s.dispatch(s.state.update({changes:{from:l,to:a,insert:e},selection:eY.jT.range(t,e.length-n)}))}}for(let e of ta)for(let t of e.items)t.category=e.title;{let e=new Set;for(let t of ta)for(let n of t.items){for(;e.has(n.label);)n.label+=" ";e.add(n.label)}}let th=e=>{let{item:t,onClick:n,labelMatcher:r,descriptionMatcher:a,isSuggestion:i,fuzzyMatch:o=!1}=e,{label:c,type:d,newUntil:u,icon:h}=t;return(0,s.jsxs)(eI.O2,{value:c,className:l()("combobox-option ph1 theme-blue",i&&"gold"),onClick:e=>n(e,c),children:["small"===d?(0,s.jsxs)("div",{className:"jsx-fba29814d32d7d5f flex justify-between items-center h2 pa1 br2 fw5",children:[(0,s.jsxs)("div",{className:"jsx-fba29814d32d7d5f truncate flex",children:[(0,s.jsxs)("div",{className:"jsx-fba29814d32d7d5f flex items-center",children:[i?(0,s.jsx)(ez.v,{className:"mr1"}):null,r&&o?(0,s.jsx)(eP.q,{text:c,matcher:r}):c]}),u&&u>new Date&&(0,s.jsx)(eA,{newUntil:u})]}),(0,s.jsx)("div",{style:{width:16,height:16,boxSizing:"content-box"},className:"jsx-fba29814d32d7d5f "+(l()("thumbnail br-100 pa1 mid-gray ml2 bg-near-white highlight-blue flex-shrink-0",i&&"gold")||""),children:(0,s.jsx)(h,{style:{width:16,height:16},className:"jsx-fba29814d32d7d5f"})})]}):(0,s.jsxs)("div",{className:"jsx-fba29814d32d7d5f flex justify-between items-center ph1 pv2 br2",children:[(0,s.jsxs)("div",{className:"jsx-fba29814d32d7d5f flex-auto",children:[(0,s.jsxs)("div",{className:"jsx-fba29814d32d7d5f mb1 fw5 flex",children:[(0,s.jsx)("div",{className:"jsx-fba29814d32d7d5f",children:r&&o?(0,s.jsx)(eP.q,{text:c,matcher:r}):c}),u&&u>new Date&&(0,s.jsx)(eA,{newUntil:u})]}),(0,s.jsx)("div",{className:"jsx-fba29814d32d7d5f f7 gray highlight-inherit truncate pb1 nb1",children:!!t.description&&(a&&o?(0,s.jsx)(eP.q,{text:t.description,matcher:a}):t.description)})]}),(0,s.jsx)(h,{style:{width:50,height:30},className:"jsx-fba29814d32d7d5f thumbnail mid-gray ml2 br2 bg-near-white highlight-blue flex-shrink-0"})]}),(0,s.jsx)(Z(),{id:"fba29814d32d7d5f",children:".combobox-option:hover .thumbnail{background-color:var(--silver)}"})]})};var tm=e=>{var t;let{previousId:n,nextId:r,focusId:a,hoverId:i,insertingId:c,dispatch:d}=e,u=null!==a&&(a===n||a===r),h=null!==i&&(i===n||i===r),m=null!==n&&null!==r,[p,f]=(0,o.useState)(!1),{open:x,openMenu:g,closeMenu:b,triggerRef:v,uiRef:j}=(0,eW.O)(),V=(0,o.useRef)(null),k=(0,o.useRef)(null),L=(0,o.useRef)(x),M=(0,o.useRef)(),[H,S]=(0,o.useState)(""),{currentUser:R,allowFileAttachments:E,allowPrivateData:_,allowAIAssist:F,defaultCellMode:I}=(0,N.v9)(e=>{let{currentUser:t,notebook:n}=e;return{currentUser:t,allowFileAttachments:(0,w.Yb)(t)&&(0,y.j5)(t,n),allowPrivateData:(0,C.cE)(n),allowAIAssist:(0,w.F3)(n),defaultCellMode:(0,C.Sx)(t)}}),P=(0,eu.GS)(eu.hs),A=null!==R&&P,{suggestions:T,previousNode:B,previousMode:z,previousName:W,chartSpec:q}=(0,N.v9)(e=>{var t,s;let{notebook:r}=e;if(null===n)return{};let l=(0,X.DY)(r.model,n);return l?{suggestions:null===(t=r.workerStatus.get(n))||void 0===t?void 0:t.suggestions,chartSpec:null===(s=r.workerStatus.get(n))||void 0===s?void 0:s.chartSpec,previousMode:l.mode,previousNode:l,previousName:(0,D.u2)(l)||"cell ".concat(n)}:{}}),U=(0,o.useMemo)(()=>H.length?(0,eU.v)(H,{allowAcronyms:!0}):null,[H]),G=(0,o.useMemo)(()=>H.length?(0,eU.v)(H,{allowAcronyms:!1}):null,[H]),Y=(0,o.useMemo)(()=>{let e={allowFileAttachments:E,allowPrivateData:_,allowAIAssist:F,suggestions:T||[],previousMode:z},t=U&&G?t=>(U.test(t.label)||G.test(function(e){let t=[e.label];return e.category&&t.push(e.category),e.description&&t.push(e.description),t.join("\n")}(t)))&&(!t.filter||t.filter(e)):t=>!t.filter||t.filter(e);return ta.map(e=>{let{items:n,...s}=e;return{...s,items:n.filter(t)}}).filter(e=>e.items.length>0)},[E,_,F,T,z,U,G]),K=!!(null===(t=Y.find(e=>{let{title:t}=e;return"Suggestions"===t}))||void 0===t?void 0:t.items.length),$=K&&(a===n||x),J=(0,eO.a)(k);function Q(e){let t=0,n=!1;requestAnimationFrame(function s(){if(k.current){if(k.current.querySelector("[data-highlighted]")){if(n)return;n=!0}else!function(e){e.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowDown",bubbles:!0}))}(e);t++<5&&requestAnimationFrame(s)}})}function ee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keypress",s=Y.length?Y.flatMap(e=>e.items).find(t=>t.label===e):ti.find(t=>t.label===e);s&&(d({type:"closeInsertMenu",trigger:t,filter:H,selectedItem:e}),s.action(d,{nextId:r,previousId:n,trigger:t,filter:H,previousNode:B,chartSpec:q,currentUser:R}))}function et(e,t){e.preventDefault(),ee(t,"click")}(0,o.useEffect)(()=>{let e=c===r;L.current!==e&&(L.current=e,e?g():(S(""),b()))},[g,b,c,r,x]),(0,o.useEffect)(()=>{L.current===x||(L.current=x,x||(S(""),d({type:"closeInsertMenu",trigger:"Implicit",filter:H})))},[d,x,H]),(0,o.useEffect)(()=>{if(!m)return;let e=e=>f(e.shiftKey),t=()=>f(!1);return addEventListener("keydown",e),addEventListener("keyup",e),addEventListener("blur",t),()=>{removeEventListener("keydown",e),removeEventListener("keyup",e),removeEventListener("blur",t)}},[m]);let en=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"pa2 bb b--light-gray",children:(0,s.jsx)(eI.gA,{ref:V,placeholder:"Filter…",autocomplete:!1,autoComplete:"off",spellCheck:!1,onChange:function(e){S(e.target.value),Q(e.target)},onKeyDown:J,onPaste:function(e){e.preventDefault(),d({type:"insertSnippet",apply:td(H+e.clipboardData.getData("text")),label:"Insert",mode:"js",afterId:n})},onFocus:function(e){Q(e.target)},className:"w-100 border-box",type:"search",value:H,autoFocus:!0})}),(0,s.jsx)(eI.Gk,{ref:k,className:"relative",style:{maxHeight:"25em",overflowY:"scroll"},children:Y.length?Y.map((e,t)=>{let{title:n,items:r}=e;return(0,s.jsxs)("div",{className:l()("pt2 mb2",t?"bt b--light-gray":""),children:[n&&(0,s.jsx)("div",{className:"gray f7 ph2 pv1",children:"Suggestions"===n?(0,s.jsxs)(s.Fragment,{children:["Suggestions for"," ",(0,s.jsx)("span",{className:"fw5",children:W})]}):G?(0,s.jsx)(eP.q,{text:n,matcher:G}):n}),r.map((e,t)=>(0,s.jsx)(th,{item:e,labelMatcher:U,descriptionMatcher:G,onClick:et,isSuggestion:"Suggestions"===e.category,fuzzyMatch:!0},t))]},t)}):(0,s.jsx)("div",{className:"pt2 mb2",children:ti.map((e,t)=>(0,s.jsx)(th,{item:e,labelMatcher:U,descriptionMatcher:G,isSuggestion:!1,onClick:et},t))})},H)]});return(0,s.jsxs)("div",{className:"absolute dn-print",style:{marginTop:-O.KI+1,left:-O.KI-O.re/2-5},children:[(0,s.jsxs)("div",{ref:v,className:"jsx-7869de80898f8af0 absolute",children:[(0,s.jsx)("svg",{width:O.KI,height:O.KI-2,viewBox:"-8.5 -7.5 17 15",style:{overflow:"visible"},role:"button","aria-label":"Click to insert or merge cells",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",fill:"none",onClick:function(e){if(e.preventDefault(),window.matchMedia(eu.ro).matches){M.current&&(clearTimeout(M.current),M.current=void 0,d({type:"insertBefore",id:r,node:{mode:I},trigger:"click",source:"nodeInserter"}));return}m&&e.shiftKey?d({type:"merge",beforeId:n,afterId:r}):x?d({type:"closeInsertMenu",trigger:"click",filter:H}):d({type:"openInsertMenu",id:r,before:!0,trigger:"click",source:"nodeInserter"})},onPointerDown:function(){!L.current&&window.matchMedia(eu.ro).matches&&(M.current=setTimeout(()=>{d({type:"openInsertMenu",id:r,before:!0,trigger:"click",source:"nodeInserter"}),M.current=void 0},500))},onPointerCancel:function(){M.current&&(clearTimeout(M.current),M.current=void 0)},onDoubleClick:function(e){e.shiftKey||(e.preventDefault(),d({type:"insertBefore",id:r,node:{mode:I},trigger:"click",source:"nodeInserter"}))},onMouseDown:eq.PF,className:"jsx-7869de80898f8af0 "+(l()("pointer",x?"light-blue":u||h?"moon-gray":"transparent")||""),children:p?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("title",{className:"jsx-7869de80898f8af0",children:"Merge cells"}),(0,s.jsx)("path",{d:"M-3,4L0,1.5L3,4M0,1.5V6.5",className:"jsx-7869de80898f8af0"}),(0,s.jsx)("path",{d:"M-3,4L0,1.5L3,4M0,1.5V6.5",transform:"rotate(180)",className:"jsx-7869de80898f8af0"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("title",{className:"jsx-7869de80898f8af0",children:null!==a&&a===r?"Insert cell before (".concat((0,eF.Z)("Shift-Mod-Enter"),")"):null!==a&&a===n?"Insert cell after (".concat((0,eF.Z)("Mod-Enter"),")"):"Insert cell"}),(0,s.jsx)("path",{d:"M0,-4.5V4.5M-4.5,0H4.5",className:"jsx-7869de80898f8af0 "+(($?"gold":"")||"")}),x&&(K?(0,s.jsx)("path",{d:"M31.5,0h14M-11.5,0h-14",style:{stroke:"var(--gold)"},opacity:"0.2",className:"jsx-7869de80898f8af0"}):(0,s.jsx)("path",{d:"M8.5,0h23M-8.5,0h-23",style:{stroke:"var(--faint-blue)"},className:"jsx-7869de80898f8af0"})),$?(0,s.jsxs)("g",{fill:"currentColor",stroke:"none",className:"jsx-7869de80898f8af0 gold",children:[(0,s.jsx)("circle",{r:"2",cx:"11",className:"jsx-7869de80898f8af0"}),(0,s.jsx)("circle",{r:"2",cx:"17",className:"jsx-7869de80898f8af0"}),(0,s.jsx)("circle",{r:"2",cx:"23",className:"jsx-7869de80898f8af0"}),(0,s.jsx)("rect",{x:"-8",y:"-7",height:"14",width:"36",rx:"7",opacity:"0.1",className:"jsx-7869de80898f8af0 pea pill"})]}):null]})}),(0,s.jsx)(Z(),{id:"7869de80898f8af0",children:"svg.jsx-7869de80898f8af0{overflow:visible;will-change:transform}svg.jsx-7869de80898f8af0:not(.black):hover{color:var(--mid-gray)}svg.jsx-7869de80898f8af0:not(.black):active{color:var(--black)}.cursor.jsx-7869de80898f8af0{width:0;-webkit-transition:width.2s;-moz-transition:width.2s;-o-transition:width.2s;transition:width.2s;border-top-width:0;border-top-style:solid}.cursor.active.jsx-7869de80898f8af0{width:-webkit-calc(14rem - 17px);width:-moz-calc(14rem - 17px);width:calc(14rem - 17px);border-top-width:2px}.pill.jsx-7869de80898f8af0{visibility:hidden}.pill.jsx-7869de80898f8af0:hover{visibility:visible}.pill.jsx-7869de80898f8af0:active{opacity:.2}"})]}),x&&(0,s.jsx)(eT.J,{extraStyle:{right:"auto",left:-2,top:10,width:"18rem",marginTop:"0.5rem"},ref:j,children:(0,s.jsx)(eI.hQ,{"aria-label":"custom option demo",role:"dialog",onSelect:ee,onBlur:function(e){e.currentTarget.contains(e.relatedTarget)||b()},openOnFocus:!0,children:A?(0,s.jsx)(eB.y,{type:"insertmenu",right:-3,top:24,children:en}):en})})]})},tp=n(14677),tf=n(6687),tx=n(60938),tg=n(74548),tb=n(98436),tv=n(22878),tj=n(64756),ty=n(58551),tV=n(41978);let tw=e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:[(0,s.jsx)("mask",{id:"path-1-inside-1_528:41919",fill:"white",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 1C2.79086 1 1 2.79086 1 5V11C1 13.2091 2.79086 15 5 15H11C13.2091 15 15 13.2091 15 11V5C15 2.79086 13.2091 1 11 1H5ZM11.868 6.94597L12.5639 6.22791L11.1278 4.83596L10.4318 5.55403L7.149 8.94108L5.67569 7.67824L4.91644 7.02745L3.61485 8.54597L4.37411 9.19676L6.56161 11.0718L7.2758 11.6839L7.93047 11.0085L11.868 6.94597Z"})}),(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 1C2.79086 1 1 2.79086 1 5V11C1 13.2091 2.79086 15 5 15H11C13.2091 15 15 13.2091 15 11V5C15 2.79086 13.2091 1 11 1H5ZM11.868 6.94597L12.5639 6.22791L11.1278 4.83596L10.4318 5.55403L7.149 8.94108L5.67569 7.67824L4.91644 7.02745L3.61485 8.54597L4.37411 9.19676L6.56161 11.0718L7.2758 11.6839L7.93047 11.0085L11.868 6.94597Z",fill:"currentColor"}),(0,s.jsx)("path",{d:"M12.5639 6.22791L14.0001 7.61985L15.392 6.18372L13.9559 4.79177L12.5639 6.22791ZM11.868 6.94597L10.4318 5.55403L10.4318 5.55403L11.868 6.94597ZM11.1278 4.83596L12.5198 3.39982L11.0836 2.00788L9.69167 3.44401L11.1278 4.83596ZM10.4318 5.55403L11.868 6.94597L11.868 6.94597L10.4318 5.55403ZM7.149 8.94108L5.84742 10.4596L7.2758 11.6839L8.58514 10.333L7.149 8.94108ZM5.67569 7.67824L6.97728 6.15973L6.97728 6.15973L5.67569 7.67824ZM4.91644 7.02745L6.21802 5.50894L4.69951 4.20736L3.39792 5.72587L4.91644 7.02745ZM3.61485 8.54597L2.09634 7.24438L0.794758 8.7629L2.31327 10.0645L3.61485 8.54597ZM4.37411 9.19676L5.67569 7.67824L5.67569 7.67824L4.37411 9.19676ZM6.56161 11.0718L5.26003 12.5903L5.26003 12.5903L6.56161 11.0718ZM7.2758 11.6839L5.97422 13.2024L7.40261 14.4268L8.71194 13.0759L7.2758 11.6839ZM7.93047 11.0085L9.3666 12.4004L9.3666 12.4004L7.93047 11.0085ZM3 5C3 3.89543 3.89543 3 5 3V-1C1.68629 -1 -1 1.68629 -1 5H3ZM3 11V5H-1V11H3ZM5 13C3.89543 13 3 12.1046 3 11H-1C-1 14.3137 1.68629 17 5 17V13ZM11 13H5V17H11V13ZM13 11C13 12.1046 12.1046 13 11 13V17C14.3137 17 17 14.3137 17 11H13ZM13 5V11H17V5H13ZM11 3C12.1046 3 13 3.89543 13 5H17C17 1.68629 14.3137 -1 11 -1V3ZM5 3H11V-1H5V3ZM11.1278 4.83596L10.4318 5.55403L13.3041 8.33792L14.0001 7.61985L11.1278 4.83596ZM9.73586 6.27209L11.172 7.66404L13.9559 4.79177L12.5198 3.39982L9.73586 6.27209ZM11.868 6.94597L12.5639 6.2279L9.69167 3.44401L8.9957 4.16208L11.868 6.94597ZM8.58514 10.333L11.868 6.94597L8.9957 4.16208L5.71286 7.54913L8.58514 10.333ZM4.37411 9.19676L5.84742 10.4596L8.45058 7.42257L6.97728 6.15973L4.37411 9.19676ZM3.61485 8.54597L4.37411 9.19676L6.97728 6.15973L6.21802 5.50894L3.61485 8.54597ZM5.13337 9.84755L6.43495 8.32904L3.39792 5.72587L2.09634 7.24438L5.13337 9.84755ZM5.67569 7.67824L4.91644 7.02745L2.31327 10.0645L3.07253 10.7153L5.67569 7.67824ZM7.86319 9.55324L5.67569 7.67824L3.07253 10.7153L5.26003 12.5903L7.86319 9.55324ZM8.57739 10.1654L7.86319 9.55324L5.26003 12.5903L5.97422 13.2024L8.57739 10.1654ZM6.49433 9.61653L5.83967 10.292L8.71194 13.0759L9.3666 12.4004L6.49433 9.61653ZM10.4318 5.55403L6.49433 9.61653L9.3666 12.4004L13.3041 8.33792L10.4318 5.55403Z",fill:"currentColor",mask:"url(#path-1-inside-1_528:41919)"})]});var tC=n(7564),tk=n(64664),tN=n(82076),tL=n(34415),tM=function(e){let{model:t,selection:n,selectionFocusId:r,dispatch:a}=e,i=(0,tL.dZ)({selection:n,selectionFocusId:r}),c=(0,tN.G)(i,e=>!(0,X.DY)(t,e).pinned),d=(0,tN.G)(i,e=>(0,Q.qU)((0,X.DY)(t,e))),u=(0,tN.G)(i,e=>{let n=(0,X.t$)(t,e);return null!==n&&!i.has(n)}),h=(0,tN.G)(i,e=>{let n=(0,X.o4)(t,e);return null!==n&&!i.has(n)}),p=i.size<t.nodes.length,[x,g]=(0,o.useState)(null);return(0,s.jsx)(ef.h,{children:(0,s.jsx)("div",{className:"fixed left-0 right-0 bottom-0 pv2 z-1 bg-white b--silver bt near-black",children:(0,s.jsx)(tk.Z,{className:"w-100",children:(0,s.jsxs)("div",{className:"flex relative",style:{marginLeft:-14,marginRight:-14},children:[(0,s.jsxs)("div",{className:"absolute h-100 nowrap flex items-center fw6 pr2",style:{right:"100%"},children:[i.size.toLocaleString("en")," ",1===i.size?"cell":"cells"]}),(0,s.jsx)(f.hA,{icon:tV.Z,title:"Run cells ".concat((0,eF.Z)("Shift-Enter")),suppressHydrationWarning:!0,onClick:()=>a({type:"selectionRun"})}),(0,s.jsx)(f.hA,{icon:eV.Z,title:"".concat(c?"Pin cells":"Unpin cells"," ").concat((0,eF.Z)("P")),suppressHydrationWarning:!0,className:c?"ml2":"blue ml2",joinRight:!0,onClick:()=>a({type:"selectionPin"})}),(0,s.jsx)(f.hA,{icon:d?ty.Z:tj.Z,title:"".concat(d?"Hide":"Show"," output ").concat((0,eF.Z)(",")),suppressHydrationWarning:!0,className:"ml2",joinLeft:!0,onClick:()=>a({type:"selectionHide"})}),(0,s.jsx)(f.hA,{icon:n.size?tw:ex.Z,title:null===r||n.size?"Clear selection ".concat((0,eF.Z)("Escape")):"Toggle selection ".concat((0,eF.Z)("X")),suppressHydrationWarning:!0,className:l()("ml2",n.size?"blue":""),onClick:()=>{null===r||n.size?a({type:"selectionBlur"}):a({type:"selectionToggle",id:r})}}),(0,s.jsx)(f.hA,{icon:tv.Z,title:"Move cells up ".concat((0,eF.Z)("Alt-Up")),suppressHydrationWarning:!0,className:"ml2",disabled:!u,joinRight:!0,onClick:()=>a({type:"selectionMoveUp"})}),(0,s.jsx)(f.hA,{icon:tb.Z,title:"Move cells down ".concat((0,eF.Z)("Alt-Down")),suppressHydrationWarning:!0,className:"ml2",disabled:!h,joinLeft:!0,onClick:()=>a({type:"selectionMoveDown"})}),(0,s.jsx)(f.hA,{icon:ey.Z,title:"Duplicate cells ".concat((0,eF.Z)("Shift-Alt-Down")),suppressHydrationWarning:!0,className:"ml2",onClick:e=>a({type:"selectionDuplicate",before:e.shiftKey})}),(0,s.jsx)(f.hA,{icon:m.Z,title:p?"Delete cells ".concat((0,eF.Z)("D")):"Delete cells (Cannot delete all cells)",suppressHydrationWarning:!0,className:"ml2",destructive:!!x,disabled:!p,text:x?"Delete?":"",onClick:()=>{x?(a({type:"selectionDelete"}),window.clearTimeout(x),g(null)):g(window.setTimeout(()=>g(null),tC.P))}}),(0,s.jsx)("div",{className:"flex flex-grow-1"}),(0,s.jsx)(f.hA,{icon:ew.Z,title:"Clear selection ".concat((0,eF.Z)("Escape")),suppressHydrationWarning:!0,className:"ml2",transparent:!0,onClick:()=>a({type:"selectionClear"})})]})})})})};let tZ=e=>{let{notebook:t,dispatch:n,editors:r,currentUser:a,editorComponent:i,disablePointerEvents:c=!1,isNodeCommentable:d=()=>!1,isEditorAlwaysOpen:u=()=>!1,isCollectionsSidebarOpen:h}=e,{model:m,safe:p,heights:f,focusId:x,selection:g,selectionFocusId:b,editorStates:v,dragId:j,dropId:y,hoverId:V,assistFocusId:w}=t;!function(e,t,n,s){let[r,l]=(0,o.useState)(e_.Qg&&!!location.hash),[a,i]=(0,o.useState)(!0),c=(0,o.useRef)();(0,o.useEffect)(()=>{if(r){let e=setTimeout(()=>i(!1),3e3);return()=>clearTimeout(e)}},[r]),(0,o.useEffect)(()=>{if(r){let r=location.hash.slice(1),u=!1,h=201;if(r.startsWith("comment-")){let e=document.getElementById(r);if(e)h=e.getBoundingClientRect().top,u=!0;else{let e=r.slice(8);for(let[t,r]of n)if(r.some(t=>t.id===e)){s({type:"showComments",nodeId:t,trigger:"Implicit",source:"hash"});break}}}else for(let n of e){var o,d;if(a&&!(null===(o=t.get(n.id))||void 0===o?void 0:o.worker))break;if((0,D.u2)(n)===r||"cell-".concat(n.id)===r){u=!0;break}h+=((null===(d=t.get(n.id))||void 0===d?void 0:d.total)||0)+O.KI}if(u){if(a)c.current&&clearTimeout(c.current),c.current=setTimeout(()=>i(!1),150);else{let e=h-O.MT-5;Math.abs(window.scrollY-e)>O.MT&&scrollTo(0,e),l(!1)}}else a||l(!1)}return()=>{c.current&&clearTimeout(c.current)}},[r,a,e,t,n,s])}(m.nodes,f,t.comments,n);let k=(0,C.os)(t);return(0,s.jsxs)("div",{className:"relative notebook z-0 pb6",onMouseLeave:()=>n({type:"hover",id:null}),children:[!p&&(0,s.jsx)("div",{className:l()("absolute w-100",null!==j||c?"pen":""),style:{top:-O.KI,overflowAnchor:"none"},children:(0,s.jsx)(tp.Z,{state:t,dispatch:n,currentUser:a})}),(0,s.jsx)(tm,{previousId:null,nextId:m.nodes[0].id,focusId:x,hoverId:V,insertingId:t.insertingId,dispatch:n}),m.nodes.map((e,l,a)=>{var c,m;let{id:j,pinned:C}=e,N=v.get(j);if(!N)return null;let L=N.field(tf.A),M=N.field(tx.C),Z=x===j,H=w===j,S=f.get(j),R=S?S.display+S.worker:0,E=(0,D.cS)(e),_=v.get(j).field(tg.JN),F=u(j)||p||C||Z||H||E||(null===(m=e.data)||void 0===m?void 0:null===(c=m.display)||void 0===c?void 0:c.mode)==="none"||!!_.length||!(0,D.QF)(e)||t.searchResultsVisible&&!!t.searchResults&&t.searchResults.has(e.id),I=S?S.editor+R:0;return(0,s.jsxs)(o.Fragment,{children:[y===j&&(0,s.jsx)(ei,{}),(0,s.jsx)(eD,{node:e,height:I,outputHeight:R,focused:Z,editorOpen:F,hovered:V===j,selecting:g.size>0,selected:g.has(j),selectionFocused:b===j,readOnly:k,mode:M,commentable:d(j),isCollectionsSidebarOpen:h}),(0,s.jsx)(ea,{node:e,editorState:N,assistFocused:H,focused:Z,selected:g.has(j),selectionFocused:b===j,editorOpen:F,workerHeight:S?S.worker:0,editors:r,hovered:V===j,editorComponent:i,hasPrevious:l>0,hasNext:l<a.length-1}),!k&&(0,s.jsx)(tm,{previousId:j,nextId:l<a.length-1?a[l+1].id:null,focusId:x,hoverId:V,insertingId:t.insertingId,dispatch:n})]},L)}),null===y&&(0,s.jsx)(ei,{}),(g.size||null!==b)&&(0,s.jsx)(tM,{model:m,selection:g,selectionFocusId:b,dispatch:n})]})},tH=i()(()=>Promise.resolve(tZ),{ssr:!1})},64664:function(e,t,n){var s=n(85893),r=n(40645),l=n.n(r),a=n(94184),i=n.n(a),o=n(92187),c=n(13370),d=n(33888);t.Z=(0,d.$j)(e=>{let{page:t}=e;return{paddingRight:null!==t.pane&&(0,o.wo)(t.pane).width,paddingLeft:t.collectionsSidebarOpen?216:0}})(e=>{let{className:t="",children:n,paddingRight:r,paddingLeft:a,...o}=e;return(0,s.jsxs)("div",{...o,className:l().dynamic([["ee4123fa5b31f4d1",[c.hs,r?"calc(max(".concat(r,"px - max((100vw - var(--max-width-8))/2, 0px), var(--spacing-extra-large) - var(--spacing-large)) + var(--spacing-large))"):"var(--spacing-extra-large)",r?"calc(max(".concat(r,"px - max((100vw - var(--max-width-page))/2, 0px), 0px) + var(--spacing-large))"):"var(--spacing-large)",a?"calc(max(".concat(a,"px + var(--spacing-large) - max((100vw - var(--max-width-page))/2, 0px), 0px) + var(--spacing-large))"):"var(--spacing-large)"]]])+" "+(o&&null!=o.className&&o.className||i()(a?"mw-page":"mw8","mw-page-xl center ph4 pr5-l body",t)||""),children:[n,(0,s.jsx)(l(),{id:"ee4123fa5b31f4d1",dynamic:[c.hs,r?"calc(max(".concat(r,"px - max((100vw - var(--max-width-8))/2, 0px), var(--spacing-extra-large) - var(--spacing-large)) + var(--spacing-large))"):"var(--spacing-extra-large)",r?"calc(max(".concat(r,"px - max((100vw - var(--max-width-page))/2, 0px), 0px) + var(--spacing-large))"):"var(--spacing-large)",a?"calc(max(".concat(a,"px + var(--spacing-large) - max((100vw - var(--max-width-page))/2, 0px), 0px) + var(--spacing-large))"):"var(--spacing-large)"],children:"@media ".concat(c.hs,"{.body.__jsx-style-dynamic-selector{padding-right:").concat(r?"calc(max(".concat(r,"px - max((100vw - var(--max-width-8))/2, 0px), var(--spacing-extra-large) - var(--spacing-large)) + var(--spacing-large))"):"var(--spacing-extra-large)","}}@media screen and (min-width:90em){.body.__jsx-style-dynamic-selector{padding-right:").concat(r?"calc(max(".concat(r,"px - max((100vw - var(--max-width-page))/2, 0px), 0px) + var(--spacing-large))"):"var(--spacing-large)","}}@media screen and (min-width:60em){.body.__jsx-style-dynamic-selector{padding-left:").concat(a?"calc(max(".concat(a,"px + var(--spacing-large) - max((100vw - var(--max-width-page))/2, 0px), 0px) + var(--spacing-large))"):"var(--spacing-large)","}}")})]})})},34397:function(e,t,n){n.d(t,{H:function(){return s},r:function(){return r}});let s="The paused version is shown by default when others visit or import from this".concat(" ","notebook."),r="The paused version is shown and imported by".concat(" ","default.")},59615:function(e,t,n){n.d(t,{R:function(){return d}});var s=n(85893),r=n(68337),l=n.n(r),a=n(67294),i=n(36779),o=n(61802);let c=l()().add("@",{validate(e,t,n){let s=e.slice(t);n.re.mention||(n.re.mention=new RegExp("^([a-zA-Z0-9_-]){1,39}(?!_)(?=$|".concat(n.re.src_ZPCc,")")));let r=n.re.mention.exec(s);if(r){var l;return(!(t>=2)||null!==(l=e[t-2].match(/(\s|^)/g))&&void 0!==l&&!!l[0].length)&&r[0].length}return 0},normalize(e){e.url="/".concat(e.url)}}),d=e=>{let{content:t}=e,n=[],r=0,l=0,d=t.split("\n"),u=c.match(t),h=new Map,m=u?u.filter(e=>"@"===e.schema):[],{data:p}=(0,o.h_)(m.length?"/users-exist?".concat(m.map(e=>"login=".concat(e.text.substring(1).toLowerCase())).sort().join("&")):null);if(p)for(let[e,t]of p)t&&"unavailable"!==t?h.set(e,!0):h.set(e,!1);for(let e of d){let t=c.match(e);if(t){let l=0;for(let{index:o,lastIndex:c,schema:d,text:u,url:m}of t)o>l&&n.push((0,s.jsx)(a.Fragment,{children:e.substring(l,o)},++r)),"@"===d?h.get(u.substring(1).toLowerCase())?n.push((0,s.jsx)(i.Z,{href:m.toLowerCase(),rel:"noopener noreferrer ugc",className:"no-underline black hover-blue",children:u},++r)):n.push((0,s.jsx)(a.Fragment,{children:u},++r)):n.push((0,s.jsx)(i.Z,{href:m,rel:"nofollow noopener noreferrer ugc",className:"no-underline black hover-blue",children:u},++r)),l=c;e.length>l&&n.push((0,s.jsx)(a.Fragment,{children:e.substring(l)},++r))}else n.push((0,s.jsx)(a.Fragment,{children:e},++r));d.length>1&&++l<d.length&&n.push((0,s.jsx)("br",{},++r))}return(0,s.jsx)(s.Fragment,{children:n})}},94006:function(e,t,n){n.d(t,{l:function(){return c}});var s=n(85893),r=n(94184),l=n.n(r),a=n(63650),i=n(74548),o=n(91529);let c=(0,n(33888).$j)(e=>{let{notebook:{spotlightParticipant:t}}=e;return{spotlightParticipant:t}},e=>({dispatch:e}))(e=>{let{dispatch:t,participants:n,spotlightParticipant:r,size:c,...d}=e;return n.length?(0,s.jsx)("div",{className:"flex flex-row-reverse",...d,children:n.map((e,d)=>(0,s.jsx)("button",{className:l()(!e.self&&"pointer","bg-transparent pa0 ma0 bn tooltipped tooltipped-sw"),"aria-label":e.self?"You":r===e.id?"Stop spotlighting ".concat((0,o.KY)(e)):"Spotlight ".concat((0,o.KY)(e)),disabled:e.self,style:{marginLeft:(-(.6*c)*n.length-1)/n.length},children:(0,s.jsx)(a.Yt,{onClick:()=>{e.self||t({type:"spotlight",id:r===e.id?null:e.id})},user:{...e,type:"individual"},size:c,style:{borderColor:(0,i.Zt)(d),boxShadow:r===e.id?"0 0 8px ".concat((0,i.Zt)(d)):"none"},className:"ba bw1"})},d))}):null})},90747:function(e,t,n){n.d(t,{J:function(){return a}});var s=n(85893),r=n(94184),l=n.n(r);let a=n(67294).forwardRef(function(e,t){let{open:n,children:r,onClick:a,extraStyle:i,top:o,className:c,left:d,leftPos:u,rightPos:h}=e;return(0,s.jsx)("nav",{ref:t,onClick:a,className:l()("db absolute lh-solid tl z-3",c),style:{...d?{left:void 0!==u?u:-8}:{right:void 0!==h?h:-8},width:"10rem",...o?{bottom:"1.6rem"}:{top:"100%"},...i},"aria-label":"submenu","aria-hidden":!n,children:(0,s.jsx)("div",{className:"bg-white ba b--silver br2 shadow-4",style:{marginTop:"-4px"},children:r})})})},92187:function(e,t,n){n.d(t,{YE:function(){return ne},wo:function(){return t9}});var s=n(85893),r=n(40645),l=n.n(r),a=n(94184),i=n.n(a),o=n(5152),c=n.n(o),d=n(46582),u=n(57801),h=n(41664),m=n.n(h),p=n(67294),f=n(1639),x=n(22878);let g=e=>(0,s.jsxs)("svg",{width:"94",height:"95",viewBox:"0 0 94 95",fill:"currentColor",...e,children:[(0,s.jsx)("path",{d:"M14 28.5H83V65.5H38L24 80.5V65.5H14V28.5Z",fill:"#E2E2E2"}),(0,s.jsx)("path",{d:"M23.5 26H11.5V63H21.5V78L35.5 63H58.5",stroke:"#454545",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M50.3095 9.28693L49.8571 8.32667L49.4048 9.28693L43.8002 21.1851L31.7902 26.7385L30.8087 27.1923L31.7902 27.6461L43.8002 33.1995L49.4048 45.0977L49.8571 46.0579L50.3095 45.0977L55.9141 33.1995L67.9241 27.6461L68.9056 27.1923L67.9241 26.7385L55.9141 21.1851L50.3095 9.28693ZM73.5238 9.28693L73.0714 8.32667L72.6191 9.28693L69.8555 15.1538L63.933 17.8923L62.9515 18.3462L63.933 18.8L69.8555 21.5385L72.6191 27.4054L73.0714 28.3656L73.5238 27.4054L76.2873 21.5385L82.2099 18.8L83.1913 18.3462L82.2099 17.8923L76.2873 15.1538L73.5238 9.28693ZM69.9523 30.5177L69.5 29.5574L69.0477 30.5177L65.1477 38.7971L56.7902 42.6616L55.8087 43.1154L56.7902 43.5692L65.1477 47.4337L69.0477 55.7131L69.5 56.6733L69.9523 55.7131L73.8523 47.4337L82.2099 43.5692L83.1913 43.1154L82.2099 42.6616L73.8523 38.7971L69.9523 30.5177Z",fill:"#C4C4C4",stroke:"#F5F5F5"}),(0,s.jsx)("path",{d:"M48.8571 8.5L54.5393 20.5627L66.7143 26.1923L54.5393 31.822L48.8571 43.8846L43.175 31.822L31 26.1923L43.175 20.5627L48.8571 8.5Z",stroke:"#454545"}),(0,s.jsx)("path",{d:"M72.0714 8.5L74.9125 14.5313L81 17.3462L74.9125 20.161L72.0714 26.1923L69.2304 20.161L63.1429 17.3462L69.2304 14.5313L72.0714 8.5Z",stroke:"#454545"}),(0,s.jsx)("path",{d:"M68.5 29.7308L72.4775 38.1746L81 42.1154L72.4775 46.0561L68.5 54.5L64.5225 46.0561L56 42.1154L64.5225 38.1746L68.5 29.7308Z",stroke:"#454545"})]}),b=e=>(0,s.jsxs)("svg",{width:"94",height:"94",viewBox:"0 0 94 94",fill:"currentColor",...e,children:[(0,s.jsx)("path",{d:"M14 28H83V65H38L24 80V65H14V28Z",fill:"#E2E2E2"}),(0,s.jsx)("path",{d:"M23.5 25.5H11.5V62.5H21.5V77.5L35.5 62.5H58.5",stroke:"#454545",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M45.4651 15.3628C45.45 14.8002 45.9019 14.3359 46.4647 14.3359H52.5342C53.0974 14.3359 53.5495 14.8008 53.5338 15.3638L52.9041 37.9419C52.889 38.4832 52.4459 38.9141 51.9045 38.9141H47.0712C46.5293 38.9141 46.0861 38.4825 46.0715 37.9409L45.4651 15.3628ZM49.5 51.7363C46.6562 51.7363 44.8789 50.1113 44.8789 47.4961C44.8789 44.8555 46.6562 43.2305 49.5 43.2305C52.3691 43.2305 54.1211 44.8555 54.1211 47.4961C54.1211 50.1113 52.3691 51.7363 49.5 51.7363Z",fill:"#C4C4C4"}),(0,s.jsx)("path",{d:"M51.5342 12.8359H45.4647C44.6205 12.8359 43.9426 13.5323 43.9653 14.3762L44.5717 36.9543C44.5935 37.7668 45.2584 38.4141 46.0712 38.4141H50.9045C51.7166 38.4141 52.3812 37.7677 52.4039 36.9559L53.0336 14.3778C53.0572 13.5333 52.379 12.8359 51.5342 12.8359ZM43.3789 46.4961C43.3789 47.9221 43.867 49.1239 44.7852 49.9655C45.6983 50.8025 46.9849 51.2363 48.5 51.2363C50.0268 51.2363 51.3143 50.803 52.2251 49.9648C53.1407 49.1222 53.6211 47.92 53.6211 46.4961C53.6211 45.0609 53.1416 43.8523 52.2259 43.0059C51.3148 42.1638 50.0268 41.7305 48.5 41.7305C46.9849 41.7305 45.6978 42.1643 44.7844 43.0052C43.8661 43.8506 43.3789 45.0588 43.3789 46.4961Z",stroke:"#454545"})]});var v=e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:[(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"currentColor",d:"M14 8C14 11.3137 11.3137 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C11.3137 2 14 4.68629 14 8ZM16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8ZM6.98981 6.10635H4.92682C4.94586 4.44326 6.15192 3.35781 8.18317 3.35781C10.1129 3.35781 11.3697 4.37344 11.3697 5.89688C11.3697 6.83633 10.9317 7.48379 9.9986 8.02334C9.12897 8.52481 8.88776 8.81045 8.88776 9.40713V9.70547H6.90729L6.88824 9.45156C6.76764 8.36611 7.08502 7.79482 7.96735 7.28701C8.83063 6.7792 9.0528 6.5126 9.0528 5.954C9.0528 5.43984 8.63385 5.08438 8.03717 5.08438C7.4278 5.08438 7.00885 5.49063 6.98981 6.10635ZM9.24957 11.6669C9.24957 12.3969 8.7735 12.8222 7.95465 12.8222C7.1358 12.8222 6.65338 12.3969 6.65338 11.6669C6.65338 10.9306 7.1358 10.5053 7.95465 10.5053C8.7735 10.5053 9.24957 10.9306 9.24957 11.6669Z"})," "]}),j=n(56419),y=n(58270),V=n(38613),w=n(34453),C=n(93091),k=n(30837),N=n(99622),L=n(1848),M=n(77919),Z=n(34085),H=n(61042),S=n(66338),R=n(52234),E=n(19703),_=n(46294),F=n(33888);k.Z.registerLanguage("javascript",N.Z),k.Z.registerLanguage("sql",Z.Z),k.Z.registerLanguage("markdown",M.Z),k.Z.registerLanguage("xml",H.Z),k.Z.registerLanguage("latex",L.Z);let D=e=>{let{content:t,node:n}=e,r=[];return r.push({from:n.from,to:n.to,type:"text"}),!function e(n){for(let s=n.firstChild;s;s=s.nextSibling)switch(s.type.name){case"LinkMark":case"CodeMark":case"ListMark":case"HeaderMark":case"EmphasisMark":case"QuoteMark":if(r.length>0){let e=r[r.length-1];e.from===s.from?e.from=s.to:e.to>=s.to&&(e.to=s.from)}break;case"URL":r.length>0&&(r[r.length-1].url=function(e){let t=new URL(e,"https://observablehq.com");if("https:"===t.protocol||"http:"===t.protocol)return t.toString()}(t.slice(s.from,s.to)));break;case"Link":case"InlineCode":case"Emphasis":case"StrongEmphasis":if(r.length>0){let t=r[r.length-1].to,n=r[r.length-1].type;r[r.length-1].to=s.from,r.push({from:s.from,to:s.to,type:s.type.name}),e(s),r.push({from:s.to,to:t,type:n})}else r.push({from:s.from,to:s.to,type:s.type.name})}}(n),(0,s.jsx)(s.Fragment,{children:r.filter(e=>e.from!==e.to).map(e=>{switch(e.type){case"text":return(0,s.jsx)(p.Fragment,{children:t.slice(e.from,e.to)},e.from);case"Link":return(0,s.jsx)("a",{href:e.url||"/error",className:"no-underline blue hover-lightest-blue link",rel:"noopener noreferrer",target:"_blank",children:t.slice(e.from,e.to)},e.from);case"InlineCode":return(0,s.jsx)("code",{className:"fw6",children:t.slice(e.from,e.to)},e.from);case"Emphasis":return(0,s.jsx)("em",{children:t.slice(e.from,e.to)},e.from);case"StrongEmphasis":return(0,s.jsx)("strong",{children:t.slice(e.from,e.to)},e.from);default:return(0,s.jsxs)(s.Fragment,{children:["unknown: ",e.type]})}})})},I=p.forwardRef(function(e,t){let{onClick:n,icon:r,className:l="",text:a,...i}=e;return(0,s.jsx)("button",{ref:t,className:"".concat("bn bg-transparent pointer animate-all hover-bg-black-05 f6 fw6 flex justify-center items-center pv2"," ").concat(l),onClick:n,...i,children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(r,{className:"mr1"}),a]})})}),P=e=>{let t,{content:n,node:r,nodeId:l}=e,a=[],i=(0,S.I0)(),{notebook:o,currentUser:c}=(0,F.v9)(e=>({notebook:e.notebook,currentUser:e.currentUser})),d=0,u="sql";function h(){return a.map(e=>n.slice(r.from+e.from,r.from+e.to)).join("")}function m(e){switch(e.toLowerCase()){case"javascript":case"typescript":case"js":default:return"js";case"sql":return"sql";case"md":case"markdown":case"text":return"md";case"html":return"html";case"tex":case"latex":return"tex"}}async function p(){await navigator.clipboard.writeText(h()),i({type:"showSuccessToast",message:"Copied code to clipboard"}),(0,_.MR)((0,_.ym)({type:"notebook:assist:copy",data:{scope:null===l?"notebook":"cell"},currentUser:c,notebook:o,eventVersion:1}))}r.toTree().iterate({enter:e=>{switch(e.type.name){case"CodeMark":d++;break;case"CodeText":a.push({from:e.from,to:e.to,type:"codeblock"});break;case"CodeInfo":"observable"===(u=n.slice(r.from+e.from,r.from+e.to))&&(u="javascript")}return!0}});let f=a.map(e=>n.slice(r.from+e.from,r.from+e.to)).join("");try{t=k.Z.highlight(f,{language:u||"sql"})}catch(e){console.error("Unable to highligh code for language",u)}return(0,s.jsxs)("div",{className:"br2 bg-near-white pt1",children:[(0,s.jsx)("pre",{className:"hljs f6 br2 pa2 fw5 overflow-x-auto ma0",children:t?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("code",{dangerouslySetInnerHTML:{__html:t.value}})}):(0,s.jsx)("code",{children:f})}),2===d&&(0,s.jsxs)("div",{className:"bt b--white flex",children:[null===l&&(0,s.jsx)(I,{icon:R.Z,text:"Insert cell",onClick:function(){let e=m(u);i({type:"insertAfter",id:o.model.nodes[o.model.nodes.length-1].id,node:{value:h(),mode:e},trigger:"keypress",source:"aiAssist"}),i({type:"blur"})},className:"w-50 blue"}),null!==l&&(0,s.jsx)(I,{icon:R.Z,text:"Replace and run",onClick:()=>(function(e){let t=m(u);"js"!==t&&i({type:"setMode",id:e,source:"aiAssist",trigger:"click",mode:t}),i({type:"editCell",id:e,text:h()}),i({type:"commit",id:e,trigger:"click",source:"aiAssist"})})(l),className:"w-50 blue"}),(0,s.jsx)(I,{icon:E.Z,text:"Copy to clipboard",onClick:p,className:"w-50 blue",style:{borderLeft:"1px solid var(--white)"}})]})]})},A=e=>{let{content:t,cursor:n,nodeId:r,suppressParagraph:l=!1}=e;if(!n)return null;let a=[];return n.iterate(e=>{var n,i,o,c;switch(e.type.name){case"Document":return a.push((0,s.jsx)("div",{className:"f6 fw4",children:(0,s.jsx)(A,{content:t,cursor:null===(n=e.node.firstChild)||void 0===n?void 0:n.cursor(),nodeId:r})},e.from)),!1;case"Paragraph":return l&&0===a.length?a.push((0,s.jsx)(D,{content:t,node:e.node},e.from)):a.push((0,s.jsx)("p",{children:(0,s.jsx)(D,{content:t,node:e.node})},e.from)),!1;case"FencedCode":return a.push((0,s.jsx)(P,{content:t,node:e.node,nodeId:r},e.from)),!1;case"BulletList":return a.push((0,s.jsx)("ul",{children:(0,s.jsx)(A,{content:t,cursor:null===(i=e.node.firstChild)||void 0===i?void 0:i.cursor(),nodeId:r})},e.from)),!1;case"OrderedList":return a.push((0,s.jsx)("ol",{children:(0,s.jsx)(A,{content:t,cursor:null===(o=e.node.firstChild)||void 0===o?void 0:o.cursor(),nodeId:r})},e.from)),!1;case"ListItem":return a.push((0,s.jsx)("li",{children:(0,s.jsx)(A,{content:t,cursor:null===(c=e.node.firstChild)||void 0===c?void 0:c.cursor(),nodeId:r,suppressParagraph:!0})},e.from)),!1;case"ListMark":return!1;case"ATXHeading1":return a.push((0,s.jsx)("h1",{children:(0,s.jsx)(D,{content:t,node:e.node})},e.from)),!1;case"ATXHeading2":return a.push((0,s.jsx)("h2",{children:(0,s.jsx)(D,{content:t,node:e.node})},e.from)),!1;case"ATXHeading3":return a.push((0,s.jsx)("h3",{children:(0,s.jsx)(D,{content:t,node:e.node})},e.from)),!1;case"ATXHeading4":return a.push((0,s.jsx)("h4",{children:(0,s.jsx)(D,{content:t,node:e.node})},e.from)),!1;case"ATXHeading5":return a.push((0,s.jsx)("h5",{children:(0,s.jsx)(D,{content:t,node:e.node})},e.from)),!1;case"ATXHeading6":return a.push((0,s.jsx)("h6",{children:(0,s.jsx)(D,{content:t,node:e.node})},e.from)),!1;case"Blockquote":return a.push((0,s.jsx)("blockquote",{children:(0,s.jsx)(D,{content:t,node:e.node})},e.from)),!1;case"HorizontalRule":return a.push((0,s.jsx)("hr",{},e.from)),!1}return!0}),(0,s.jsx)(s.Fragment,{children:a})};var T=n(62814),B=n(89896),z=n(27678),O=n(63650),W=n(68059),q=n(81027),U=n(61802),G=n(91132),Y=n(55148),K=n(7384),X=n(21482),$=n(31207),J=n(52332),Q=n(45063),ee=n(68098);let et=e=>{let{value:t}=e;return t.length?(0,s.jsxs)("div",{id:"ai-assist-cell-preview",className:"flex items-center justify-between bg-near-white bt b--white",children:[(0,s.jsx)("p",{className:"code dark-grey truncate observable-mid-gray ma0 f7 fw4 pl3 pv2",children:t}),(0,s.jsx)(T.v2,{children:e=>{let{isExpanded:t}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.j2,{className:i()("flex bn bg-transparent pointer hover-dark-gray pa2",t?"near-black":" observable-mid-gray"),title:"About your data's privacy",children:(0,s.jsx)(v,{})}),(0,s.jsx)(T.qy,{position:(e,t)=>e&&t?{left:e.right-t.width+pageXOffset-4,top:e.bottom+pageYOffset}:{},className:"pv3 ph3",style:{width:"324px"},children:(0,s.jsx)(T.sd,{children:(0,s.jsxs)("div",{className:"f6 fw4 dark-gray",children:[(0,s.jsxs)("div",{className:"mb3",children:["In the ",(0,s.jsx)("b",{children:"Focused cell"})," tab, ",B.u7," considers the contents of the currently-focused cell (as well as the schema of the selected database for SQL cells) when generating a response. This information is included in the messages sent to OpenAI."]}),(0,s.jsx)(m(),{className:"blue pointer",href:"/@observablehq/introduction-to-ai-assist?collection=@observablehq/notebook-fundamentals",target:"_blank",children:(0,s.jsxs)("span",{className:"inline-flex items-center underline-hover",children:[B.u7," Documentation",(0,s.jsx)(j.Pf,{className:"ml2"})]})})]})})})]})}})]}):null},en=e=>{let{tab:t}=e,n="When you’re in the Focused Cell tab, ".concat(B.u7," will use the contents of the cell to help answer your question better. ")+"Have questions about how we use your content? [Read more in our documentation](/@observablehq/introduction-to-ai-assist?collection=@observablehq/notebook-fundamentals).",r="".concat(B.u7,", powered by OpenAI, can help you write code and build notebooks by:\n")+"- Generating JavaScript, SQL, or HTML code\n- Fixing errors\n- Explaining how code works\n\n"+"When you’re in the General tab, you can ask ".concat(B.u7," general coding questions. ")+"Have questions about how we use your content? Read more in our [documentation](/@observablehq/introduction-to-ai-assist?collection=@observablehq/notebook-fundamentals).\n",l="node"===t?n:r;return(0,s.jsxs)("div",{className:"ph3 pt1 pb2 f5 fw4 dark-gray",children:[(0,s.jsxs)("div",{className:"flex mv2",children:[(0,s.jsx)("span",{className:"flex bg-near-white br2",children:(0,s.jsx)(V.P,{className:"mid-gray"})}),(0,s.jsx)("span",{className:"ml2 f6 overflow-hidden to-ellipsis observable-mid-gray",children:B.u7})]}),(0,s.jsx)(A,{content:l,cursor:(0,u.JH)().language.parser.parse(l).cursor(),nodeId:null})]})},es=e=>{var t;let{item:n}=e,r=(0,F.I0)(),l=(0,Y.wS)(n.sender)?(0,s.jsx)("span",{className:"flex bg-near-white br2",children:(0,s.jsx)(V.P,{className:"mid-gray"})}):(0,s.jsx)(O.Yt,{user:{...n.sender,type:"individual"},size:16,className:"h1 bg-white bw1"}),a=(0,Y.wS)(n.sender)?B.u7:(0,ee.RX)(n.sender),[o,c]=(0,p.useState)(null!==(t=n.feedback)&&void 0!==t?t:0),d=0!==o,h=d?"Feedback submitted":"Send feedback";return(0,p.useEffect)(()=>{-1!==o&&n.feedback!==o&&r({type:"chatFeedback",id:n.id,feedback:o})},[r,o,n.id,n.feedback]),(0,s.jsxs)("div",{className:"ph3 pt1 pb2 f5 fw4 dark-gray",children:[(0,s.jsxs)("div",{className:i()("mv1 flex",(0,Y.wS)(n.sender)?"justify-between":"justify-end",(0,Y.D0)(n)&&"unsent"===n.status?"light-gray":"dark-gray"),children:[(0,s.jsxs)("div",{className:"flex",children:[l,(0,s.jsx)("span",{className:"ml1 f6 overflow-hidden to-ellipsis observable-mid-gray",children:a})]}),(0,Y.wS)(n.sender)&&(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("button",{className:i()("flex pa0 bn f6 fw6 ba bg-transparent",!d&&"pointer"),disabled:d,onClick:()=>{1!==o&&c(1)},title:h,children:(0,s.jsx)(C.Z,{className:i()(1===o?"blue":"moon-gray",!d&&"hover-mid-gray"),fill:1===o?"currentColor":"none"})}),(0,s.jsx)("button",{className:i()("flex pa0 bn f6 fw6 ba bg-transparent",!d&&"pointer"),disabled:d,onClick:()=>{r({type:"showModal",modal:"aiAssistFeedback",modalProps:{message:n,setFeedback:c}}),-1!==o&&c(-1)},style:{marginLeft:2},title:h,children:(0,s.jsx)(w.Z,{className:i()(-1===o?"blue":"moon-gray",!d&&"hover-mid-gray"),fill:-1===o?"currentColor":"none"})})]})]}),(0,Y.wS)(n.sender)?n.content.body.map((e,t)=>{switch(e.type){case"markdown":return(0,s.jsx)("div",{id:"chat-message-".concat(n.sender.id),children:(0,s.jsx)(A,{content:e.text,cursor:(0,u.JH)().language.parser.parse(e.text).cursor(),nodeId:n.node_id})},t);case"br":return(0,s.jsxs)("span",{id:"chat-message-".concat(n.sender.id),style:{wordWrap:"break-word"},className:"f6 fw4",children:[e.text,(0,s.jsx)("br",{})]},t);case"p":default:return(0,s.jsx)("p",{style:{wordWrap:"break-word"},className:"f6 fw4",children:e.text},t);case"options":return null}}):(0,s.jsxs)("div",{id:"chat-message-".concat(n.sender.id),className:"flex",children:[(0,s.jsx)("div",{style:{flexGrow:2}}),(0,s.jsx)("div",{className:"pa2 bg-near-white br3",children:n.content.body.filter(e=>"br"===e.type).map((e,t)=>(0,s.jsx)("div",{className:"ma0 f6 fw4",style:{wordWrap:"break-word"},children:e.text},t))})]})]},n.id)},er=e=>{let{messages:t,nodeId:n,tab:r}=e,l=(0,p.useRef)(null),[a,i]=(0,p.useState)(0),o=(0,p.useMemo)(()=>"node"===r&&null===n?[]:t.filter(e=>!(0,Y.t8)(e)&&e.node_id===n),[t,n,r]);(0,p.useEffect)(()=>{if(o.length>a&&l.current){let e=l.current.getBoundingClientRect(),t=e.bottom-e.top,n=l.current.scrollHeight-t;n-l.current.scrollTop>8&&(l.current.scrollTop=n)}o.length<a&&i(0)},[a,o]);let c=o.filter(e=>!(0,Y.C6)(e)),d=c[c.length-1],u=c.length&&"assistgpt35turbo"!==d.sender.id&&d.content.body[0].text.length;return(0,s.jsxs)("div",{ref:l,className:"b--light-gray overflow-y-auto",onScroll:()=>{if(l.current){let e=l.current.getBoundingClientRect();e.bottom-e.top+l.current.scrollTop+2>l.current.scrollHeight?i(0):i(o.length)}},children:[(0,s.jsx)(en,{tab:r}),c.map(e=>(0,s.jsx)(es,{item:e},e.id)),u?(0,s.jsx)(el,{}):(0,s.jsx)(s.Fragment,{children:" "})]})},el=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"jsx-947cf7224e9f9266 dot-container mh3 mb2 ph2 br2 flex items-center justify-between bg-near-white",children:[(0,s.jsx)("div",{className:"jsx-947cf7224e9f9266 dot br-100 bg-observable-mid-gray"}),(0,s.jsx)("div",{className:"jsx-947cf7224e9f9266 dot br-100 bg-observable-mid-gray"}),(0,s.jsx)("div",{className:"jsx-947cf7224e9f9266 dot br-100 bg-observable-mid-gray"})]}),(0,s.jsx)(l(),{id:"947cf7224e9f9266",children:".dot-container.jsx-947cf7224e9f9266{height:1rem;width:2.25rem}.dot.jsx-947cf7224e9f9266{width:4px;height:4px;-webkit-animation-name:bounce;-moz-animation-name:bounce;-o-animation-name:bounce;animation-name:bounce;-webkit-animation-duration:1.3s;-moz-animation-duration:1.3s;-o-animation-duration:1.3s;animation-duration:1.3s;-webkit-animation-iteration-count:infinite;-moz-animation-iteration-count:infinite;-o-animation-iteration-count:infinite;animation-iteration-count:infinite}.dot.jsx-947cf7224e9f9266:nth-of-type(2){-webkit-animation-delay:.15s;-moz-animation-delay:.15s;-o-animation-delay:.15s;animation-delay:.15s}.dot.jsx-947cf7224e9f9266:nth-of-type(3){-webkit-animation-delay:.3s;-moz-animation-delay:.3s;-o-animation-delay:.3s;animation-delay:.3s}@-webkit-keyframes bounce{0%,60%,100%{-webkit-transform:translatey(0);transform:translatey(0)}30%{-webkit-transform:translatey(-2px);transform:translatey(-2px)}}@-moz-keyframes bounce{0%,60%,100%{-moz-transform:translatey(0);transform:translatey(0)}30%{-moz-transform:translatey(-2px);transform:translatey(-2px)}}@-o-keyframes bounce{0%,60%,100%{-o-transform:translatey(0);transform:translatey(0)}30%{-o-transform:translatey(-2px);transform:translatey(-2px)}}@keyframes bounce{0%,60%,100%{-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}30%{-webkit-transform:translatey(-2px);-moz-transform:translatey(-2px);-o-transform:translatey(-2px);transform:translatey(-2px)}}"})]});function ea(e){e.style.height="auto",e.style.height="".concat(Math.min(e.scrollHeight,200),"px")}let ei=e=>{let{nodeId:t,tab:n}=e,{notebook:r,currentUser:a}=(0,F.v9)(e=>e),{chatMessages:o,model:c,assist:d}=r,u=(0,F.I0)(),[h,v,j]=(0,G.G)({text:"",id:"",includeCode:!1},500),[y,V]=(0,p.useState)(!1),w=(0,p.useRef)(null),C=(0,p.useRef)(null),k=(0,J.ax)(r);(0,p.useEffect)(()=>{let e=o.find(e=>(0,Y.t8)(e)&&e.node_id===t);e&&e.id!==h.id&&(v({text:e.content.body.filter(e=>"options"!==e.type).map(e=>e.text).join("\n"),id:e.id,includeCode:e.content.body.some(e=>"options"===e.type&&JSON.parse(e.text).includeCode)}),setTimeout(()=>ea(w.current),1))},[t,o,v,h]),(0,p.useEffect)(()=>V(!!h.text.trim()),[h]);let N=(0,p.useCallback)(e=>{let{text:n,id:s,includeCode:r}=e,l=null!==t?(0,K.DY)(c,t):null,i=!!l&&!(0,X.hN)(l),o=r||i;n?u({type:"chatCreateDraft",message:{id:s,node_id:t,sender:a,status:"draft",complete:!1,local:!0,content:(0,Y.dk)(n,o?{includeCode:o}:void 0)}}):s&&u({type:"chatDeleteDraft",id:s})},[u,t,a,c]);function L(){N(h),v({text:"",id:"",includeCode:h.includeCode}),w.current.value="",ea(w.current),u({type:"chatSendDraft",id:h.id,scope:null===t?"notebook":"cell",cellIncluded:h.includeCode})}(0,p.useEffect)(()=>{N(j)},[j,N]);let M=null!==t?(0,K.DY)(c,t):null,Z="node"===n&&null===t,H=!!M&&(0,X.hN)(M),S=!k||Z||H;return(0,s.jsxs)(s.Fragment,{children:[k?H?(0,s.jsx)("div",{className:"overflow-y-auto",style:{maxHeight:500},children:(0,s.jsxs)("div",{className:"flex flex-column items-center pa4 tc",children:[(0,s.jsx)(b,{className:"light-gray"}),(0,s.jsxs)("div",{className:"mt3 f7 fw4 mid-gray",children:[B.u7," cannot chat about this type of cell"]})]})}):(0,s.jsxs)(s.Fragment,{children:[M&&(0,s.jsx)(et,{value:M.value}),(0,s.jsx)(er,{messages:o,nodeId:t,tab:n})]}):(0,s.jsx)("div",{className:"overflow-y-auto",style:{maxHeight:500},children:(0,s.jsxs)("div",{className:"flex flex-column items-center pa4 tc",children:[(0,s.jsx)(g,{className:"light-gray"}),(0,s.jsxs)("div",{className:"mt3 f7 fw4 mid-gray",children:[B.u7," (powered by OpenAI) can help you build notebooks by generating code, fixing errors, and explaining how code works."]}),(0,s.jsxs)("div",{className:"mt3 f7 fw4 dark-gray b--silver",children:["A workspace owner can enable ",B.u7," in"," ",(0,s.jsx)(m(),{href:"".concat((0,ee.rF)(r.owner),"#aiAssist"),className:"blue pointer",children:"Settings"}),"."]})]})}),(null==d?void 0:d.quota_exhausted)?(0,s.jsxs)("div",{className:"pb3 flex flex-column items-center fa fa6 dark-gray bt b--light-gray",style:{backgroundColor:"#FBF9F1"},children:[(0,s.jsx)("p",{className:"mv3",children:"Your free message quota has been used up."}),(0,s.jsx)(W.GY,{className:"ph4",href:"".concat((0,ee.rF)(r.owner),"#aiAssist"),text:"Add an OpenAI API Key to continue chatting",targetBlank:!0,icon:f.Z,iconPosition:"right"})]}):(0,s.jsxs)("div",{className:"jsx-ed35353f76d50ffd "+(i()("pa3 bt b--light-gray")||""),children:[(0,s.jsxs)("div",{id:"text-container",className:"jsx-ed35353f76d50ffd "+(i()("br3 ba b--silver flex",S&&"bg-near-white")||""),children:[(0,s.jsx)("div",{className:"jsx-ed35353f76d50ffd pt1 flex-grow-1",children:(0,s.jsx)("textarea",{onFocus:function(){if(C.current&&(C.current.scrollTop=C.current.scrollHeight),w.current){let e=w.current.value;if(e){let t=e.length;w.current.setSelectionRange(t,t)}ea(w.current)}},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),L())},ref:w,name:"draft",disabled:S,value:h.text,maxLength:2048,rows:1,placeholder:Z?"Focus a cell to chat about it":"Ask anything...",onChange:function(e){ea(w.current),v({...h,text:e.target.value,id:h.id||(0,Q.Z)(8)})},style:{resize:"none",borderRightStyle:"none",cursor:k?"auto":"not-allowed"},className:"jsx-ed35353f76d50ffd w-100 bn sans-serif ph2 f6 fw5 dark-gray lh-f6 bg-transparent"})}),(0,s.jsx)("div",{className:"jsx-ed35353f76d50ffd",children:(0,s.jsx)("button",{name:"ask-button",type:"button",disabled:!y,onClick:e=>{e.preventDefault(),e.stopPropagation(),L()},onMouseDown:e=>e.preventDefault(),title:"Ask",style:{cursor:y?"auto":"not-allowed"},className:"jsx-ed35353f76d50ffd "+(i()("br2 ma1 pa1 f6 fw6 bw0 b--transparent white flex items-center",y?"bg-blue":"bg-moon-gray")||""),children:(0,s.jsx)(x.Z,{})})})]}),(0,s.jsx)(l(),{id:"ed35353f76d50ffd",children:"#text-container.jsx-ed35353f76d50ffd{outline-color:transparent;-webkit-transition:all.1s cubic-bezier(.785,.135,.15,.86);-moz-transition:all.1s cubic-bezier(.785,.135,.15,.86);-o-transition:all.1s cubic-bezier(.785,.135,.15,.86);transition:all.1s cubic-bezier(.785,.135,.15,.86);-webkit-transition-property:border-color,outline;-moz-transition-timing-function:border-color,outline;-o-transition-timing-function:border-color,outline;transition-property:border-color,outline}#text-container.jsx-ed35353f76d50ffd:focus-within{border-color:var(--blue);outline:2px solid var(--faint-blue)}"})]})]})},eo=e=>{let{nodeId:t}=e,n=(0,F.I0)(),{notebook:{chatMessages:r,id:l}}=(0,F.v9)(e=>e),[a,o]=(0,p.useState)(!1),c=!r.some(e=>e.node_id===t),d=a?"Click again to confirm clearing chat history":"Clear chat history";return(0,s.jsxs)("button",{"aria-label":d,className:i()("ml1 flex fw6 pa2 b--none br2 bg-transparent bg-animate",c?"moon-gray":"hover-bg-focus-colorless pointer",a&&"red"),disabled:c,onBlur:()=>o(!1),onClick:e=>{a?(e.preventDefault(),e.stopPropagation(),(0,U.Fv)("/document/".concat(l,"/chat/delete"),{node_id:t}),r.filter(Y.t8).forEach(e=>{n({type:"chatDelete",id:e.id})}),o(!1)):o(!0)},title:d,children:[(0,s.jsx)(q.Z,{}),a&&(0,s.jsx)("span",{className:"ml1",children:"Clear\xa0chat?"})]})},ec=e=>{let{assist:t}=e;if(!t||t.custom)return null;let{quota_allocated:n,quota_used:r,quota_exhausted:l}=t;if(l)return(0,s.jsx)(y.eA,{"aria-label":"Chat quota used up"});if(n>r){let e="Chat tokens: ".concat(n-r," of ").concat(n," remaining"),t=Math.floor((n-r)*100/n);return t>=95?(0,s.jsx)(y.i4,{title:e}):t>=75?(0,s.jsx)(y.Aw,{title:e}):t>=50?(0,s.jsx)(y.Xt,{title:e}):t>=25?(0,s.jsx)(y.fy,{title:e}):(0,s.jsx)(y.X7,{title:e})}return null},ed=()=>{let{notebook:e}=(0,F.v9)(e=>e),t=(0,F.I0)(),{assist:n,focusId:r,model:l}=e,[a,o]=(0,p.useState)();(0,p.useEffect)(()=>{null===r&&null!==r&&t({type:"assistFocus",nodeId:r}),void 0===a&&null!==r&&o("node")},[r,r,t,a]);let c=r&&"node"===a?r:null,d=null!==r?(0,K.DY)(l,r):null,u=d?X.qz[d.mode].icon:null,h=(0,J.ax)(e);return(0,s.jsxs)(z.X,{className:"flex flex-column flex-grow-1",children:[(0,s.jsxs)(z.h,{children:[(0,s.jsxs)("div",{className:i()("flex items-center"),children:[B.u7,(0,s.jsx)(B.DY,{className:"ml2"})]}),(0,s.jsxs)(T.v2,{children:[(0,s.jsx)(T.j2,{className:"bn bg-transparent pointer pa0",style:{lineHeight:0},children:(0,s.jsx)(ec,{assist:n})}),(0,s.jsx)(T.qy,{position:T.Ly.bottomLeft,children:(0,s.jsx)(T.sd,{children:(0,s.jsxs)("div",{className:"ph3 f6 fw4 dark-gray",style:{width:"300px"},children:[(0,s.jsxs)("p",{children:["Your Observable license includes ",null==n?void 0:n.quota_allocated," ","free tokens (about"," ",1e3*Math.floor(3*((null==n?void 0:n.quota_allocated)||0)/4/1e3)," ","words) to use in ",B.u7," conversations."," "]}),(0,s.jsxs)("p",{children:["You’ve used ",(0,s.jsxs)("strong",{children:[null==n?void 0:n.quota_used," tokens"]})," so far this month."]}),(0,s.jsx)("p",{children:"Go to Settings to add an OpenAI API key and extend your usage limit."}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)(W.Ej,{href:"/@observablehq/introduction-to-ai-assist",text:"Docs",iconPosition:"right",icon:f.Z,targetBlank:!0}),(0,s.jsx)(W.GY,{href:"".concat((0,ee.rF)(e.owner),"#aiAssist"),text:"Settings",iconPosition:"right",icon:f.Z,targetBlank:!0})]})]})})})]})]}),h&&(0,s.jsxs)("div",{className:"bg-near-white flex items-center",children:[(0,s.jsx)("button",{className:i()("bl-0 br-0 bt-0 bb bw1","ph3 pv2 near-black bg-transparent f6 fw5 lh-solid pointer","node"!==a?"b--near-black":"b--transparent mid-gray"),style:{height:32},onClick:()=>o("general"),children:"General\xa0chat"}),(0,s.jsx)("div",{className:"w-100 overflow-hidden",children:(0,s.jsx)("button",{className:i()("bl-0 br-0 bt-0 bb bw1","ph3 pv2 near-black bg-transparent f6 fw5 lh-solid pointer mw-100","node"===a?"b--near-black":"b--transparent mid-gray"),style:{height:32},onClick:()=>o("node"),children:d?(0,s.jsxs)("span",{className:"flex items-center",children:[u&&(0,s.jsx)(u,{className:"mr1 flex-shrink-0"}),(0,s.jsx)("span",{className:"ml1 truncate inline-block",children:(0,$.u2)(d)||"cell ".concat(d.id)})]}):(0,s.jsx)(s.Fragment,{children:"Focused\xa0cell"})})}),(0,s.jsx)("div",{className:"flex-grow-1"}),(0,s.jsx)(eo,{nodeId:c})]}),(0,s.jsx)(ei,{nodeId:c,tab:a})]})};var eu=n(45916),eh=n(18701),em=n(27640),ep=n(97542),ef=n(69377),ex=n(23585),eg=n(24321),eb=n(97069),ev=n(97805),ej=n(38445),ey=n(25915),eV=n(82149),ew=n(94878),eC=n(9337),ek=n(88577),eN=n(91529),eL=n(8273),eM=n(57035),eZ=n(22638);let eH=e=>{let{db:t,table:n,visible:r}=e,a=(0,F.I0)(),{expandedTables:i,tableSchemas:o}=(0,F.v9)(e=>{let{page:t}=e;return{expandedTables:t.expandedTables,tableSchemas:t.tableSchemas}}),c=(0,ek.hS)(t,n),d=i.has(c),u=o.get(c),h=d&&!u,m=(0,p.useRef)();return(0,p.useEffect)(()=>{if(h){let e=new ew.n4(t,n,"sql");m.current=e,e.run(a).then(s=>{e===m.current&&a({type:"updateDatabasesPaneTableSchema",db:t,table:n,columns:s})},()=>{e===m.current&&a({type:"updateDatabasesPaneTableSchema",db:t,table:n,columns:null})})}},[t,n,h,a]),r?(0,s.jsxs)("div",{className:"jsx-97de0a3c7c913c4e ml2 mr1",children:[(0,s.jsxs)("div",{className:"jsx-97de0a3c7c913c4e copy-container hover-bg-near-white flex",children:[(0,s.jsx)("button",{onClick:()=>a({type:"toggleDatabasesPaneTable",db:t,table:n}),className:"jsx-97de0a3c7c913c4e bn br2 mw-90 overflow-hidden bg-transparent pointer flex pa1 items-center",children:(0,s.jsxs)("div",{className:"jsx-97de0a3c7c913c4e overflow-hidden flex items-center",children:[(0,s.jsx)(ej.s,{className:"pr1",style:{flexShrink:0}}),(0,s.jsx)("div",{className:"jsx-97de0a3c7c913c4e fw5 truncate dark-gray",children:(0,eM.Vi)(n)})]})}),(0,s.jsx)("button",{title:"Copy name",onClick:e=>{e.stopPropagation(),navigator.clipboard.writeText(function(e){let{database:t,schema:n,table:s}=e;return(0,ek.VS)({database:t&&eE(t),schema:n&&eE(n),table:eE(s)})}(n))},className:"jsx-97de0a3c7c913c4e copy bg-transparent squishy pl0 pointer bn br2 gray flex items-center",children:(0,s.jsx)(E.Z,{})}),(0,s.jsx)("div",{className:"jsx-97de0a3c7c913c4e mt1",children:d&&(void 0===u?(0,s.jsx)(eh.Z,{}):null===u?(0,s.jsx)(ey.Z,{className:"red"}):null)})]}),d&&u&&(0,s.jsx)("div",{className:"jsx-97de0a3c7c913c4e pl1 pb2",children:Array.from(u,e=>{let[t,n]=e;return(0,s.jsxs)("div",{className:"jsx-97de0a3c7c913c4e w-100 flex justify-between pv1 pl2 items-center copy-container",children:[(0,s.jsx)("span",{style:{maxWidth:"70%"},className:"jsx-97de0a3c7c913c4e truncate dark-gray",children:t}),(0,s.jsx)("button",{title:"Copy name",onClick:e=>{e.stopPropagation(),navigator.clipboard.writeText(eE(t))},className:"jsx-97de0a3c7c913c4e copy mr-auto bg-transparent nt1 nb1 squishy pointer bn gray flex items-center br2",children:(0,s.jsx)(E.Z,{})}),(0,s.jsx)("span",{style:{maxWidth:"30%"},title:n.databaseType,className:"jsx-97de0a3c7c913c4e gray br2",children:n.type})]},t)})}),(0,s.jsx)(l(),{id:"97de0a3c7c913c4e",children:".copy.jsx-97de0a3c7c913c4e{visibility:hidden}.copy-container.jsx-97de0a3c7c913c4e:hover .copy.jsx-97de0a3c7c913c4e{visibility:visible}"})]}):null},eS=e=>{let{db:t,owner:n,readOnly:r,isPrivateInPublic:a=!1,isBucketUnavailable:i=!1,isPrivateBucketError:o=!1}=e,c=(0,F.I0)(),{expandedDatabases:d,databaseSchemas:u}=(0,F.v9)(e=>{let{page:t}=e;return{expandedDatabases:t.expandedDatabases,databaseSchemas:t.databaseSchemas}}),h=(0,F.v9)(e=>{let{currentUser:t}=e;return t}),m=(0,ek.x2)(t),f=d.has(m),x=u.get(m),g=f&&!x,b=(0,p.useRef)(),v=(0,J.Vu)(h,n);return((0,p.useEffect)(()=>{if(g){let e=new ew.Y2(t);b.current=e,e.run(c).then(n=>{e===b.current&&c({type:"updateDatabasesPaneDatabaseSchema",db:t,tables:n})},()=>{e===b.current&&c({type:"updateDatabasesPaneDatabaseSchema",db:t,tables:null})})}},[t,g,c]),a||i||o)?(0,s.jsxs)("div",{className:"jsx-33e710a8f6457bfc ma3 f7 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"jsx-33e710a8f6457bfc faux-button flex-column items-center",children:[(0,s.jsx)("div",{className:"jsx-33e710a8f6457bfc flex",children:(0,s.jsxs)("div",{className:"jsx-33e710a8f6457bfc flex items-center pb1",children:[(0,s.jsx)(eu.Z,{className:"w1 h1 mr1 white bg-red b--red flex-no-shrink br-pill","aria-label":"Private file"}),(0,s.jsx)("div",{title:t.name,className:"jsx-33e710a8f6457bfc truncate fw6 red",children:t.name})]})}),(0,s.jsx)("div",{className:"jsx-33e710a8f6457bfc overflow-x-hidden",children:(0,s.jsx)("div",{title:o?"Your workspace's S3 bucket can't be reached. Contact your workspace's owner.":"",className:"jsx-33e710a8f6457bfc truncate gray lh-title",children:a?"Only available in private notebooks":i?"Private file storage unavailable":"Unable to access file"})})]}),(0,s.jsxs)("div",{className:"jsx-33e710a8f6457bfc flex flex-shrink-0 items-center",children:[(0,s.jsx)(R.Z,{className:"pa2 ba b--white moon-gray","aria-label":"Insert disabled"}),(0,s.jsx)(ex.v,{className:"pa2 ba b--white moon-gray","aria-label":"Menu disabled"})]}),(0,s.jsx)(l(),{id:"33e710a8f6457bfc",children:".faux-button.jsx-33e710a8f6457bfc{padding:1px 6px}"})]}):(0,s.jsxs)("div",{className:"ma3 f7",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("button",{onClick:()=>c({type:"toggleDatabasesPaneDatabase",db:t}),className:"w-100 bn br2 bg-transparent hover-bg-near-white pointer",children:(0,s.jsxs)("div",{className:"flex items-center ",children:[(0,s.jsxs)("div",{className:"tl",children:[(0,s.jsx)("div",{className:"pb1 fw6 near-black",children:t.name}),(0,s.jsxs)("div",{className:"gray",children:[(0,ek.w4)(t.dialect)||"Unknown","DatabaseClient"===t.type&&"team"===n.type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"light-gray",children:" • "}),(0,eN.KY)(n)]})]})]}),(0,s.jsx)("div",{children:f&&(void 0===x?(0,s.jsx)(eh.Z,{className:"ml2"}):null===x?(0,s.jsx)(ey.Z,{className:"red ml2"}):null)})]})}),(0,s.jsxs)("div",{className:"flex flex-shrink-0 items-center",children:[(0,s.jsx)(W.hU,{icon:R.Z,onClick:()=>c({type:"insertDatabase",source:t}),title:"Insert into notebook"}),(0,s.jsxs)(T.v2,{children:[(0,s.jsx)(W.hU,{icon:ex.v,title:"Database actions",colorless:!0,asMenuButton:!0,disabled:r}),(0,s.jsxs)(T.qy,{style:{width:200},children:[(0,s.jsxs)(T.sN,{onSelect:()=>c({type:"refreshDatabasesPaneSchema",db:t}),disabled:r,children:[(0,s.jsx)(ev.Z,{className:"mr2"})," Refresh schema"]}),(0,s.jsxs)(T.sN,{onSelect:()=>c({type:"insertDatabase",source:t}),disabled:r,children:[(0,s.jsx)(R.Z,{className:"mr2"})," Insert into notebook"]}),"DatabaseClient"===t.type&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(T.sN,{onSelect:()=>c({type:"copyDatabaseCode",db:t}),children:[(0,s.jsx)(E.Z,{className:"mr2"})," Copy usage code"]}),v&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.R,{}),(0,s.jsxs)(T.Uk,{href:"".concat((0,ee.rF)(n),"/databases?edit=").concat(encodeURIComponent(t.name)),className:"nowrap",children:[(0,s.jsx)(ep.Z,{className:"mr2","aria-label":"Database actions"}),"Edit details"]})]})]})]})]})]})]}),null==x?void 0:x.map(e=>(0,s.jsx)(eH,{visible:f,db:t,table:e},(0,ek.VS)(e)))]})},eR=()=>{let e=(0,F.I0)(),{nodes:t,owner:n,files:r,allowsConnections:l,readOnly:a,isPublic:o,hasActiveBucket:c,privateBucketStatus:d,focusId:u}=(0,F.v9)(e=>{var t;let{notebook:n,currentUser:s}=e;return{nodes:n.model.nodes,owner:n.owner,files:n.files,allowsConnections:(0,eL.cE)(n),teamNotebook:(0,eL.p0)(n),readOnly:(0,eL.os)(n),isPublic:(0,eL.HW)(n),hasActiveBucket:(0,eL.uT)(s,n.owner),privateBucketStatus:null===(t=(0,ee.xT)(s,n.owner))||void 0===t?void 0:t.private_bucket_status,focusId:n.focusId}}),h=(0,p.useRef)(),[m,f]=(0,p.useState)([]);(0,p.useEffect)(()=>{let t=[],n=new eC.S(async(e,s)=>{e({type:"request_data_sources",mode:"table"});try{for await(let e of s()){if(h.current!==n)return;let{name:s,dialect:r}=e,l={name:"".concat(s),type:"cell",dialect:(0,ek.Ov)(r)};t.push(l),t.sort(ek.zO),f(t.slice())}}catch(e){console.error("Error fetching database clients: ",e)}});return h.current=n,n.run(e),()=>{h.current=void 0,f([])}},[e]);let{databaseClients:x}=(0,eZ.Z)(t),{data:g}=(0,U.h_)(x.size>0&&l?"/team/".concat(n.id,"/data-connectors?detail=false"):null),b=(0,p.useMemo)(()=>g?g.map(e=>({name:e.name,type:"DatabaseClient",dialect:(0,ek.h8)(e.type)})):[],[g]).filter(e=>{let{name:t}=e;return x.has(t)}),v=(0,p.useMemo)(()=>{let e=[];for(let[t,n]of r){let s=(0,eV.S5)(n);null===s||(0,eL.Jw)(n)||e.push({name:t,type:"FileAttachment",dialect:s,inPrivateBucket:null!==n.privateBucketId})}return e},[r]),j=null!==u?u:t[t.length-1].id;return(0,s.jsxs)(z.X,{children:[(0,s.jsx)(z.h,{children:"Databases"}),(0,s.jsxs)("div",{className:"mb3",children:[(0,s.jsxs)("div",{className:"ph3 pt3 f6 fw6 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:i()("flex items-center",l?"near-black":"gray"),children:[(0,s.jsx)(em.Z,{className:i()("mr2 pa1 br2",l?"bg-near-white":"bg-white moon-gray")}),"Database connections"]}),(0,s.jsx)(W.hU,{onClick:()=>e({type:"showModal",modal:"addDatabase",modalProps:{nodeId:j}}),icon:eb.Z,"aria-label":"Add database",colorless:!0,disabled:a||!l,className:"nt2 nb2"})]}),!l&&(0,s.jsx)("div",{className:"ph3 pt2 gray f7",children:"Only available in private notebooks"}),b.length>0&&b.map(e=>(0,s.jsx)(eS,{db:e,owner:n,readOnly:a},(0,ek.x2)(e))),m.length>0&&(0,s.jsx)("div",{className:"ph3 pt3 mt3 f6 fw6 flex justify-between items-center bt b--light-silver",children:(0,s.jsxs)("div",{className:"flex items-center near-black",children:[(0,s.jsx)(eg.Z,{className:"mr2 pa1 br2 bg-near-white"}),"Database cells"]})}),m.length>0&&m.map(e=>(0,s.jsx)(eS,{db:e,owner:n,readOnly:a},(0,ek.x2)(e))),v.length>0&&(0,s.jsx)("div",{className:"ph3 pt3 mt3 f6 fw6 flex justify-between items-center bt b--light-silver",children:(0,s.jsxs)("div",{className:"flex items-center near-black",children:[(0,s.jsx)(ef.Z,{className:"mr2 pa1 br2 bg-near-white"}),"Database files"]})}),v.length>0&&v.map(e=>(0,s.jsx)(eS,{db:e,owner:n,readOnly:a,isPrivateInPublic:e.inPrivateBucket&&o,isBucketUnavailable:e.inPrivateBucket&&!c,isPrivateBucketError:e.inPrivateBucket&&"error"===d},(0,ek.x2)(e)))]})]})};function eE(e){return/[^0-9A-Z$_]/i.test(e)?'"'.concat(e.replaceAll('"','""'),'"'):e}var e_=n(47985),eF=n(35433),eD=n(36779),eI=n(67534),eP=n(97795),eA=n(88027);let eT=()=>{let e=(0,F.I0)(),t=(0,F.v9)(e=>{let{notebook:t}=e;return t}),n=(0,F.v9)(e=>{let{page:{dependenciesPaneSpecifier:t}}=e;return t});(0,p.useEffect)(()=>{let t=setTimeout(()=>{n&&e({type:"removeDependenciesPaneSpecifier"})},3e3);return()=>clearTimeout(t)},[n,e]);let r=(0,eP.uF)(t),l=(0,eP.uF)(t,{ignoreResolutions:!0});return r&&l?(0,s.jsx)(eB,{dispatch:e,notebook:t,importData:r,latestImportData:l,selectedSpecifier:n}):(0,s.jsxs)(z.X,{children:[(0,s.jsx)(z.h,{children:"Dependencies"}),(0,s.jsx)("div",{className:"flex justify-center pa3",children:(0,s.jsx)(eh.Z,{})})]})},eB=e=>{let{dispatch:t,notebook:n,importData:r,latestImportData:a,selectedSpecifier:o}=e,{directImports:c}=(0,p.useMemo)(()=>(0,eP.$r)(r),[r]),[d,u]=(0,p.useState)(new Map),h=(0,p.useRef)(!0);(0,p.useEffect)(()=>{let e=setTimeout(()=>{h.current=!1},1e3);return()=>clearTimeout(e)},[]);let m=(0,J.mG)(n),f=(0,eL.os)(n)||!(m&&(0,eI.QY)(n))||n.isCompare,x=n.trashed?" because the notebook is in the trash":m?n.isCompare?" while in compare mode":"aborted"===n.clientState?" because there was a connection error":n.autosave?n.isReverting?" because the notebook is reverting":(0,eL.os)(n)?" because the notebook is read-only":null:" while viewing history":" because you don’t have permission to edit this notebook",g=new Set(Array.from(c).flatMap(e=>{let[t,n]=e;return[t,...n.map(e=>{let[,t]=e;return t})]})),b=new Map(Object.entries(a.specifiers).slice(1).flatMap(e=>{let[t,n]=e;return(0,eP.xT)(n)?[]:[[t,eA.Z.parse(n.resolution)]]})),v=new Set(Object.entries(r.specifiers).slice(1).filter(e=>{let[,t]=e;return(0,eP.xT)(t)}).map(e=>{let[t]=e;return t})),j=new Map([...b].filter(e=>{var t;let[n]=e;return!(null===(t=eA.Z.parse(n))||void 0===t?void 0:t.version)})),y=new Map(n.model.resolutions.filter(e=>"notebook"===e.type).map(e=>[e.specifier,eA.Z.parse(e.value)])),V=new Map([...j].filter(e=>{let[t,n]=e,s=y.get(t);return s&&void 0!==s.version&&s.version!==n.version})),w=[...V.keys()].filter(e=>g.has(e)).length;function C(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=new Map(d);if(e)for(let[e,t]of V)n.set(e,t.version);else for(let[e,t]of j){var s;(null===(s=y.get(e))||void 0===s?void 0:s.version)||n.set(e,t.version)}[...y].forEach(e=>{let[t]=e;b.has(t)||n.set(t,void 0)}),t({type:"toggleDependencyLock",locked:!0,bulk:!0}),u(n)}function k(e,t){if(!b.get(e))return;let n=y.has(e)?y.get(e).version:null,s=new Map(d);t==n?s.delete(e):s.set(e,t),u(s)}return(0,s.jsxs)(z.X,{"data-testid":"dependencies-pane",children:[(0,s.jsx)(z.h,{children:"Dependencies"}),c.size>0?(0,s.jsxs)(s.Fragment,{children:[f?(0,s.jsxs)("div",{className:l().dynamic([["e75ddc268205549d",[h.current?"0.25s":"0s"]]])+" f7 pa3 bb b--light-silver bg-washed-yellow",children:["Dependency changes cannot be made",x,"."]}):null,(0,s.jsxs)("div",{className:l().dynamic([["e75ddc268205549d",[h.current?"0.25s":"0s"]]])+" pa3 flex items-center justify-between lh-copy f6 bb b--light-silver",children:[(0,s.jsx)("div",{className:l().dynamic([["e75ddc268205549d",[h.current?"0.25s":"0s"]]])+" "+(i()("mr2",w?"fw7":"")||""),children:w?(0,eL.YY)(w,"update available","updates available"):"No updates available"}),(0,s.jsx)(W.KM,{disabled:f||!w,onClick:()=>C(!0),text:"Update all",className:"nowrap nr2"}),(0,s.jsxs)(T.v2,{children:[(0,s.jsx)(W.hU,{icon:ex.v,title:"Notebook import actions",colorless:!0,asMenuButton:!0}),(0,s.jsxs)(T.qy,{position:T.Ly.bottomLeft,children:[(0,s.jsx)(T.sN,{disabled:f,onSelect:C,children:"Lock all"}),(0,s.jsx)(T.sN,{disabled:f,onSelect:function(){t({type:"toggleDependencyLock",locked:!1,bulk:!0}),u(new Map([...y].map(e=>{let[t]=e;return[t,b.has(t)?null:void 0]})))},children:"Unlock all"})]})]})]}),(0,s.jsxs)("div",{className:l().dynamic([["e75ddc268205549d",[h.current?"0.25s":"0s"]]])+" pa3",children:[(0,s.jsx)("div",{"data-testid":"direct-imports",className:l().dynamic([["e75ddc268205549d",[h.current?"0.25s":"0s"]]])+" pv2 f6 fw6 lh-title near-black",children:"Direct imports"}),Array.from(g).filter(e=>c.has(e)).sort().map(e=>{var t,n;return(0,s.jsx)("div",{"data-cy":"notebook-import","data-import-type":"direct",className:l().dynamic([["e75ddc268205549d",[h.current?"0.25s":"0s"]]])+" "+(i()("nl1 nr1 mv1",o===e?"blue-fade":"",v.has(e)?"error":"")||""),children:(0,s.jsx)(ez,{specifier:e,resolvedVersion:d.has(e)?d.get(e):null===(t=y.get(e))||void 0===t?void 0:t.version,latestVersion:null===(n=b.get(e))||void 0===n?void 0:n.version,onLock:t=>k(e,t),isReadonly:f,isDirty:d.has(e)})},e)})]}),g.size>c.size&&(0,s.jsxs)("div",{className:l().dynamic([["e75ddc268205549d",[h.current?"0.25s":"0s"]]])+" pa3 pt0",children:[(0,s.jsx)("div",{"data-testid":"indirect-imports",className:l().dynamic([["e75ddc268205549d",[h.current?"0.25s":"0s"]]])+" pv2 f6 fw6 lh-title near-black",children:"Indirect imports"}),Array.from(g).filter(e=>!c.has(e)).sort().map(e=>{var t,n,a;return(0,s.jsx)("div",{"data-cy":"notebook-import","data-import-type":"indirect",className:l().dynamic([["e75ddc268205549d",[h.current?"0.25s":"0s"]]])+" "+(i()("nl1 nr1 mv1",o&&(null===(t=c.get(o))||void 0===t?void 0:t.some(t=>{let[,n]=t;return n===e}))?"blue-fade":"",v.has(e)?"error":"")||""),children:(0,s.jsx)(ez,{specifier:e,resolvedVersion:d.has(e)?d.get(e):null===(n=y.get(e))||void 0===n?void 0:n.version,latestVersion:null===(a=b.get(e))||void 0===a?void 0:a.version,onLock:t=>k(e,t),isReadonly:f,isDirty:d.has(e),importers:r.imports.filter(t=>{let[,n]=t;return n===e}).map(e=>{let[t]=e;return t})})},e)})]})]}):(0,s.jsx)("div",{className:l().dynamic([["e75ddc268205549d",[h.current?"0.25s":"0s"]]])+" pa3 mid-gray",children:"This notebook has no dependencies"}),d.size?(0,s.jsxs)("div",{className:l().dynamic([["e75ddc268205549d",[h.current?"0.25s":"0s"]]])+" pa2 sticky bottom-0 right-0 left-0 flex justify-end br3 br--bottom shadow-1-ns bg-white",children:[(0,s.jsx)(W.kq,{text:"Cancel",onClick:()=>u(new Map)}),(0,s.jsx)(W.KM,{text:"Save ".concat((0,eL.YY)(d.size,"change")),onClick:function(){d.size&&(t({type:"resolveDependencies",source:"dependenciesPane",trigger:"click",resolutions:[...d].map(e=>{let[t,n]=e;return{type:"notebook",specifier:t,value:void 0===n?null:"".concat(b.get(t).id).concat(null===n?"":"@".concat(n))}})}),u(new Map))}})]}):null,(0,s.jsx)(l(),{id:"e75ddc268205549d",dynamic:[h.current?"0.25s":"0s"],children:".error.__jsx-style-dynamic-selector a{color:var(--red)}.blue-fade.__jsx-style-dynamic-selector{-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-animation-name:flash;-moz-animation-name:flash;-o-animation-name:flash;animation-name:flash;-webkit-animation-duration:2s;-moz-animation-duration:2s;-o-animation-duration:2s;animation-duration:2s;-webkit-animation-iteration-count:1;-moz-animation-iteration-count:1;-o-animation-iteration-count:1;animation-iteration-count:1;-webkit-animation-timing-function:ease;-moz-animation-timing-function:ease;-o-animation-timing-function:ease;animation-timing-function:ease;-webkit-animation-delay:".concat(h.current?"0.25s":"0s",";-moz-animation-delay:").concat(h.current?"0.25s":"0s",";-o-animation-delay:").concat(h.current?"0.25s":"0s",";animation-delay:").concat(h.current?"0.25s":"0s","}@-webkit-keyframes flash{0%{background-color:var(--observable-focus-light-blue)}60%{background-color:var(--observable-focus-light-blue)}100%{background-color:#fefefe}}@-moz-keyframes flash{0%{background-color:var(--observable-focus-light-blue)}60%{background-color:var(--observable-focus-light-blue)}100%{background-color:#fefefe}}@-o-keyframes flash{0%{background-color:var(--observable-focus-light-blue)}60%{background-color:var(--observable-focus-light-blue)}100%{background-color:#fefefe}}@keyframes flash{0%{background-color:var(--observable-focus-light-blue)}60%{background-color:var(--observable-focus-light-blue)}100%{background-color:#fefefe}}")})]})},ez=e=>{let{specifier:t,resolvedVersion:n,latestVersion:r,onLock:l,importers:a,isDirty:i,isReadonly:o}=e,c=eA.Z.parse(t);return null===c?(0,s.jsx)(eO,{specifier:t,title:"URL import versions cannot be locked",buttonText:"N/A",locked:!1,rel:"ugc nofollow noreferrer",isReadonly:o,isDirty:i,importers:a,dim:!0}):void 0!==c.version?(0,s.jsx)(eO,{specifier:c,title:'This dependency version is locked via the "@'.concat(c.version,'" in the import statement'),buttonText:"".concat(c.version),locked:!0,isReadonly:o,isDirty:i,importers:a}):void 0===n&&void 0===r?(0,s.jsx)(eO,{specifier:c,title:"Error: specified notebook not found",buttonText:"⚠︎",locked:!1,isReadonly:o,isDirty:i,importers:a,dim:!0}):o?(0,s.jsx)(eO,{specifier:c,title:n?"Version is locked":"Version is not locked",buttonText:n?"".concat(n):"".concat(r),locked:!!n,isReadonly:o,isDirty:i,importers:a}):n||void 0===r?n!==r&&r?(0,s.jsx)(eO,{specifier:c,title:"Update this dependency to ".concat(r),buttonText:"".concat(n," → ").concat(r),locked:!0,isReadonly:o,isDirty:i,importers:a,onLockClick:()=>l(null),onButtonClick:()=>l(r)}):(0,s.jsx)(eO,{specifier:c,title:"This dependency version is the latest",buttonText:"".concat(n),locked:!0,isReadonly:o,isDirty:i,importers:a,onLockClick:()=>l(null)}):(0,s.jsx)(eO,{specifier:c,title:"Lock at version ".concat(r),buttonText:"".concat(r),locked:!1,isReadonly:o,isDirty:i,importers:a,onLockClick:()=>l(r)})},eO=e=>{let{specifier:t,title:n,buttonText:r,locked:l,isReadonly:a,isDirty:o,importers:c,onLockClick:d=null,onButtonClick:u=null,dim:h=!1,rel:m=""}=e,p=(0,F.I0)();return(0,s.jsxs)("div",{className:i()("flex items-center justify-between pa1",h?"gray":""),children:[(0,s.jsx)(eD.Z,{href:t instanceof eA.Z?t.toNotebookURL():t,rel:m,title:"".concat(t).concat(c?"\nImported by:\n".concat(c.join("\n")):""),className:"truncate overflow-hidden nowrap",children:"".concat(t)}),(0,s.jsxs)("div",{className:"ml2 tr flex justify-end items-center nowrap",title:n,children:[a||null===u?(0,s.jsx)(W.sn,{disabled:!0,onClick:()=>{},style:{lineHeight:.5,color:"var(--".concat(h?"gray":"dark-gray",")")},className:"bn pr1",text:r}):(0,s.jsx)(W.KM,{onClick:()=>{u(),p({type:"upgradeDependency"})},style:{lineHeight:.5},className:"bn mr1",text:r,"data-testid":"upgrade-dependency-button"}),(0,s.jsx)("button",{"data-cy":"".concat(l?"Locked":"Unlocked"," ").concat(t),disabled:!a&&null===d,style:{color:o?"var(--blue)":void 0,lineHeight:.5},onClick:d?()=>{p({type:"toggleDependencyLock",locked:!l}),d()}:()=>{},className:i()("ph0 flex items-center bn bg-transparent",null!==d?"hover-black pointer dark-gray":"gray"),children:l?(0,s.jsx)(e_.Z,{}):(0,s.jsx)(eF.Z,{})})]})]},"notebook-".concat(t))};var eW=n(51219),eq=n(95591),eU=n(97543),eG=n(80537),eY=n(23765),eK=n(19669),eX=n(24600),e$=n(2392),eJ=n(84342);let eQ=e=>{let{name:t,provider:n,dispatch:r,mimeType:l,size:a,downloadUrl:i}=e;return(0,s.jsx)("div",{className:"flex flex-shrink-0 items-center",children:(0,s.jsxs)(T.v2,{children:[(0,s.jsx)(W.hU,{icon:ex.v,title:"File actions",colorless:!0,asMenuButton:!0}),(0,s.jsxs)(T.qy,{style:{width:200},children:[(0,s.jsxs)(T.sN,{onSelect:()=>r({type:"cloudFileSnippet",name:t,provider:n,mimeType:l,size:a}),children:[(0,s.jsx)(R.Z,{className:"mr2"})," Insert into notebook"]}),i?(0,s.jsxs)(T.Uk,{onClick:()=>r({type:"downloadCloudFile",provider:n,mimeType:l,size:a}),href:i,children:[(0,s.jsx)(eU.Z,{className:"mr2"})," Download"]}):null,(0,s.jsxs)(T.sN,{onSelect:()=>r({type:"removeCloudFile",name:t,provider:n,mimeType:l,size:a}),className:"hover-dark-red hover-bg-washed-red",children:[(0,s.jsx)(q.Z,{className:"mr2"})," Delete"]})]})]})})},e1=e=>{var t;let{name:n,path:r,used:l,hasToken:a,dispatch:i}=e,o=(0,eJ.Xk)(r),{data:c,error:d}=(0,eq.ZP)(a?"/user/token?provider=microsoftData":null,U.a8,{revalidateOnFocus:!1}),{data:u,error:h=d}=(0,eq.ZP)(()=>!d&&c&&o?(0,eJ.g4)(r,c.access_token):null,e=>{let[t,n]=e;return(0,eX.r)(t,n)},{revalidateOnFocus:!1});return(0,s.jsxs)("div",{className:"ma3 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center truncate",children:[(0,s.jsx)(eK.ZP,{className:"flex-shrink-0 mr2",style:{width:24,height:24}}),(0,s.jsxs)("div",{className:"f7 truncate",children:[(0,s.jsx)("div",{className:"fw6 dark-gray flex items-center truncate",children:!h&&a&&o?(0,s.jsx)("div",{className:"truncate",children:(0,s.jsx)("a",{href:null!==(t=null==u?void 0:u.webUrl)&&void 0!==t?t:void 0,className:"hover-blue no-underline",target:"_blank",rel:"noreferrer",children:n})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eG.Z,{className:"flex-shrink-0",style:{width:12,height:12},"data-testid":"error-message",children:(0,s.jsx)("title",{children:null==h?void 0:h.message})}),(0,s.jsx)("div",{className:"ml2 dark-red truncate",children:n})]})}),(0,s.jsxs)("div",{className:"pt1 gray truncate",children:[l?(0,s.jsx)("span",{className:"f7 fw6 blue",children:"In use"}):(0,s.jsx)("span",{className:"f7 gray",children:"Unused"})," • ",(null==c?void 0:c.provider_username)||"No account connected"]})]})]}),(0,s.jsx)(eQ,{name:n,mimeType:(0,eJ.bh)(u,n),size:(0,eJ.ap)(u),downloadUrl:u?u["@microsoft.graph.downloadUrl"]:void 0,provider:"microsoftData",dispatch:i})]})},e0=e=>{var t,n;let{name:r,path:l,used:a,hasToken:i,dispatch:o}=e,c=(0,e$.ty)(l),{data:d,error:u}=(0,eq.ZP)(i?"/user/token?provider=googleData":null,U.a8,{revalidateOnFocus:!1}),{data:h,error:m=u}=(0,eq.ZP)(()=>!u&&d&&c?(0,e$.wA)("".concat(l,"?fields=mimeType,size,webContentLink,webViewLink&supportsAllDrives=true"),d.access_token):null,e=>{let[t,n]=e;return(0,eX.r)(t,n)},{revalidateOnFocus:!1});return(0,s.jsxs)("div",{className:"ma3 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center truncate",children:[(0,s.jsx)(eY.Z,{className:"flex-shrink-0 mr2",style:{width:24,height:24}}),(0,s.jsxs)("div",{className:"f7 truncate",children:[(0,s.jsx)("div",{className:"fw6 dark-gray flex items-center truncate",children:!m&&i&&c?(0,s.jsx)("div",{className:"truncate",children:(0,s.jsx)("a",{href:null==h?void 0:h.webViewLink,className:"hover-blue no-underline",target:"_blank",rel:"noreferrer",children:r})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eG.Z,{className:"flex-shrink-0",style:{width:12,height:12},"data-testid":"error-message",children:(0,s.jsx)("title",{children:null==m?void 0:m.message})}),(0,s.jsx)("div",{className:"ml2 dark-red truncate",children:r})]})}),(0,s.jsxs)("div",{className:"pt1 gray truncate",children:[a?(0,s.jsx)("span",{className:"f7 fw6 blue",children:"In use"}):(0,s.jsx)("span",{className:"f7 gray",children:"Unused"})," • ",(null==d?void 0:d.provider_username)||"No account connected"]})]})]}),(0,s.jsx)(eQ,{name:r,mimeType:null!==(t=null==h?void 0:h.mimeType)&&void 0!==t?t:"",size:+(null!==(n=null==h?void 0:h.size)&&void 0!==n?n:0),downloadUrl:null==h?void 0:h.webContentLink,provider:"googleData",dispatch:o})]})},e2=e=>{let{specifier:t,...n}=e;switch(t.provider){case"microsoftData":return(0,s.jsx)(e1,{...t,...n});case"googleData":return(0,s.jsx)(e0,{...t,...n});default:return null}};var e3=n(21582),e5=n(15784);let e4=e=>{let{children:t,onDrop:n,dispatch:r,fileSource:l,loginSource:a,currentUser:i,readOnly:o,disabled:c}=e,d=(0,p.useCallback)(e=>{(0,J.Yb)(i)?(r({type:"attachLocalFiles",files:e,source:l,trigger:"dragAndDrop"}),null==n||n(Array.from(e))):i||r({type:"showModal",modal:"login",modalProps:{loginReason:"files"},trigger:"dragAndDrop",source:a})},[i,r,a,l,n]),{getRootProps:u,isDragActive:h}=(0,e3.uI)({onDrop:d,noClick:!0});return(0,s.jsxs)("div",{className:"relative mb3","data-cy":"drop-target",...o||c?null:u(),children:[t,h&&(0,s.jsxs)("div",{className:"flex absolute nb3 right-0 bottom-0 top-0 left-0 tc bg-near-white b--light-silver o-90 b--dashed justify-center flex-column z-max bw1",children:[(0,s.jsx)("div",{className:"f6 fw6 near-black",children:"Upload files"}),(0,s.jsxs)("div",{className:"f7 fw5 dark-gray mt2",children:[(0,eN.BU)(e5.D_)," maximum per file"]})]})]})};var e8=n(87096);let e7=e=>{let{file:t,dispatch:n,used:r,currentUser:l,isFileDeletable:a,canDeleteFile:i,pane:o,readOnly:c,notebook:d}=e;function u(e){n({type:"insertFile",file:e})}function h(e,t,s){(0,J.Yb)(l)?n({type:"showModal",modal:"replaceFile",modalProps:{fileToReplace:e}}):l||n({type:"showModal",modal:"login",modalProps:{loginReason:"files"},trigger:t,source:s})}let m=!(0,eL.uT)(l,d.owner)||t.privateBucketId;return(0,s.jsxs)("div",{className:"flex items-center justify-between ma3","data-cy":"file-item",children:[(0,s.jsx)("div",{className:"overflow-x-hidden",children:(0,s.jsx)(eW.J,{file:t,used:r})}),(0,s.jsxs)("div",{className:"flex flex-shrink-0 items-center",children:[(0,s.jsx)(W.hU,{icon:r?e8.Z:R.Z,onClick:r?()=>h(t,"click","".concat(o,"PaneReplaceFileButton")):()=>u(t),title:r?"Replace file":"Insert into notebook",disabled:r&&!m}),(0,s.jsxs)(T.v2,{children:[(0,s.jsx)(W.hU,{icon:ex.v,title:"File actions",colorless:!0,asMenuButton:!0}),(0,s.jsxs)(T.qy,{style:{width:200},children:[(0,s.jsxs)(T.sN,{onSelect:()=>u(t),disabled:c,children:[(0,s.jsx)(R.Z,{className:"mr2"})," Insert into notebook"]}),(0,s.jsxs)(T.sN,{onSelect:()=>n({type:"copyFileCode",file:t}),children:[(0,s.jsx)(E.Z,{className:"mr2"})," Copy usage code"]}),(0,s.jsx)(T.R,{}),"downloadUrl"in t&&(0,s.jsx)(T.Uk,{onClick:()=>n({type:"downloadFile",file:t}),href:t.downloadUrl,children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eU.Z,{className:"mr2"})," Download"]})}),(0,s.jsxs)(T.sN,{onSelect:()=>h(t,"click","".concat(o,"PaneMenuReplace")),disabled:!m||!r||c,children:[(0,s.jsx)(e8.Z,{className:"mr2"})," Replace file"]}),i&&!c?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.R,{}),(0,s.jsxs)(T.sN,{disabled:!a,onSelect:()=>n({type:"showModal",modal:"deleteFile",modalProps:{name:t.name}}),className:"hover-dark-red hover-bg-washed-red",children:[(0,s.jsx)(q.Z,{className:"mr2"})," Delete"]})]}):null]})]})]})]})};var e6=n(78129),e9=n(32485),te=n(62412),tt=n(42004),tn=n(746);let ts=e=>{let{title:t,icon:n,"aria-label":r,onAdd:a,disabled:o,allowsPrivate:c=!0}=e;return(0,s.jsxs)("div",{className:"jsx-335f9f217f61bc08 "+(i()("ph3 pt3 f6 fw6 lh-title flex items-center justify-between section-header",c?"near-black":"gray")||""),children:[(0,s.jsxs)("span",{className:"jsx-335f9f217f61bc08 flex items-center",children:[(0,p.createElement)(n,{className:i()("mr2 pa1 br2 border-box",c?"bg-near-white":"bg-white moon-gray"),style:{width:24,height:24}}),t]}),(0,s.jsx)(W.hU,{onClick:a,icon:eb.Z,"aria-label":r,colorless:!0,disabled:o,className:"nt2 nb2"}),(0,s.jsx)(l(),{id:"335f9f217f61bc08",children:".section-header.jsx-335f9f217f61bc08{border-top:1px solid var(--light-silver);margin-top:var(--spacing-medium)}.section-header.jsx-335f9f217f61bc08:first-of-type{border:none;margin-top:0}"})]})},tr=e=>{var t,n;let{files:r,used:l,currentUser:a,notebook:i,dispatch:o}=e,c=(r=[...r].sort((e,t)=>e.name<t.name?-1:1)).filter(e=>l.has(e.name)),d=r.filter(e=>!l.has(e.name)),u=(0,eL.HW)(i),h=(0,eL.uT)(a,i.owner),m=(null===(t=(0,ee.xT)(a,i.owner))||void 0===t?void 0:t.settings.prohibit_attachments)==="true",p=(null===(n=(0,ee.xT)(a,i.owner))||void 0===n?void 0:n.private_bucket_status)==="error",f=e=>e.privateBucketId&&(u||!h||p)?(0,s.jsx)("div",{className:"ma3","data-cy":"file-item",children:(0,s.jsx)(eW.J,{file:e,used:!0,isPrivateInPublic:u,isBucketUnavailable:!h,isBucketError:p})},e.name):(0,s.jsx)(e7,{isFileDeletable:(0,eI.cn)(e,i),canDeleteFile:(0,J.uP)(e,i),file:e,dispatch:o,used:l.has(e.name),currentUser:a,pane:"files",readOnly:(0,eL.os)(i),notebook:i},e.name),x=r.filter(e=>"pending"!==e.status&&"local"!==e.status).reduce((e,t)=>e+(t.size||0),0),g=(0,s.jsxs)(s.Fragment,{children:["File attachments"," ",x>0&&(0,s.jsxs)("span",{className:"ml1 gray",children:["(",(0,eN.BU)(x),")"]})]}),b=!(0,eI.j5)(a,i);if(0===r.length&&b)return null;let v=(0,eL.os)(i)||!(0,eI.j5)(a,i);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ts,{title:g,icon:ef.Z,"aria-label":"Upload files",disabled:v,allowsPrivate:!v,onAdd:()=>{(0,J.Yb)(a)?(o({type:"notebookFilePickerOpened",source:"filesPane",trigger:"click"}),(0,e9.Z)().then(e=>o({type:"attachLocalFiles",files:e,source:"filesPane",trigger:"click"}))):a||o({type:"showModal",modal:"login",modalProps:{loginReason:"files"},trigger:"click",source:"filesPaneAttachFileButton"})}}),v&&(0,s.jsx)("div",{className:"ph3 pt2 gray f7",children:m?"Not available in this workspace":"Only available in private notebooks"}),c.map(f),d.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tl,{children:"Unused"}),d.map(f)]}):null]})},tl=e=>{let{children:t}=e;return(0,s.jsxs)("div",{className:"flex ma3",children:[(0,s.jsx)("span",{className:"gray mr1",children:t}),(0,s.jsx)("span",{className:"flex-grow-1 bb b--light-silver",style:{height:9}})]})},ta=e=>{let{cloudFiles:t,notebook:n,currentUser:r,used:l,dispatch:a}=e,i=t.map(e=>(0,te.a)(e)).filter(tt.K),{data:o}=(0,U.h_)(r&&(0,eL.cE)(n)&&i.length>0&&"/user/tokens");function c(e,t){(0,_.MR)((0,_.ym)({type:"notebook:manage:cloudFileAuth",notebook:n,currentUser:r,data:{provider:e,alreadyAuthenticated:t},eventVersion:1}))}return(0,eL.cE)(n)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ts,{icon:j.ZP,title:"Cloud files","aria-label":"Add cloud file",onAdd:()=>a({type:"showModal",modal:"addCloudFile"}),disabled:(0,eL.os)(n)}),(0,eL.vi)(n).map(e=>(0,s.jsx)(e6.E,{provider:e,alreadyAuthenticated:!!o&&o.some(t=>t.provider===e),onAuth:c,children:(0,s.jsxs)("div",{className:"ph3 mt2 f7 flex items-center",children:[(0,s.jsx)(eG.Z,{className:"mr2 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("span",{className:"mr1 mid-gray",children:["This notebook encountered an error importing"," ",tn.c[e].name," files. Please"]}),(0,s.jsx)("button",{type:"submit",className:"blue pointer underline-hover bg-transparent pa0 bn",children:"connect your account"}),"."]})]})},e)),o&&i.length?(0,s.jsxs)(s.Fragment,{children:[Object.entries(tn.c).map(e=>{let[t,n]=e;return i.some(e=>e.provider===t)&&(0,s.jsx)(e6.E,{provider:t,alreadyAuthenticated:o.some(e=>e.provider===t),onAuth:c,children:(0,s.jsxs)("div",{className:"ph3 mt2 f7",children:[(0,s.jsxs)("span",{className:"mr1 mid-gray",children:["This notebook uses ",n.name," files."]}),(0,s.jsx)("button",{className:"blue pointer underline-hover bg-transparent pa0 bn",type:"submit",children:o.some(e=>e.provider===t)?"Switch account":"Connect account"})]})},t)}),i.map(e=>(0,s.jsx)(e2,{specifier:e,used:l.has(e.specifier),dispatch:a,hasToken:o.some(t=>t.provider===e.provider)},e.specifier))]}):null]}):(0,ee.Hw)(n)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ts,{icon:j.ZP,title:"Cloud files",disabled:!0,allowsPrivate:!1,onAdd:()=>{}}),(0,s.jsx)("div",{className:"ph3 pt2 gray f7",children:"Only available in private notebooks"})]}):null},ti=(0,F.$j)(e=>{let{notebook:t,currentUser:n}=e;return{notebook:t,currentUser:n}},e=>({dispatch:e}))(e=>{let{notebook:t,currentUser:n,dispatch:r}=e,{model:{nodes:l,resolutions:a},files:i}=t,{fileAttachments:o}=(0,eZ.Z)(l),c=a.filter(eL.HC),d=(0,eL.Pu)(i);return(0,s.jsxs)(z.X,{children:[(0,s.jsx)(z.h,{children:"Files"}),(0,s.jsxs)(e4,{dispatch:r,currentUser:n,fileSource:"filesPane",loginSource:"filesPaneDragAndDrop",readOnly:(0,eL.os)(t),disabled:!(0,eI.j5)(n,t),children:[(0,s.jsx)(tr,{files:d,used:o,currentUser:n,dispatch:r,notebook:t}),(0,s.jsx)(ta,{dispatch:r,notebook:t,currentUser:n,cloudFiles:c,used:o})]})]})});var to=n(79384),tc=n(9277),td=n(83347),tu=n(83879),th=n(13727),tm=n(11974),tp=n(45215);let tf=(0,th.V)([["Enter",e=>{let{dispatch:t}=e;return t({type:"selectNextSearchResult"}),!0}],["Shift-Enter",e=>{let{dispatch:t}=e;return t({type:"selectPreviousSearchResult"}),!0}],["Escape",e=>{let{dispatch:t}=e;return t({type:"dismissPane"}),!0}]]),tx=(0,F.$j)(e=>{let{notebook:t}=e;return{regexSearch:t.regexSearch,searchTerm:t.searchTerm,searchResults:t.searchResults,selectedSearchResult:t.selectedSearchResult}},e=>({dispatch:e}))(e=>{let{regexSearch:t,searchTerm:n,searchResults:r,selectedSearchResult:l,dispatch:a}=e;function i(e){a({type:"setSearchTerm",searchTerm:e})}let o=(0,tp._)(r,l),c=r&&void 0!==o,u=function(){if(n&&t)try{RegExp(n,"gu")}catch(e){return e.message||"invalid regex"}}(),h=(0,p.useRef)(null);return(0,p.useEffect)(()=>{h.current&&h.current!==document.activeElement&&h.current.select()},[]),(0,s.jsxs)("div",{className:"mh3",children:[(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(to.x,{type:"text",placeholder:"Find",value:n,ref:h,onChange:e=>{let{target:{value:t}}=e;return i(t)},className:"flex-auto",hasError:u,onKeyDown:function(e){tf({dispatch:a},e)&&(e.preventDefault(),e.stopPropagation())},leftElement:(0,s.jsx)("div",{children:(0,s.jsx)(td.Z,{className:"db moon-gray"})}),rightElement:n?(0,s.jsx)(W.hU,{icon:d.Z,onClick:()=>i(""),style:{width:28,height:28,marginRight:2},colorless:!0,disabled:!n}):void 0}),(0,s.jsxs)("div",{className:"flex ml2",children:[(0,s.jsx)(W.hA,{icon:()=>(0,s.jsx)(tc.Z,{className:c?"":"moon-gray",style:{transform:"rotate(-180deg)"}}),title:"Previous search result ".concat((0,tm.Z)(tu.Mq?"Shift-Mod-G":"Shift-F3")),suppressHydrationWarning:!0,onClick:()=>a({type:"selectPreviousSearchResult"}),disabled:!c,style:{borderRadius:"4px 0 0 4px",width:32,height:32},colorless:!0}),(0,s.jsx)(W.hA,{icon:()=>(0,s.jsx)(tc.Z,{className:c?"":"moon-gray"}),title:"Next search result ".concat((0,tm.Z)(tu.Mq?"Mod-G":"F3")),suppressHydrationWarning:!0,onClick:()=>a({type:"selectNextSearchResult"}),disabled:!c,style:{borderRadius:"0 4px 4px 0",width:32,height:32,marginLeft:1},colorless:!0})]})]}),u&&(0,s.jsx)("div",{className:"red mt2",children:u})]})});var tg=n(58643),tb=n(6916),tv=n(69872),tj=n(38620);let ty=(0,th.V)([["Enter",e=>{let{dispatch:t}=e;return t({type:"replaceCurrent",trigger:"keypress",source:"findPane"}),!0}],["Mod-Enter",e=>{let{dispatch:t}=e;return t({type:"replaceAll",trigger:"keypress",source:"findPane"}),!0}]]),tV=(0,F.$j)(e=>{var t;let{page:n,notebook:s}=e;return{replaceInputExpanded:n.replaceInputExpanded,replaceTerm:s.replaceTerm,canReplace:!!s.selectedSearchResult&&!!(null===(t=s.searchResults)||void 0===t?void 0:t.size)&&!(0,eL.os)(s)}},e=>({dispatch:e}))(e=>{let{canReplace:t,replaceInputExpanded:n,replaceTerm:r,dispatch:l}=e;return(0,s.jsxs)("div",{className:"flex flex-column mt3 pa3 bt b--light-silver",children:[(0,s.jsxs)("button",{className:"f6 fw6 bn flex items-center bg-transparent b--transparent relative pointer pa0",onClick:()=>l({type:"toggleReplaceInputExpanded"}),children:[n?(0,s.jsx)(tg.Z,{className:"mr1"}):(0,s.jsx)(tb.Z,{className:"mr1"}),"Replace"]}),n&&(0,s.jsxs)("div",{className:"flex mt2",children:[(0,s.jsx)(to.x,{type:"text",placeholder:"Replace",value:r,onChange:e=>{let{target:{value:t}}=e;return l({type:"setReplaceTerm",replaceTerm:t})},className:"flex-auto",leftElement:(0,s.jsx)(e8.Z,{className:"moon-gray"}),onKeyDown:function(e){ty({dispatch:l},e)&&(e.preventDefault(),e.stopPropagation())},rightElement:r?(0,s.jsx)(W.hU,{icon:d.Z,onClick:()=>l({type:"setReplaceTerm",replaceTerm:""}),style:{width:28,height:28,marginRight:2},colorless:!0,disabled:!r}):void 0}),(0,s.jsxs)("div",{className:"flex ml2",children:[(0,s.jsx)(W.hA,{icon:()=>(0,s.jsx)(tj.x,{className:t?"":"moon-gray"}),title:"Replace current ".concat((0,tm.Z)("Enter")),suppressHydrationWarning:!0,onClick:()=>l({type:"replaceCurrent",trigger:"click",source:"findPane"}),disabled:!t,style:{borderRadius:"4px 0 0 4px",width:32,height:32},colorless:!0}),(0,s.jsx)(W.hA,{icon:()=>(0,s.jsx)(tv.E,{className:t?"":"moon-gray"}),title:"Replace all ".concat((0,tm.Z)("Mod-Enter")),suppressHydrationWarning:!0,onClick:()=>l({type:"replaceAll",trigger:"click",source:"findPane"}),disabled:!t,style:{borderRadius:"0 4px 4px 0",width:32,height:32,marginLeft:1},colorless:!0})]})]})]})});var tw=n(89361);let tC=e=>{let{selectedSearchResult:t,node:n,searchResults:r,dispatch:l}=e,a=X.qz[n.mode].icon,o=(0,$.u2)(n),c=(0,p.useRef)(null);return(0,p.useEffect)(()=>{c.current&&t&&(0,tw.zT)(c.current)},[t]),(0,s.jsxs)("div",{className:"ma3",children:[(0,s.jsxs)("div",{className:"mt3 mb1 flex items-center dark-gray monospace-bold",children:[(0,s.jsx)(a,{className:"mr1"}),o||(0,s.jsxs)("span",{className:"i",children:["unnamed (#",n.id,")"]})]}),r.map((e,r)=>{let a=(null==t?void 0:t.nodeResultIndex)===r&&t.nodeId===n.id;return(0,s.jsx)("div",{className:"mh3",ref:a?c:null,"data-cy":"find-result-row",children:(0,s.jsxs)("button",{className:i()("w-100 pa1 tl bn br2 monospace",a?"bg-blue white":"bg-transparent hover-bg-light-silver"),onClick:()=>l({type:"selectSearchResult",selectedSearchResult:{nodeId:n.id,nodeResultIndex:r}}),children:[(0,s.jsx)("span",{className:a?"o-70":"o-50",children:e.beforeText}),(0,s.jsx)("span",{className:i()("br1",a?"bg-observable-orange black":"bg-observable-yellow"),children:e.termText}),(0,s.jsx)("span",{className:a?"o-70":"o-50",children:e.afterText})]})},r)})]})},tk=(0,F.$j)(e=>{let{notebook:t}=e;return{model:t.model,selectedSearchResult:t.selectedSearchResult,searchResults:t.searchResults}},e=>({dispatch:e}))(e=>{let{model:t,selectedSearchResult:n,searchResults:r,dispatch:l}=e;if(!r)return null;if(!(0,tp.n)(r))return(0,s.jsx)("div",{className:"pa3",children:"No results"});let a=[];for(let e of t.nodes){let t=r.get(e.id);t&&a.push((0,s.jsx)(tC,{node:e,selectedSearchResult:n,searchResults:t,dispatch:l},e.id))}return(0,s.jsx)("div",{className:"overflow-y-auto flex-auto bt b--light-silver",children:(0,s.jsx)("div",{children:a})})});var tN=n(48537);let tL=(0,F.$j)(e=>{let{page:t,notebook:n}=e;return{findOptionsInputExpanded:t.findOptionsInputExpanded,caseSensitiveSearch:n.caseSensitiveSearch,wholeWordSearch:n.wholeWordSearch,regexSearch:n.regexSearch}},e=>({dispatch:e}))(e=>{let{findOptionsInputExpanded:t,caseSensitiveSearch:n,wholeWordSearch:r,regexSearch:l,dispatch:a}=e;return(0,s.jsxs)("div",{className:"flex flex-column pa3 bt b--light-silver",children:[(0,s.jsxs)("button",{className:"f6 fw6 bn flex items-center bg-transparent b--transparent relative pointer pa0",onClick:()=>a({type:"toggleFindOptionsExpanded"}),children:[t?(0,s.jsx)(tg.Z,{className:"mr1"}):(0,s.jsx)(tb.Z,{className:"mr1"}),"Settings"]}),t&&(0,s.jsxs)("div",{className:"mt2",children:[(0,s.jsx)(tN.X,{checked:n,onChange:()=>a({type:"toggleCaseSensitiveSearch"}),label:"Case sensitive"}),(0,s.jsx)(tN.X,{checked:r,onChange:()=>a({type:"toggleWholeWordSearch"}),label:"Whole word"}),(0,s.jsx)(tN.X,{checked:l,onChange:()=>a({type:"toggleRegexSearch"}),label:"Regular expression"})]})]})});var tM=n(13370);let tZ=(0,F.$j)(e=>{let{notebook:t}=e;return{searchResults:t.searchResults,selectedSearchResult:t.selectedSearchResult}},null)(e=>{let{searchResults:t,selectedSearchResult:n}=e,r=(0,tM.GS)("(max-width: 960px)",!1),l=(0,tp._)(t,n),a=(0,tp.n)(t);return(0,s.jsxs)("div",{className:i()("flex align-items pa3",r?"mr3 pr4":""),children:[(0,s.jsx)("div",{className:"f5 fw6 near-black flex-auto lh-title",children:"Find and replace"}),(0,s.jsx)("div",{className:"f6 dark-gray",children:t?void 0===n?(0,s.jsx)(s.Fragment,{children:a}):(0,s.jsxs)(s.Fragment,{children:[l+1,(0,s.jsx)("span",{className:"gray",children:" of "}),a]}):null})]})}),tH=(0,th.V)([["ArrowDown","Shift-ArrowDown",e=>{let{dispatch:t}=e;return t({type:"selectNextSearchResult"}),!0}],["ArrowUp","Shift-ArrowUp",e=>{let{dispatch:t}=e;return t({type:"selectPreviousSearchResult"}),!0}]]),tS=(0,F.$j)(null,e=>({dispatch:e}))(e=>{let{dispatch:t}=e;return(0,s.jsxs)(z.X,{className:"flex flex-column",onKeyDown:function(e){tH({dispatch:t},e)&&(e.preventDefault(),e.stopPropagation())},children:[(0,s.jsxs)("div",{className:"flex flex-column",children:[(0,s.jsx)(tZ,{}),(0,s.jsx)(tx,{}),(0,s.jsx)(tV,{}),(0,s.jsx)(tL,{})]}),(0,s.jsx)(tk,{})]})});var tR=n(56249),tE=n(21596),t_=n(92790),tF=n(32063),tD=n(25192),tI=n(12300),tP=n(34397),tA=n(40913),tT=n(49803);function tB(e){let{node_id:t,mode:n}=e,{node_name:s,node_value_start:r}=e,l=s||r||"table"===n?"":" empty cell";switch(e.type){case"insert_node":return"Added".concat(l);case"modify_node":if(e.is_new)return"Added".concat(l);return e.node_old_name?"Renamed":"Edited".concat(l);case"remove_node":return"Removed".concat(l);case"move_node":return"Moved".concat(l);case"pin_node":return"Pinned".concat(l);case"unpin_node":return"Unpinned".concat(l);case"modify_title":return"Titled “".concat(e.title,"”");case"modify_license":return null===e.license?"Removed license":"Licensed ".concat((0,tA.ax)(e.license));case"modify_copyright":return""!==e.copyright?"Copyright".concat(e.copyright.replace(/^copyright\b/i,"")):"Removed copyright notice";case"revert":return"Reverted to ".concat(t);case"create":return e.fork?"Forked from “".concat(e.fork.title,"”"):"Created";case"mode_node":{let{label:t}=X.qz[e.mode]||{label:""};return"Mode ".concat(t)}case"resolve_dependency":{var a,i;let{specifier_type:t,specifier:n,value:s}=e;if("notebook"!==t)return"";if(!s||!(null===(a=eA.Z.parse(s))||void 0===a?void 0:a.version))return"Version lock for ".concat(n," was removed");let r=null===(i=eA.Z.parse(s))||void 0===i?void 0:i.version;return"Locked ".concat(n," to version ").concat(r)}case"modify_data":return"Edited".concat(l);case"modify_name":return e.node_old_name?"Renamed":"Named";default:return""}}let tz=e=>{let{events:t,isVersioned:n,currentVersion:r,dispatch:a,focusId:o,id:c}=e,[,...d]=t,u=!!d.length,h=!t.slice(1).some(e=>e.version===r),[m,f]=(0,p.useState)(!h),x=(0,tM.GS)(tM.ro),g=x?{width:"2em",height:"2em"}:{width:"1.5em",height:"1.5em"},b=x?"3em":"2em",v=(0,F.v9)(e=>({roles:e.notebook.roles}));return(0,s.jsx)(s.Fragment,{children:t.map((e,t)=>{if(h&&!m&&t>0)return null;let d=function(e){if(e.publish_time&&!e.paused_version)return tE.Z;switch(e.type){case"create":return tF.Z;case"modify_license":case"modify_copyright":return t_.Z;case"pin_node":case"unpin_node":return tI.Z;case"resolve_dependency":{var t;let{specifier_type:n,value:s}=e;if("notebook"!==n)return e_.Z;if(!s||!(null===(t=eA.Z.parse(s))||void 0===t?void 0:t.version))return eF.Z;return e_.Z}case"revert":return ev.Z;default:return ep.Z}}(e),p=0===t,j=e.version===r,y=n&&j,V=null!==o&&e.node_id===o&&!y,w=e.paused_version,C=y?"bg-light-blue":"bg-transparent",k=y?"white":"gray",N=y?"white":w?"gray":"moon-gray",{user:L}=e.merge?e.merge:e;function M(){a({type:"loadVersion",version:e.version})}return(0,s.jsxs)("div",{style:{display:"contents"},className:l().dynamic([["2a8dc63efead5cb7",[b]]])+" hide-child show-children",children:[(0,s.jsx)("div",{className:l().dynamic([["2a8dc63efead5cb7",[b]]])+" "+(i()("cell cellStart",C)||""),children:p&&u&&(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),f(!m)},disabled:!h,style:{width:x?b:"auto"},title:m?"Collapse history range":"Expand history range",className:l().dynamic([["2a8dc63efead5cb7",[b]]])+" "+(i()("flex items-center justify-center pointer f7 lh-solid fw6 bg-transparent b--transparent br2 bn pa0 h-100",h?y?"white":"near-black":"moon-gray",h?y?"hover-light-silver":"hover-dark-gray":"")||""),children:m?(0,s.jsx)(tg.Z,{...g}):(0,s.jsx)(tb.Z,{...g})})}),(0,s.jsx)("div",{title:e.time&&(0,tT.Dh)(e.time),onClick:M,className:l().dynamic([["2a8dc63efead5cb7",[b]]])+" "+(i()("cell fw5 tr nowrap",C,y?"white":p?"black":"gray")||""),children:e.time&&(0,tT.jD)(e.time)}),(0,s.jsx)("div",{title:(0,ee.RX)(L),onClick:M,className:l().dynamic([["2a8dc63efead5cb7",[b]]])+" "+(i()("cell",C)||""),children:(0,s.jsx)(O.Yt,{user:{...L,type:"individual"},size:16,className:"v-top"})}),(0,s.jsx)("div",{onClick:M,className:l().dynamic([["2a8dc63efead5cb7",[b]]])+" "+(i()("cell",C)||""),children:(0,s.jsx)(d,{className:l().dynamic([["2a8dc63efead5cb7",[b]]])+" "+(k||"")})}),(0,s.jsx)("button",{onClick:M,tabIndex:0,className:l().dynamic([["2a8dc63efead5cb7",[b]]])+" "+(i()("cell br0 bn",C,V?"mid-gray fw7":k)||""),children:e.publish_time&&!w?(0,s.jsx)("span",{title:"Published. ".concat(tB(e)),className:l().dynamic([["2a8dc63efead5cb7",[b]]])+" truncate",children:"Published"}):(0,s.jsx)("span",{className:l().dynamic([["2a8dc63efead5cb7",[b]]])+" truncate",children:function(e){let{merge:t}=e;if(t){let e="Merged “".concat(t.document.title,"”");return(0,s.jsx)("span",{title:e,children:e})}let{node_old_name:n,node_name:r,node_value_start:l,node_id:a}=e,i=tB(e);return(0,s.jsxs)("span",{title:"".concat(i," ").concat("Renamed"===i?"".concat(n," to "):"").concat(r||l||""),children:[i," ","Renamed"===i&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{style:{fontSize:"0.8rem"},className:"code",children:n})," ","to"," "]}),r||l||a?(0,s.jsxs)("span",{style:{fontSize:"0.8rem"},className:"code",children:[r||l||"cell ".concat(a)," "]}):null]})}(e)})}),(0,s.jsxs)("div",{onClick:M,className:l().dynamic([["2a8dc63efead5cb7",[b]]])+" "+(i()("cell cellEnd flex justify-end relative",C,N)||""),children:[w&&(0,s.jsx)("span",{title:(0,J.mG)(v)?tP.H:tP.r,className:l().dynamic([["2a8dc63efead5cb7",[b]]])+" pr1",children:(0,s.jsx)(tD.Z,{})}),(0,s.jsxs)("span",{style:{minWidth:"var(--spacing-medium)"},className:l().dynamic([["2a8dc63efead5cb7",[b]]])+" "+(i()("tr",N,!j&&"show-child")||""),children:["v",e.version]}),(0,s.jsx)("div",{className:l().dynamic([["2a8dc63efead5cb7",[b]]])+" absolute",children:!j&&(0,s.jsx)(W.I_,{className:"child",icon:tR.Z,href:"/compare/".concat(c,"@").concat(Math.min(e.version,r),"...").concat(c,"@").concat(Math.max(e.version,r)),onClick:e=>e.stopPropagation(),style:{borderRadius:"var(--border-radius-2)",padding:"0.125rem",right:-3},title:"Compare v".concat(Math.max(e.version,r)," to v").concat(Math.min(e.version,r))})})]}),(0,s.jsx)(l(),{id:"2a8dc63efead5cb7",dynamic:[b],children:".cell.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:4px;height:".concat(b,";max-width:100%;overflow:hidden;cursor:pointer}button.cell.__jsx-style-dynamic-selector{padding:4px 2px}.cellStart.__jsx-style-dynamic-selector{-webkit-border-top-left-radius:4px;-moz-border-radius-topleft:4px;border-top-left-radius:4px;-webkit-border-bottom-left-radius:4px;-moz-border-radius-bottomleft:4px;border-bottom-left-radius:4px;margin-left:var(--spacing-small)}.cellEnd.__jsx-style-dynamic-selector{-webkit-border-top-right-radius:4px;-moz-border-radius-topright:4px;border-top-right-radius:4px;-webkit-border-bottom-right-radius:4px;-moz-border-radius-bottomright:4px;border-bottom-right-radius:4px;margin-right:var(--spacing-small);padding-right:var(--spacing-small)}")})]},t)})})},tO=e=>{let{range:{folds:t,events:n,title:r},isVersioned:a,currentVersion:i,dispatch:o,isFirst:c,focusId:d,id:u}=e;return n.length?(0,s.jsxs)(s.Fragment,{children:[!c&&(0,s.jsx)("div",{style:{height:1},className:"jsx-6c50030ed6403049 span-grid flex-auto mt3 bg-light-silver"}),(0,s.jsx)("div",{className:"jsx-6c50030ed6403049 span-grid pt3 pb2 ph3 flex",children:(0,s.jsx)("span",{className:"jsx-6c50030ed6403049 mr1 f6 fw6 near-black",children:r})}),t.map((e,t)=>{let l=n.slice(e[0],e[1]+1);return(0,s.jsxs)(p.Fragment,{children:[(0,s.jsx)(tz,{events:l,isVersioned:a,dispatch:o,currentVersion:i,focusId:d,id:u}),l.some(e=>e.first_public_version&&!e.oldest_version)&&(0,s.jsxs)("div",{className:"jsx-6c50030ed6403049 span-grid flex items-center mh3",children:[(0,s.jsx)("div",{className:"jsx-6c50030ed6403049 w-100 bt mr2 b--lightest-green"}),(0,s.jsx)("div",{className:"jsx-6c50030ed6403049 nowrap f7 lh-f7 fw5 bg-washed-green dark-green pa1 br2",children:"Made public"})]})]},"".concat(r).concat(t))}),(0,s.jsx)(l(),{id:"6c50030ed6403049",children:".span-grid.jsx-6c50030ed6403049{grid-column-start:1;grid-column-end:7}"})]}):null},tW=(0,F.$j)(e=>{let{notebook:t,currentUser:n}=e;return{notebook:t,currentUser:n}})(e=>{let{notebook:t,currentUser:n}=e,{suggestionsTo:r}=t;return r.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"jsx-448bdbec10f793c0 pt3 pb1 ph3 flex suggestionsEntry",children:[(0,s.jsx)("span",{className:"jsx-448bdbec10f793c0 mr1 f6 fw6 near-black",children:"Suggestions"}),(0,s.jsx)("hr",{style:{height:1,marginTop:"0.65em"},className:"jsx-448bdbec10f793c0 flex-auto mt2 bn bg-light-gray v-base"})]}),r.map((e,r)=>{let{creator:l,description:a,from_id:i,to_id:o}=e;return(0,s.jsx)("div",{title:"View suggestion",className:"jsx-448bdbec10f793c0 br2 pa2 mt2 mh3 bg-washed-yellow suggestionsEntry",children:(0,s.jsxs)(eD.Z,{href:"/compare/".concat(o,"...").concat(i),className:"no-underline",onClick:()=>(function(e){let{to_id:s,to_owner:r,from_id:l,from_owner:a}=e;(0,_.MR)((0,_.ym)({type:"notebook:view:suggestion",data:{base:(0,_.tb)({id:s,owner:r},n),target:(0,_.tb)({id:l,owner:a},n),trigger:"click",source:"historyPane"},eventVersion:1,notebook:t,currentUser:n}))})(e),children:[(0,s.jsxs)("div",{className:"jsx-448bdbec10f793c0 flex items-center",children:[(0,s.jsx)(O.Yt,{user:{...l,type:"individual"},className:"mr2",size:16}),(0,ee.RX)(l)]}),(0,s.jsxs)("div",{className:"jsx-448bdbec10f793c0 mid-gray f7 pt2",children:["“",a,"”"]})]})},r)}),(0,s.jsx)(l(),{id:"448bdbec10f793c0",children:".suggestionsEntry.jsx-448bdbec10f793c0{grid-column-start:1;grid-column-end:7}"})]}):null}),tq=new Set(["revert"]),tU=new Set(["pin","unpin"]),tG=(0,p.memo)(function(e){let{history:t,forkOf:n,autosave:r,version:a,dispatch:i,focusId:o,id:c,isPausedLoad:d,modes:u}=e,h=function(e){let t,{history:{events:n,first_public_version:s,identifiers:r,merges:l,paused_version:a,users:i},forkOf:o,modes:c,now:d=new Date}=e,u=new Map;for(let e of i)u.set(e.id,e);for(let e of l)u.set(e.user.id,e.user);let h=u.size;n=n.slice().reverse().filter(e=>"noop"!==e.type);let m=[];for(let e=0;e<n.length;e++){let t=n[e],{user_id:r,publish_user_id:i,time:d,publish_time:h,...p}=t,f=l.find(e=>t.version===e.to_end_version);m.push({...p,user:u.get(r),publish_user:u.get(i),time:d,publish_time:h,fork:o&&o.version===t.version?o:null,merge:f,paused_version:a===p.version,first_public_version:s===p.version,latest_version:0===e,mode:t.node_id?c.get(t.node_id):void 0})}let p=new Map,f=new Map,x=new Map,g=new Map(r);for(let e=m.length-1;e>=0;e--){let t=m[e];switch(t.type){case"modify_node":case"insert_node":{let e=p.get(t.node_id);e&&t.node_name&&e!==t.node_name&&(t.node_old_name=e),p.set(t.node_id,t.node_name),f.set(t.node_id,t.node_value_start);break}case"modify_data":case"move_node":case"pin_node":case"unpin_node":case"remove_node":p.get(t.node_id)?t.node_name=p.get(t.node_id):f.get(t.node_id)?t.node_value_start=f.get(t.node_id):g.has(t.node_id)&&Object.assign(t,g.get(t.node_id));break;case"modify_name":{let e=p.get(t.node_id);e&&t.node_name&&e!==t.node_name&&(t.node_old_name=e),p.set(t.node_id,t.node_name);break}case"revert":x.set(t.version,t.node_id)}}let b=m.findIndex(e=>"create"===e.type);b>=0&&m.splice(b+1,m.length);let v=0;for(let[e,n]of m.entries()){let s=+n.publish_time;if(s&&s>v&&(v=s,t=n),"revert"===n.type){let e=n.node_id;for(;x.has(e);)e=x.get(e);n.node_id=e}n.oldest_version=e===m.length-1}t&&(t.latest_publish=!0);let j=new Map;for(let e of m){let t;t=e.time?(0,tT.gE)(e.time,d)?(0,tT.vm)(e.time):(0,tT.um)(e.time,d)?(0,tT.mr)(e.time,{month:"short",day:"numeric"}):(0,tT.mr)(e.time,{month:"short",day:"numeric",year:"numeric"}):"Earlier";let n=j.get(t);n?n.push(e):(n=[e],j.set(t,n))}let y=[];for(let[e,t]of j){let n=function(e,t){let n;if(!e.length)return;let s=[];for(let t=0;t<e.length;t++)!function(e,t){let n=t.at(e),s=t.at(e-1);return n&&!tU.has(n.type)&&!!(tq.has(n.type)||0===e||n.merge||n.paused_version||n.first_public_version&&!n.oldest_version||n.publish_time||"create"===n.type&&n.fork||(null==s?void 0:s.time)&&n.time&&s.time.getTime()-n.time.getTime()>6e5)}(t,e)?n?n[1]=t:n=[t,t]:(n&&s.push(n),s.push([t,t]),n=void 0);return n&&s.push(n),{folds:s,events:e,title:t}}(t,e);n&&y.push(n)}return{ranges:y,events:m,userCount:h}}({history:t,forkOf:n,modes:u});return(0,s.jsx)("div",{className:"overflow-y-auto",children:(0,s.jsxs)("div",{className:"jsx-d511b6cc9924123c history pb3",children:[(0,s.jsx)(tW,{}),h.ranges.map((e,t)=>(0,s.jsx)(tO,{range:e,dispatch:i,isVersioned:!r&&!d,currentVersion:a,isFirst:0===t,focusId:o,id:c},t)),(0,s.jsx)(l(),{id:"d511b6cc9924123c",children:".history.jsx-d511b6cc9924123c{display:grid;grid-template-columns:auto auto auto auto 1fr auto;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}"})]})})}),tY=(0,F.$j)(e=>{let{notebook:t}=e;return{notebook:t}},e=>({dispatch:e}))(e=>{let{notebook:{autosave:t,id:n,forkOf:r,saveVersion:l,model:{version:a,nodes:i},focusId:o,isPausedLoad:c},dispatch:d}=e,{data:u}=(0,U.h_)("/document/".concat(n,"/history")),h=new Map(i.map(e=>{let{id:t,mode:n}=e;return[t,n]}));return(0,s.jsxs)(z.X,{children:[(0,s.jsx)(z.h,{children:"Version history"}),u?(0,s.jsx)(tG,{history:u,forkOf:r,autosave:t,version:t?a:l,dispatch:d,id:n,focusId:o,isPausedLoad:c,modes:h}):(0,s.jsx)("div",{className:"flex justify-center pa4",children:(0,s.jsx)(eh.Z,{})})]})});var tK=n(94006),tX=n(83108),t$=n(86342),tJ=n(93202);let tQ="var(--moon-gray)",t1=e=>{let{from:t,to:n,sign:r,yScale:l}=e,a="circular"===(0,tJ.Do)(t,n);return(0,s.jsx)("path",{d:"M ".concat(3*r," 0 H ").concat(14*r/2," v ").concat(l(t.node,n.node)," h ").concat(r*(a?-1:1)*4),fill:"none",strokeWidth:"2",stroke:"currentColor"})},t0=e=>{let{node:t,nameClassName:n}=e,r=(0,$.Qc)(t),l=(0,$.u2)(t);!l&&(0,X.hN)(t)&&(l="cell ".concat(t.id));let a=r.id,i=t.value;return a&&(i="".concat(i.slice(0,a.start)," ").concat(i.slice(a.end))),(i=i.trim()).length>255&&(i="".concat(i.slice(0,255),"…")),(0,s.jsxs)("div",{className:"truncate code f7",title:"".concat(l?"".concat(l," "):"").concat(i),children:[l&&(0,s.jsxs)("span",{className:n,children:[l," "]}),i]})},t2=(0,p.memo)(function(e){let{node:t,connections:n,focusedNode:r,participants:a,selected:o,error:c,yScale:d,dispatch:u,onSelect:h,readOnly:m}=e,{id:f}=t,x=n.get(t),{up:g,down:b,isIsland:v}=x,j=(0,p.useRef)(null);(0,t$._)(f,j,void 0,m,u,"minimap-cell","minimap-cells");let y=r?(0,tJ.Do)(x,n.get(r)):"none",V="none"===y,w="same"===y,C="direct downstream"===y||"indirect downstream"===y,k="direct upstream"===y||"indirect upstream"===y,N="direct downstream"===y||"direct upstream"===y;return(0,s.jsxs)("button",{ref:j,"data-cy":y,"data-node-id":f,style:{height:21,fontFamily:"inherit",color:c?"var(--red)":w||N?"var(--blue)":v?tQ:r?tQ:"black",paddingLeft:45,paddingTop:1,paddingBottom:1},onClick:e=>{e[tu.Ao]?u({type:"selectionToggle",id:f}):h({type:w?"blur":"focus",id:f},{focused:w,downstream:C,upstream:k,direct:N})},className:"jsx-5b348d2ff6ad01ac bg-white minimap-cell br2 bn pv0 pr0 bg-transparent tl w-100 flex relative pointer justify-between items-center",children:[(0,s.jsxs)("div",{style:{boxShadow:o?"inset 0 0 0 1.5px var(--washed-blue)":void 0},className:"jsx-5b348d2ff6ad01ac "+(i()("flex minimap-cell-label h-100 w-100 ph1 items-center moon-gray br2",w?"bg-blue white focused":"")||""),children:[(0,s.jsx)(t0,{node:t,nameClassName:w?"fw6":N?"blue":r?"":"black"}),a&&(0,s.jsx)("span",{className:"jsx-5b348d2ff6ad01ac ml3",children:(0,s.jsx)(tK.l,{size:14,link:!1,participants:a})})]}),(0,s.jsxs)("svg",{style:{overflow:"visible",top:10.5,left:"calc(var( --spacing-extra-small ) + ".concat(17,"px)"),width:30,height:30},className:"jsx-5b348d2ff6ad01ac "+(i()("absolute pen","z-".concat(w?2:1))||""),children:[(0,s.jsxs)("g",{transform:"translate(".concat(r?C?14:k?-14:0:0,", 0)"),className:"jsx-5b348d2ff6ad01ac",children:[!(r&&V)&&(0,s.jsxs)("g",{className:"jsx-5b348d2ff6ad01ac",children:[g.length&&(0,s.jsx)("path",{d:"M 0 0 h ".concat(-8),fill:"none",strokeWidth:"2",stroke:"currentColor",className:"jsx-5b348d2ff6ad01ac"}),b.length&&(0,s.jsx)("path",{d:"M 0 0 h ".concat(8),fill:"none",strokeWidth:"2",stroke:"currentColor",className:"jsx-5b348d2ff6ad01ac"})]}),(0,s.jsx)("circle",{r:v?1.5:3,fill:"currentColor",className:"jsx-5b348d2ff6ad01ac"})]}),w&&(0,s.jsxs)("g",{className:"jsx-5b348d2ff6ad01ac pen",children:[b.map((e,t)=>(0,s.jsx)(t1,{from:x,to:n.get(e),sign:1,yScale:d},t)),g.map((e,t)=>(0,s.jsx)(t1,{from:x,to:n.get(e),sign:-1,yScale:d},t))]})]}),(0,s.jsx)(l(),{id:"5b348d2ff6ad01ac",children:".minimap-cell.jsx-5b348d2ff6ad01ac:hover .minimap-cell-label.jsx-5b348d2ff6ad01ac:not(.focused){background-color:var(--near-white)}"})]})}),t3=(0,F.$j)(e=>{let{notebook:t,currentUser:n}=e;return{notebook:t,currentUser:n}},e=>({dispatch:e}))(e=>{let{notebook:t,currentUser:n,dispatch:r}=e,{model:l,editorStates:a,participants:i,focusId:o,selectionFocusId:c,selection:d,dropId:u}=t,{nodes:h}=l,m=(0,eL.os)(t),f=(0,p.useMemo)(()=>(function(e){let t=new Map;for(let n of e){let{node_ids:e}=n;for(let s of e)t.has(s)?t.get(s).push(n):t.set(s,[n])}return t})(i),[i]),x=(0,p.useMemo)(()=>(0,tJ.E6)(h),[h]),g=(0,p.useMemo)(()=>(e,t)=>(h.indexOf(t)-h.indexOf(e))*21,[h]),b=(0,tM.GS)(tM.ro),[v,j]=(0,p.useState)(null),y=(null==v?void 0:v.type)==="focus"?(0,K.DY)(l,v.id):(null==v?void 0:v.type)==="blur"?void 0:null!==o?(0,K.DY)(l,o):null!==c?(0,K.DY)(l,c):void 0;function V(e,s){b?j(e):r(e),(0,_.MR)((0,_.ym)({type:"notebook:view:minimapClick",data:s,eventVersion:2,notebook:t,currentUser:n}))}let w=(0,p.useRef)(!1);return(0,p.useEffect)(()=>(w.current=!0,()=>{w.current=!1}),[]),(0,p.useEffect)(()=>()=>{v&&!w.current&&r(v)},[r,v]),(0,s.jsxs)(z.X,{children:[(0,s.jsx)(z.h,{children:"Minimap"}),(0,s.jsx)("div",{className:"pa3 mb1 relative minimap-cells",children:h.map(e=>{var t;return(0,s.jsxs)(p.Fragment,{children:[u===e.id&&(0,s.jsx)("div",{className:"absolute bt b--blue",style:{marginTop:-.5,width:"calc(100% - 2 * var( --spacing-medium ))"}}),(0,s.jsx)(t2,{node:e,connections:x,focusedNode:y,selected:d.has(e.id),participants:f.get(e.id),error:!!(null===(t=a.get(e.id))||void 0===t?void 0:t.field(tX.ei).length),yScale:g,onSelect:V,dispatch:r,readOnly:m})]},e.id)})})]})});var t5=n(48261),t4=n(32775),t8=n(85049);let t7=c()(()=>n.e(449).then(n.bind(n,449)),{loadableGenerated:{webpack:()=>[449]}}),t6=c()(()=>n.e(5704).then(n.bind(n,45704)),{loadableGenerated:{webpack:()=>[45704]}});function t9(e){let t=t8.j;switch(e){case"help":return{pane:(0,s.jsx)(t7,{}),closeLabel:"help",width:t};case"files":return{pane:(0,s.jsx)(ti,{}),closeLabel:"files",width:t};case"history":return{pane:(0,s.jsx)(tY,{}),closeLabel:"history",width:t};case"guide":return{pane:(0,s.jsx)(t6,{}),closeLabel:"guide",width:t};case"minimap":return{pane:(0,s.jsx)(t3,{}),closeLabel:"minimap",width:t8.l6};case"dependencies":return{pane:(0,s.jsx)(eT,{}),closeLabel:"dependencies",width:t};case"find":return{pane:(0,s.jsx)(tS,{}),closeLabel:"find",width:t};case"databases":return{pane:(0,s.jsx)(eR,{}),closeLabel:"databases",width:t};case"aiassist":return{pane:(0,s.jsx)(ed,{}),closeLabel:"aiassist",width:1.25*t};case"schedule":return{pane:(0,s.jsx)(t5.QY,{}),closeLabel:"schedule",width:t};default:return{pane:null,closeLabel:"",width:0}}}let ne=(0,F.$j)(e=>{let{page:t}=e;return{paneType:t.pane,helpArticlesOpen:t.helpArticlesOpen}},e=>({dispatch:e}))(e=>{let{dispatch:t,paneType:n,helpArticlesOpen:r,panes:a}=e,o=(0,tM.GS)(tM.ro),{pane:c,closeLabel:u,width:h}=t9(n),m=(0,F.v9)(e=>e.decorations.bannerProps),p=t8.Lv+m.height;return(0,s.jsxs)("div",{className:l().dynamic([["f275b503f8ab3b4",[p,tM.hs,tM.pp,p,t8.Sf,h]]])+" flex fixed z-1 tw-mr-md",children:[o&&"guide"===n?null:c&&(0,s.jsxs)("div",{className:l().dynamic([["f275b503f8ab3b4",[p,tM.hs,tM.pp,p,t8.Sf,h]]])+" mt3-l shadow-1-ns br3 self-start bg-white flex pane",children:[(0,s.jsx)("button",{style:{top:"2px"},onClick:()=>t({type:"dismissPane"}),className:l().dynamic([["f275b503f8ab3b4",[p,tM.hs,tM.pp,p,t8.Sf,h]]])+" absolute dn-l dismiss-button pointer pa3 bn bg-transparent z-4",children:(0,s.jsx)(d.Z,{className:i()({white:"guide"===n}),"aria-label":"Close ".concat(u," pane")})}),c]},[n,...r].join()),(0,s.jsx)("div",{className:l().dynamic([["f275b503f8ab3b4",[p,tM.hs,tM.pp,p,t8.Sf,h]]])+" gray hover-black mt3 ml1 sidebar animate-all dn db-l",children:a.map(e=>{let{type:r,icon:l,label:a,badgeLabel:i,signpost:o,badgeStyle:d,unimplemented:u,disabled:h}=e,m=!(u||h),p=(0,s.jsx)(W.Ct,{badgeLabel:i,badgeStyle:d,disabled:!m,colorless:!0,selected:n===r,children:(0,s.jsx)(W.hU,{icon:l,onClick:m?()=>t({type:"togglePane",pane:r}):void 0,onKeyDown:m?e=>"Escape"===e.key&&t({type:"dismissPane"}):void 0,disabled:!m,selected:n===r,className:"ma2",colorless:!0,solidBackground:!0,title:(0,eN.fm)(u?"".concat(a," is not yet implemented"):"".concat(n===r?"Close":"Open"," ").concat(a))})},r);return o&&!c?(0,s.jsx)(t4.y,{type:o,top:16,left:8,children:p},r):p})}),(0,s.jsx)(l(),{id:"f275b503f8ab3b4",dynamic:[p,tM.hs,tM.pp,p,t8.Sf,h],children:".fixed.__jsx-style-dynamic-selector{top:".concat(p,"px;right:var(--spacing-medium);bottom:0}@media ").concat(tM.hs,"{.fixed.__jsx-style-dynamic-selector{right:0}}.pane.__jsx-style-dynamic-selector{position:fixed;top:0;right:0;bottom:0;left:0}@media ").concat(tM.pp,"{.pane.__jsx-style-dynamic-selector{position:static;max-height:-webkit-calc(100vh - ").concat(p,"px - ").concat(t8.Sf,"px - 38px);max-height:-moz-calc(100vh - ").concat(p,"px - ").concat(t8.Sf,"px - 38px);max-height:calc(100vh - ").concat(p,"px - ").concat(t8.Sf,"px - 38px);width:-webkit-calc(\n              ").concat(h,"px - 2 *\n                var(--spacing-small) - var(--spacing-extra-small) - var(\n                  --width-2\n                )\n                \n            );width:-moz-calc(\n              ").concat(h,"px - 2 *\n                var(--spacing-small) - var(--spacing-extra-small) - var(\n                  --width-2\n                )\n                \n            );width:calc(\n              ").concat(h,"px - 2 *\n                var(--spacing-small) - var(--spacing-extra-small) - var(\n                  --width-2\n                )\n                \n            )}}.dismiss-button.__jsx-style-dynamic-selector{top:0;right:0}")})]})})},32775:function(e,t,n){n.d(t,{y:function(){return g}});var s=n(85893),r=n(94184),l=n.n(r),a=n(67294),i=n(92819),o=n(39248),c=n(97069),d=n(46582),u=n(67752),h=n(50852),m=n(8420),p=n(74011),f=n(91848);let x=[{type:"help",title:"Want help?",content:()=>(0,s.jsxs)(s.Fragment,{children:["Get started quickly with tutorials in the"," ",(0,s.jsxs)("b",{className:"dark-gray",children:[(0,s.jsx)(o.Z,{className:"nb1"})," Help"]})," ","pane. You’ll also find shortcuts, docs, and support."]})},{type:"settings",title:"Welcome!",content:()=>(0,s.jsxs)(s.Fragment,{children:["Finish setting up your public profile in"," ",(0,s.jsxs)("b",{className:"dark-gray",children:[(0,s.jsx)(i.Z,{className:"nb1"})," Settings"]}),"."]})},{type:"insertmenu",title:"Shortcuts",content:()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["Press ",(0,s.jsx)(h.e,{shortcut:"Mod-Enter"})," to open this menu"]}),(0,s.jsx)("p",{children:"Type to search"}),(0,s.jsxs)("div",{children:["Press ",(0,s.jsx)(h.e,{shortcut:"Alt-Mod-Enter"})," or double-click"," ",(0,s.jsx)(u.W,{icon:c.Z,className:"dark-gray"})," to create a JavaScript cell"]})]})}],g=(0,p.$j)(e=>{let{currentUser:t,decorations:n}=e;return{currentUser:t,currentSignpost:n.signpost}},e=>({dispatch:e}))(e=>{let{type:t,top:n,right:r,bottom:i,left:o,vertical:c,children:u,currentUser:h,currentSignpost:p,dispatch:g,className:b}=e,v=(0,a.useRef)(null),j=(0,m.E)(v),y=x.find(e=>e.type===t),V=null===p&&(0,f.M)(h,t),[w,C]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{V&&j&&!w&&(C(!0),g({type:"requestSignpost",signpost:t}))},[V,j,w,t,g]),(0,a.useEffect)(()=>{if(w)return()=>g({type:"hideSignpost",signpost:t})},[w,t,g]),p!==t)?null===p&&V?(0,s.jsx)("div",{className:l()("relative",b),ref:v,children:u}):(0,s.jsx)(s.Fragment,{children:u}):(0,s.jsxs)("div",{className:l()("relative",b),children:[u,(0,s.jsxs)("div",{className:"absolute",style:{top:n,right:r,bottom:i,left:o,filter:"drop-shadow(0 0 10px rgba(0,0,0,0.1))",willChange:"transform"},children:[(0,s.jsxs)("div",{className:"absolute w5 bg-white mid-gray ba b--silver pa3 br2",style:{top:-30,right:void 0!==o?14:void 0,left:void 0!==r?14:void 0},children:[(0,s.jsxs)("div",{className:"flex mb2 near-black",children:[(0,s.jsxs)("div",{className:"flex items-center flex-grow-1 fw6",children:[(0,s.jsx)("span",{className:"bg-light-purple white f7 fw7 pa1 br2 mr2",children:"Tip"}),y.title]}),(0,s.jsx)("button",{className:"flex dark-gray bg-transparent hover-bg-black-05 pointer pa2 nt1 nb1 nr1 bn br-100 tw-self-start",title:"Hide tip","aria-label":"Hide tip",onClick:()=>g({type:"dismissSignpost",trigger:"click"}),children:(0,s.jsx)(d.Z,{})})]}),(0,s.jsx)("div",{className:"lh-copy",children:(0,s.jsx)(y.content,{})})]}),(0,s.jsx)("svg",{className:"absolute",style:c?{top:108,left:130}:{top:-20,left:void 0!==o?-16:void 0,right:void 0!==r?-16:void 0},width:"16",height:"40",children:(0,s.jsx)("path",{stroke:"#E8E8E8",fill:"white",transform:c?"rotate(-90 8,20)":void 0!==o?"rotate(180 8,20)":void 0,d:"M15,5 L0,20 L10,30 L15,35"})})]})]})})},82149:function(e,t,n){n.d(t,{aN:function(){return D},S5:function(){return P}});var s=n(85893),r=n(6032),l=n(27522),a=n(94184),i=n.n(a),o=n(67294),c=n(45916),d=n(68059),u=n(9231),h=n(1984),m=n(27640),p=n(97069),f=n(25915),x=n(36779),g=n(85293),b=n(18701),v=n(94878),j=n(13370),y=n(88577),V=n(21482),w=n(8273),C=n(57035),k=n(33888);let N=e=>{let{node:t}=e,{id:n,data:r,mode:l}=t,{operations:{from:{table:a}}}=r,c=(0,y.M7)(r),d=(0,k.I0)(),{disabled:h}=(0,k.v9)(e=>{let{notebook:t}=e;return{disabled:t.safe||(0,w.os)(t)}}),m=(0,j.GS)(j.pp),[p,f]=(0,o.useState)(),x=(0,o.useRef)();async function b(e){d({type:"setDataOperations",id:n,operations:{...V.Zu.defaultNode.data.operations,from:{table:e},...(null==p?void 0:p.dialect)!=="sqlite"&&(null==p?void 0:p.dialect)!=="duckdb"&&{select:{columns:await new v.n4(c,e,l).run(d).then(e=>Array.from(e.keys()),()=>null)},slice:{from:0,to:1e3}}}})}return(0,o.useEffect)(()=>{let e=new v.YG(c);x.current=e,e.run(d).then(t=>{e===x.current&&f(t)},()=>{e===x.current&&f(null)})},[d,c]),p?p.hasDescribeTables?(0,s.jsxs)(g.vz,{"data-cy":"table-selector",value:JSON.stringify(a)||"",className:"flex items-center dark-gray hover-black focus-black-05 br2 br--right mr1",disabled:h,onChange:e=>b(JSON.parse(e)),children:[(0,s.jsx)(g.Y4,{children:(0,s.jsxs)("div",{className:i()("inline-flex items-center justify-between w-100",h&&"moon-gray"),children:[(0,s.jsx)("div",{className:"mr1 truncate",style:{maxWidth:m?200:75},children:a?(0,C.Vi)(a):"Select a table…"}),(0,s.jsx)(g.r9,{className:"inline-flex items-center",children:(0,s.jsx)(u.Z,{})})]})}),(0,s.jsx)(L,{source:c,table:a})]}):(0,s.jsx)(M,{table:a,setTable:e=>b(e),disabled:h}):null},L=e=>{let{source:t,table:n}=e,r=(0,k.I0)(),a=(0,o.useRef)(),[i,c]=(0,o.useState)(),{isExpanded:d}=(0,l.kR)(),u=(0,j.GS)(j.pp);return(0,o.useEffect)(()=>c(void 0),[t]),(0,o.useEffect)(()=>{if(d){let e=new v.Y2(t);a.current=e,e.run(r).then(t=>{e===a.current&&c(t.sort(C.Tf))},t=>{e===a.current&&console.error("Error fetching list of tables: ",t)})}},[r,d,t]),(0,s.jsx)(g.jI,{style:{marginLeft:-8,maxHeight:"40vh",minWidth:u?250:200,width:"auto"},children:(0,s.jsx)(g.uf,{style:{padding:0,margin:0},children:(0,s.jsxs)("div",{className:"pv12",children:[(0,s.jsx)("div",{className:"gray f7 ph12 pb12",children:"Tables"}),i?i.length?i.map((e,t)=>(0,s.jsx)(g.wt,{className:"flex items-center justify-between nowrap",style:{padding:"2px 12px",margin:0},value:JSON.stringify(e),children:(0,s.jsxs)("span",{className:"flex items-center",title:(0,C.Vi)(e),style:{maxWidth:u?400:150},children:[(0,s.jsx)("span",{className:"truncate",children:(0,C.Vi)(e)}),(0,C.YY)(n,e)&&(0,s.jsx)(h.Z,{className:"ml2 near-black flex-shrink-0"})]})},t)):(0,s.jsx)("div",{className:"ph12 gray","data-cy":"no-tables",children:"No tables found"}):(0,s.jsx)("div",{className:"ph12 dark-gray",children:(0,s.jsx)(b.Z,{})})]})})})},M=e=>{let{table:t,setTable:n,disabled:r}=e,l=(0,j.GS)(j.hs),[a,i]=(0,o.useState)(t?(0,C.Vi)(t):"");return(0,s.jsx)("input",{name:"tablename",type:"text","data-cy":"table-input-selector",className:"ba b--light-gray br2 br--right ph2 flex items-center",placeholder:"Enter a table…",value:a,onChange:e=>i(e.target.value.replace(/\s/g,"")),onBlur:()=>n(function(e){let t="",n="",s=[];for(let r=0;r<e.length;r++){let l=e[r];if("."===l){s.push(n),n="";continue}if(0===n.length){if("`"===l||'"'===l||"'"===l){t=l;continue}n+=l;continue}let a=r+1<e.length?e[r+1]:"";if(l===t&&a===t){n+=l,r++;continue}if("\\"===l&&a===t){n+=a,r++;continue}if(l===t){t="";continue}n+=l}return(n&&s.push(n),0===s.length)?null:s.length>2?{database:s[0],schema:s[1],table:s[2]}:s.length>1?{schema:s[0],table:s[1]}:s.length>0?{table:s[0]}:null}(a)),title:a,disabled:r,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),e.target.blur())},spellCheck:!1,style:{width:l?340:110,marginLeft:-2}})};var Z=n(9337),H=n(61802),S=n(67534),R=n(32485),E=n(13632),_=n(52332),F=n(68098);let D=e=>{let{node:t}=e,{mode:n,data:{source:l}}=t,a=(0,k.I0)(),[i,c]=(0,o.useState)(),d=(0,o.useRef)();(0,o.useEffect)(()=>{if(null===l.name)d.current=void 0,c(null);else{let e=new v.FJ(l);d.current=e,e.run(a).then(t=>{e===d.current&&c(t)},()=>{e===d.current&&c(null)})}},[a,l]);let u="table"===n&&null!==l.name&&!!i&&!(0,r.yD)(i.dialect);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I,{node:t,right:u}),u&&(0,s.jsx)(N,{node:t}),(0,s.jsx)("button",{className:"flex items-center bn bg-transparent pointer dark-gray hover-black",title:"Show databases",onClick:()=>a({type:"togglePane",pane:"databases"}),children:(0,s.jsx)(m.Z,{})})]})},I=e=>{var t;let{node:n,right:r}=e,{id:l,data:{source:a}}=n,o=(0,k.I0)(),{disabled:c}=(0,k.v9)(e=>{let{notebook:t}=e;return{disabled:t.safe||(0,w.os)(t)}}),d=(0,k.v9)(e=>{let{currentUser:t}=e;return t}),h=(0,j.GS)(j.pp);return(0,s.jsxs)(g.vz,{"data-cy":"data-source-selector",value:JSON.stringify(a),className:i()("flex items-center mr-tiny ml1 focus-black-05 dark-gray hover-black",r&&"br--left"),disabled:c,onKeyDown:e=>{"Space"!==e.key&&"Enter"!==e.key||e.metaKey||e.ctrlKey||e.preventDefault()},onChange:e=>{let t=JSON.parse(e);(0,y.U_)(a,t)||o({type:"setDataSource",id:l,source:t})},children:[(0,s.jsx)(g.Y4,{className:"flex items-center",children:(0,s.jsxs)("div",{className:i()("inline-flex items-center justify-between",c&&"moon-gray"),children:[(0,s.jsx)("div",{className:"mr1 truncate",style:{maxWidth:h?200:75},children:null!==(t=a.name)&&void 0!==t?t:"Select a data source…"}),(0,s.jsx)(g.r9,{className:"inline-flex items-center",children:(0,s.jsx)(u.Z,{})})]})}),(0,s.jsx)(A,{node:n,currentUser:d})]})};function P(e){let{name:t,mimeType:n}=e;switch(n){case"application/x-sqlite3":return"sqlite";case"text/csv":return"csv";case"text/tab-separated-values":return"tsv";case"application/json":return"json";default:if(/\.arrow$/i.test(t))return"arrow";if(/\.parquet$/i.test(t))return"parquet"}return null}let A=e=>{let{node:t,currentUser:n}=e,{id:r,mode:a,data:{source:i},name:c}=t,d=(0,k.I0)(),u=(0,j.GS)(j.pp),{isExpanded:h}=(0,l.kR)(),m=(0,o.useRef)(),{allowPrivateData:p,allowAddDatabase:f,allowAddAttachments:x,readOnly:b,owner:v,files:C}=(0,k.v9)(e=>{let{notebook:t}=e,s=(0,w.cE)(t);return{allowPrivateData:s,allowAddDatabase:s&&(0,F.NF)(t),allowAddAttachments:(0,S.j5)(n,t),readOnly:(0,w.os)(t),owner:t.owner,files:t.files}}),{data:N}=(0,H.h_)(p&&h&&(0,V.KO)(a)?"/team/".concat(v.id,"/data-connectors?detail=false"):null),[L,M]=(0,o.useState)([]),D="cell"===i.type&&!L.some(e=>e.name===i.name),I=("database"===i.type||"DatabaseClient"===i.type)&&!(null==N?void 0:N.some(e=>e.name===i.name)),A="FileAttachment"===i.type&&!C.has(i.name),B=(0,o.useMemo)(()=>{let e=[];for(let[t,n]of C){let s=P(n);null!==s&&!(0,w.Jw)(n)&&("chart"===a?("csv"===s||"tsv"===s||"json"===s)&&e.push({name:t,type:"FileAttachment",dialect:s,fileType:s,inPrivateBucket:null!==n.privateBucketId}):e.push({name:t,type:"FileAttachment",dialect:s,inPrivateBucket:null!==n.privateBucketId}))}return e},[C,a]);return(0,o.useEffect)(()=>{if(!h)return;let e=[],t=new Z.S(async(n,s)=>{n({type:"request_data_sources",mode:a});try{for await(let n of s()){if(m.current!==t)return;let{name:s,dialect:r}=n;if(s===c)continue;let l={name:"".concat(s),type:"cell",dialect:(0,y.Ov)(r)};e.push(l),e.sort(y.zO),M(e.slice())}}catch(e){console.error("Error fetching database clients: ",e)}});return m.current=t,t.run(d).catch(e=>{console.error("Error fetching database clients: ",e),M([])}),()=>{m.current=void 0,M([])}},[a,d,h,c]),(0,s.jsx)(g.jI,{style:{minWidth:u?"10vw":"40vw",width:"auto",marginLeft:-8,maxHeight:"40vh"},"aria-label":"List of data sources",children:(0,s.jsxs)(g.uf,{style:{padding:0,margin:0},children:[(L.length>0||D||!(0,V.KO)(a))&&(0,s.jsx)("div",{className:"bb b--light-silver pv12",children:(0,s.jsx)(T,{sources:L,stale:!!D,sectionTitle:"Cells",source:i,mode:a})}),(!b&&x||B.length>0)&&(0,s.jsx)("div",{className:"bb b--light-silver pv12",children:(0,s.jsx)(T,{sources:B,stale:!!A,sectionTitle:"File attachments",source:i,mode:a,addDisabled:b||!x,onAdd:()=>{(0,_.Yb)(n)?(d({type:"notebookFilePickerOpened",source:"filesPane",trigger:"click"}),(0,R.Z)({multiple:!1}).then(e=>{if(d({type:"attachLocalFiles",files:e,source:"filesPane",trigger:"click"}),e.length>0){let t=e[0],n=P({name:t.name,mimeType:t.type,createTime:new Date(t.lastModified),status:"pending"});n&&d({type:"setDataSource",id:r,source:{name:t.name,type:"FileAttachment",dialect:n}})}})):n||d({type:"showModal",modal:"login",modalProps:{loginReason:"files"},trigger:"click",source:"filesPaneAttachFileButton"})}})}),(0,V.KO)(a)&&(0,s.jsx)("div",{className:"pv12",children:(0,s.jsx)(T,{sources:N?N.map(e=>{let{name:t,type:n}=e;return{name:t,type:"DatabaseClient",dialect:n}}):[],stale:!!I,sectionTitle:"Databases",source:i,mode:a,link:"/".concat("team"===v.type?"team/@".concat(v.login,"/"):"","settings/databases"),onAdd:()=>d({type:"addedDatabase",id:r}),addDisabled:!f})})]},[(0,E.Z)(L),(0,E.Z)(C),N&&(0,E.Z)(N)].join())})},T=e=>{let{sources:t,stale:n,source:r,sectionTitle:l,link:a="",onAdd:i=()=>{},addDisabled:o=!0}=e,{isPublic:u,hasActiveBucket:m,privateBucketError:f}=(0,k.v9)(e=>{let{notebook:t,currentUser:n}=e;return{isPublic:(0,w.HW)(t),hasActiveBucket:(0,w.uT)(n,t.owner),privateBucketError:(0,F.xT)(n,t.owner)}}),b={maxWidth:(0,j.GS)(j.pp)?350:150};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"dark-gray f7 ph12 flex justify-between items-center",style:{marginBottom:t.length>0?10:0},children:[l,"Databases"===l&&!o&&(0,s.jsx)("button",{className:"bn bg-transparent pa0 ma0",onClick:i,children:(0,s.jsx)(x.Z,{href:a,children:(0,s.jsx)("div",{className:"pointer pa2 nt2 nb2 f6 fw6 br-100 flex items-center ba b--transparent hover-bg-black-05",children:(0,s.jsx)(p.Z,{})})})}),"File attachments"===l&&!o&&(0,s.jsx)(d.hU,{onClick:i,icon:p.Z,"aria-label":"Upload file",colorless:!0,className:"nt2 nb2"})]}),t.map((e,t)=>(0,s.jsxs)(g.wt,{className:"flex items-center justify-between nowrap",style:{padding:"2px 12px",margin:0},value:JSON.stringify(e),children:[(0,s.jsx)("span",{className:"flex items-center overflow-x-hidden",title:e.name,style:b,children:e.inPrivateBucket&&(u||!m||f)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Z,{className:"w1 h1 mr1 white bg-red b--red flex-no-shrink br-pill","aria-label":"Private file"}),(0,s.jsx)("span",{className:"truncate red",children:e.name}),(0,y.U_)(r,e)&&(0,s.jsx)(h.Z,{className:"ml1 red flex-shrink-0"})," "]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"truncate",children:e.name}),(0,y.U_)(r,e)&&(0,s.jsx)(h.Z,{className:"ml1 near-black flex-shrink-0"})]})}),(0,s.jsx)("span",{className:"mid-gray fw4 ml4",children:(0,y.w4)(e.dialect)})]},t)),n?(0,s.jsx)(B,{source:r,style:b}):t.length||"Cells"!==l?null:(0,s.jsx)("div",{className:"i gray ph3 pt2",children:"Add data to a cell in your notebook"})]})},B=e=>{let{source:t,style:n}=e;return(0,s.jsx)(g.wt,{className:"flex items-center justify-between nowrap gray",style:{padding:"2px 12px",margin:0},value:JSON.stringify(t),children:(0,s.jsxs)("span",{className:"flex items-center overflow-x-hidden",title:t.name,style:n,children:[(0,s.jsx)("span",{className:"truncate",children:t.name}),(0,s.jsx)(h.Z,{className:"ml1 flex-shrink-0"}),(0,s.jsx)(f.Z,{className:"ml1 flex-shrink-0"})]})})}},95359:function(e,t,n){n.d(t,{w:function(){return d}});var s=n(6194),r=n(56446),l=n(13370),a=n(83879),i=n(8273),o=n(68347);class c{fileName(e){return"number"==typeof e?"/node-".concat(e,".ts"):e}async updateFile(e,t){try{return await this.updateFileStrict(e,t)}catch(e){if(e.errorMessage&&0===e.errorMessage.indexOf("Debug Failure"))return;throw e}}async updateFileStrict(e,t){if(this.contentByFileName.get(this.fileName(e))!==t){if(this.contentByFileName.set(this.fileName(e),t),this.workerError)throw this.workerError;return this.request({type:"updateFile",fileName:this.fileName(e),content:t})}}async deleteFile(e){if(this.contentByFileName.delete(this.fileName(e)),this.workerError)throw this.workerError;return this.request({type:"deleteFile",fileName:this.fileName(e)})}getCompletionsAtPosition(e,t){if(this.workerError)throw this.workerError;return this.request({type:"completions",fileName:this.fileName(e),pos:t})}getSignatureHelpItems(e,t,n){if(this.workerError)throw this.workerError;return this.request({type:"signatureHelp",fileName:this.fileName(e),content:n,pos:t})}request(e){let t={id:++this.id,...e};return new Promise((e,n)=>{this.requests.set(t.id,[t=>{t&&"payload"in t?e(t.payload):e()},n]),this.send(t)})}send(e){this.worker.postMessage(e)}messaged(e){if(!e.isTrusted)return;let t=e.data,{id:n}=t;if(!this.requests.has(n))return;let[s,r]=this.requests.get(n);(this.requests.delete(n),"error"===t.type)?(t.errorMessage&&0===t.errorMessage.indexOf("Debug Failure")&&s(void 0),r(t)):s(t)}constructor(e){this.id=0,this.requests=new Map,this.contentByFileName=new Map,this.workerError=void 0,this.includePlot=!1,this.worker=new Worker(n.tu(new URL(n.p+n.u(2459),n.b))),this.worker.onerror=e=>{this.workerError=e.error instanceof Error?e.error:Error(e.message||"TypeScript worker error")},this.worker.onmessage=e=>{this.messaged(e)},this.request({type:"set_current_user",user:e})}}function d(e){let t=a.Qg&&window.matchMedia(l.ro).matches,{notebook:n,currentUser:d}=e.getState();a.Qg&&(0,i.S1)(d)&&!s.R.loaded&&(0,s.W)(e.dispatch).then(()=>e.dispatch({type:"enableVimKeys"}));let u=new r.Z(e.dispatch,()=>(function(e,t,n){let s=null;if(!t){try{s=new c(n)}catch(e){return null}for(let t of e.model.nodes)s.updateFile(t.id,t.value)}return s})(n,t,d));return u.setState(n),(0,o.x)(e,()=>{let t=e.getState(),{transactions:n}=t.notebook;delete t.notebook.transactions,u.setState(t.notebook,n)}),u}},86342:function(e,t,n){n.d(t,{_:function(){return c}});var s=n(67294);let r=0,l=null;function a(){l=requestAnimationFrame(a),scrollBy(0,r)}function i(e){(r=Math.min(0,e-20)||Math.max(0,e-innerHeight+20))&&!l?l=requestAnimationFrame(a):l&&!r&&(cancelAnimationFrame(l),l=null)}var o=n(26596);function c(e,t,n,r,l,a,c){let[d,u]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let s;let d=t.current,h=navigator.maxTouchPoints||"ontouchstart"in d,m=!1,p=!1,f=NaN,x=NaN;function g(e){e.ctrlKey||e.button||!e.isPrimary||r||((s=e.target).setPointerCapture(e.pointerId),d.style.cursor="grabbing",p=void 0,m=!0,f=e.clientX,x=e.clientY)}function b(r){let o;if(!m||!r.isPrimary)return;let{clientX:h,clientY:g}=r;if(void 0===p){if(h-f>20){d.style.cursor="",s.releasePointerCapture(r.pointerId),s=void 0,p=!1;return}Math.abs(g-x)>20&&(p=!0,l({type:"dragStarted",id:e}),u(!0),(null==n?void 0:n.current)&&t.current&&t.current.dispatchEvent(new MouseEvent("mousedown",{bubbles:!0})))}if(!p)return;let b=d.closest(".".concat(c));for(;o=function(e,t,n){for(n=n?n.nextElementSibling:t.firstElementChild;n&&!n.classList.contains(e);)n=n.nextElementSibling;return n||null}(a,b,o);){let e=o.getBoundingClientRect();if((e.top+e.bottom)/2>g)break}l({type:"dragged",id:o?+o.dataset.nodeId:null}),i(g)}function v(e){e.isPrimary&&(s&&(s.releasePointerCapture(e.pointerId),s=void 0,d.style.cursor=""),p&&(l({type:"dragEnded"}),u(!1)),i(NaN),p=!1,m=!1)}return h&&d.addEventListener("touchmove",o.PF),d.addEventListener("pointerdown",g),d.addEventListener("pointermove",b),d.addEventListener("pointerup",v),d.addEventListener("pointercancel",v),d.addEventListener("lostpointercapture",v),()=>{h&&d.removeEventListener("touchmove",o.PF),d.removeEventListener("pointerdown",g),d.removeEventListener("pointermove",b),d.removeEventListener("pointerup",v),d.removeEventListener("pointercancel",v),d.removeEventListener("lostpointercapture",v)}},[l,r,t,u,n,c,a,e]),[d,u]}},55560:function(e,t,n){n.d(t,{O:function(){return l}});var s=n(67294),r=n(26596);function l(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,s.useRef)(null),n=(0,s.useRef)(null),[l,a]=(0,s.useState)(e),i=(0,s.useCallback)(e=>{e&&t.current&&t.current.contains(e.target)&&(e.stopPropagation(),e.preventDefault()),(null==e?void 0:e.currentTarget)&&"A"===e.currentTarget.tagName&&(e.nativeEvent.shiftKey||e.nativeEvent.altKey||e.nativeEvent.metaKey||e.nativeEvent.ctrlKey)||a(!1)},[t]),o=(0,s.useCallback)(()=>{a(!0)},[]);return(0,s.useEffect)(()=>{function e(e){l&&n.current&&!n.current.contains(e.target)&&i((0,r.a3)(e))}function t(e){l&&"Escape"===e.key&&i((0,r.a3)(e))}return l&&(addEventListener("click",e,!0),addEventListener("touchstart",e,{passive:!1,capture:!0}),addEventListener("keydown",t,!0)),()=>{removeEventListener("click",e,!0),removeEventListener("touchstart",e,{capture:!0}),removeEventListener("keydown",t,!0)}},[i,l]),{open:l,openMenu:o,closeMenu:i,triggerRef:t,uiRef:n}}},8420:function(e,t,n){n.d(t,{E:function(){return l}});var s=n(67294);let r="undefined"!=typeof IntersectionObserver;function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{root:n=null,rootMargin:l="0px",threshold:a=0,defaultValue:i=!r}=t,[o,c]=(0,s.useState)(i),d=(0,s.useMemo)(()=>r?new IntersectionObserver(e=>{let[t]=e;c(t.isIntersecting)},{root:n,rootMargin:l,threshold:a}):null,[n,l,a]);return(0,s.useEffect)(()=>{let t=e.current;return t&&d?(d.observe(t),()=>{d.disconnect()}):void 0},[d,e]),o}},24600:function(e,t,n){n.d(t,{r:function(){return r}});var s=n(71902);async function r(e,t){let n=await fetch(e,{headers:{authorization:"Bearer ".concat(t),"content-Type":"application/json"}});if(!n.ok){let e=n.headers.get("content-type");if(null==e?void 0:e.startsWith("application/json")){let{error:e}=await n.json();throw Error(e.message)}throw new s.ZP(n.status,n.url)}return n.json()}},2392:function(e,t,n){let s;function r(e){return!!/drive\/v3\/files\/.*/.test(e)}n.d(t,{N6:function(){return a},SW:function(){return c},__:function(){return d},eJ:function(){return l},ty:function(){return r},wA:function(){return o}});let l="614404957759",a="AIzaSyAjxeAzLAiTpmClMsnQ6OuZMg5BC7AckCA",i=new Map([["application/vnd.google-apps.document","text/html"],["application/vnd.google-apps.drawing","image/svg+xml"],["application/vnd.google-apps.form","text/html"],["application/vnd.google-apps.map","text/html"],["application/vnd.google-apps.photo","image/jpeg"],["application/vnd.google-apps.presentation","application/pdf"],["application/vnd.google-apps.script","text/plain"],["application/vnd.google-apps.site","text/html"],["application/vnd.google-apps.spreadsheet","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]]);function o(e,t){return["".concat("https://www.googleapis.com").concat(e),t]}function c(e){return i.get(e)||e}async function d(){return s||(s=new Promise(e=>{let t="gapiLoaded".concat(Math.random()),n=document.createElement("script");n.src="https://apis.google.com/js/api.js?onload=".concat(t),window[t]=function(){e(window.gapi),delete window[t]},document.head.appendChild(n)})),s}},42004:function(e,t,n){n.d(t,{K:function(){return s}});function s(e){return null!==e}},82076:function(e,t,n){function s(e,t){for(let n of e)if(t(n))return!0;return!1}function r(e,t){return e.length===t.length&&e.every(e=>t.includes(e))&&t.every(t=>e.includes(t))}n.d(t,{G:function(){return s},u:function(){return r}})},13727:function(e,t,n){n.d(t,{V:function(){return r}});var s=n(83879);function r(e){let t=new Map;for(let n of e){let e=n.length-1,r=n[e];for(let a=0;a<e;++a){let e=n[a],i=function(e){let t=e.split(/-(?!$)/),n=t.pop();if(!n)throw Error("Missing key: ".concat(e));"space"===(n=n.toLowerCase())&&(n=" ");let r=!1,a=!1,i=!1,o=!1;for(let e of t)switch(e.toLowerCase()){case"meta":r=!0;break;case"alt":a=!0;break;case"ctrl":i=!0;break;case"shift":o=!0;break;case"mod":s.Mq?r=!0:i=!0;break;default:throw Error("Unrecognized modifier: ".concat(e))}return l({key:n,ctrlKey:i,altKey:a,shiftKey:o,metaKey:r})}(e);if(t.has(i))throw Error("Duplicate entry: ".concat(e));t.set(i,r)}}return(e,n)=>{let s=t.get(l(n));return!!s&&s(e,n)}}function l(e){let t=[];return e.ctrlKey&&t.push("Control"),e.altKey&&t.push("Alt"),e.shiftKey&&t.push("Shift"),e.metaKey&&t.push("Meta"),t.push(e.key.toLowerCase()),t.join("-")}},40913:function(e,t,n){n.d(t,{B5:function(){return l},ax:function(){return a},nm:function(){return i}});var s=n(68098);let r=new Map(Object.entries({"agpl-3.0":{short:"GNU AGPLv3",long:"GNU Affero General Public License v3.0"},"apache-2.0":{short:"Apache 2.0",long:"Apache License "},"bsd-3-clause":{short:"BSD 3-Clause",long:"BSD 3-Clause “New” or “Revised” License"},"cc-by-4.0":{short:"CC BY 4.0",long:"Creative Commons Attribution 4.0 International"},"cc-by-sa-4.0":{short:"CC BY-SA 4.0",long:"Creative Commons Attribution Share Alike 4.0 International"},"gpl-3.0":{short:"GNU GPLv3",long:"GNU General Public License v3.0"},isc:{short:"ISC",long:"ISC License"},"lgpl-3.0":{short:"GNU LGPLv3",long:"GNU Lesser General Public License v3.0"},mit:{short:"MIT",long:"MIT License"},other:{short:"Other",long:"Other"}})),l=Array.from(r.keys());function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"short";if(!e)return"None";let n=r.get(e);if(!n)throw Error("Unknown license identifier: ".concat(e));return n[t]}function i(e){return"Copyright ".concat(new Date().getFullYear()," ").concat((0,s.RX)(e))}},84342:function(e,t,n){n.d(t,{Xk:function(){return u},Z8:function(){return o},ap:function(){return d},bh:function(){return c},g4:function(){return a},mL:function(){return i}});var s=n(24600),r=n(98454),l=n(42004);function a(e,t){return["".concat("https://graph.microsoft.com","/v1.0").concat(e),t]}function i(e,t){return(n,s)=>t&&(!s||s["@odata.nextLink"])?s&&0!==n?[s["@odata.nextLink"],t]:a(e,t):null}async function o(e){let[,t,n]=e,r=n?await (0,s.r)(...a("/me/memberOf/microsoft.graph.group",t)):{value:[]};return(await Promise.all([(0,s.r)(...a("/me/drives",t)).catch(()=>null),...r.value.map(e=>(0,s.r)(...a("/groups/".concat(e.id,"/drives"),t)).catch(()=>null))])).filter(l.K).flatMap(e=>e.value)}function c(e,t){var n,s;let l=(null==e?void 0:e.remoteItem)?null===(n=e.remoteItem.file)||void 0===n?void 0:n.mimeType:null==e?void 0:null===(s=e.file)||void 0===s?void 0:s.mimeType;return l&&"application/vnd.ms-excel"!==l?l:(0,r.L)(null!=t?t:"")}function d(e){return(null==e?void 0:e.remoteItem)?e.remoteItem.size:null==e?void 0:e.size}function u(e){return!!/\/drives\/[!a-zA-Z0-9-_]+\/items\/([!a-zA-Z0-9-_]+)/.test(e)}},97795:function(e,t,n){n.d(t,{$r:function(){return d},ng:function(){return u},uF:function(){return h},xT:function(){return c}});var s=n(33083),r=n(67294),l=n(7384),a=n(31207),i=n(88027),o=n(61802);function c(e){return!!e&&"error"in e}function d(e){let{imports:t}=e,[[n]=[]]=t;if(!n)return{mainSpecifier:n,directImports:new Map};let s=new Map([...new Set(t.flat())].map(e=>({specifier:e,children:[],childrenSet:new Set})).map(e=>[e.specifier,e])),r=new Map;for(let[e,l]of t){e===n&&r.set(l,[]);let t=s.get(e),a=s.get(l);t.childrenSet.has(l)||(t.childrenSet.add(l),t.children.push(a))}for(let e of r.keys())r.set(e,function e(t,n){let{specifier:s,children:r}=t,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;return l.has(s)?[]:(l.add(s),[[n,s],...r.flatMap(t=>e(t,s,l))])}(s.get(e),n));return{mainSpecifier:n,directImports:r}}function u(e,t,n){let s=new Map(n.filter(e=>"notebook"===e.type).map(e=>{let{specifier:t,value:n}=e;return[t,i.Z.parse(n)]})),r=new Map(Object.entries(e).map(e=>{var t;let[n,r]=e,l=s.has(n)?s.get(n).version:void 0,a=c(r)?void 0:null===(t=i.Z.parse(r.resolution))||void 0===t?void 0:t.version;return[n,{lockStatus:void 0!==l?"locked":"unlocked",version:l,latestVersion:a,updatesAvailable:void 0!==l&&l!==a}]}));for(let[e,n]of t){let t=0,s=!1;for(let[,e]of n){let n=r.get(e);t+=(null==n?void 0:n.lockStatus)==="locked"?1:0,s||(s=!!(null==n?void 0:n.updatesAvailable))}let l=r.get(e);l&&(l.lockStatus=t===n.length?"locked":0===t?"unlocked":"mixed",l.updatesAvailable=s)}return r}function h(e){let{id:t,saveVersion:n,model:i}=e,{ignoreResolutions:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=(0,r.useRef)(n),u=(0,r.useRef)(i.history.length),h=(0,r.useRef)(),m=(0,r.useRef)(new Set(i.nodes.map(e=>(0,s.oo)((0,a.Qc)(e))?e.id:void 0).filter(e=>e)));for(let e of i.history.slice(u.current)){let{type:t,version:n}=e;switch(t){case"insert_node":case"modify_node":{let{node_id:t}=e,r=(0,l.DY)(i,t);if(!r)break;(0,s.oo)((0,a.Qc)(r))&&(m.current.add(t),d.current=n);break}case"remove_node":{let{node_id:t}=e;m.current.has(t)&&(m.current.delete(t),d.current=n);break}case"resolve_dependency":d.current=n}}u.current=i.history.length;let p="".concat(t,"@").concat(Math.min(n,d.current)),f="/document/".concat(p,"/imports").concat(c?"":"?resolutions=".concat(p)),{data:x,error:g}=(0,o.h_)(f);return g?console.error("notebook import resolutions failed to load."):x&&(h.current=x),h.current}},68347:function(e,t,n){n.d(t,{Q:function(){return l},x:function(){return a}});var s=n(73935);let r=new WeakMap;function l(e){let t=r.get(e);if(t)return t;let n=[];return t=t=>{n.push(t),1===n.length&&Promise.resolve().then(()=>{(0,s.unstable_batchedUpdates)(()=>{n.splice(0,n.length).forEach(e.dispatch)})})},r.set(e,t),t}function a(e,t){let n=e.getState();return e.subscribe(()=>{let s=e.getState();s!==n&&(n=s,t())})}}}]);