!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="c8446a18-6373-42be-8534-e5832aa3e5e5",e._sentryDebugIdIdentifier="sentry-dbid-c8446a18-6373-42be-8534-e5832aa3e5e5")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9898],{65493:function(e,t,n){"use strict";function s(e,t,{maxIterations:n=1/0}={}){let s=t.length,i=e.length,l=1,a=s+i,c=[{newPos:-1,components:[]}],d=o(c[0],t,e,0);if(c[0].newPos+1>=s&&d+1>=i)return[{value:t.join(""),count:t.length}];for(;l<=a&&n--;){for(let n=-1*l;n<=l;n+=2){let l,a=c[n-1],d=c[n+1],u=(d?d.newPos:0)-n;a&&(c[n-1]=null);let m=a&&a.newPos+1<s,h=d&&0<=u&&u<i;if(!m&&!h){c[n]=null;continue}if(!m||h&&a.newPos<d.newPos?r((l={newPos:d.newPos,components:d.components.slice(0)}).components,null,!0):(l=a,l.newPos++,r(l.components,!0,null)),u=o(l,t,e,n),l.newPos+1>=s&&u+1>=i)return function(e,t,n){let s=0,r=e.length,o=0,i=0;for(;s<r;s++){let r=e[s];if(r.removed){if(r.value=n.slice(i,i+r.count).join(""),i+=r.count,s&&e[s-1].added){let t=e[s-1];e[s-1]=e[s],e[s]=t}}else r.value=t.slice(o,o+r.count).join(""),o+=r.count,r.added||(i+=r.count)}let l=e[r-1];return r>1&&(l.added||l.removed)&&!l.value&&e.pop(),e}(l.components,t,e);c[n]=l}l++}}function r(e,t,n){let s=e[e.length-1];s&&s.added===t&&s.removed===n?e[e.length-1]={count:s.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})}function o(e,t,n,s){let r=t.length,o=n.length,i=e.newPos,l=i-s,a=0;for(;i+1<r&&l+1<o&&t[i+1]===n[l+1];)i++,l++,a++;return a&&e.components.push({count:a}),e.newPos=i,l}n.d(t,{Z:function(){return s}})},95698:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var s=n(65493),r=n(93711);function o(e,t,n){return(0,s.Z)(i(e),i(t),n)}function i(e){let t=[],n=(e+"").split(/(\n|\r\n)/);n[n.length-1]||n.pop();for(let e=0;e<n.length;e++){let s=n[e];e%2?t[t.length-1]+=s:t.push(s)}return t.filter(r.Z)}},68745:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var s=n(65493),r=n(93711);let o=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/;function i(e,t,n){return(0,s.Z)(l(e),l(t),n)}function l(e){let t=(e+"").split(/(\s+|[()[\]{}'"]|\b)/);for(let e=0;e<t.length-1;e++)!t[e+1]&&t[e+2]&&o.test(t[e])&&o.test(t[e+2])&&(t[e]+=t[e+2],t.splice(e+1,2),e--);return t.filter(r.Z)}},93711:function(e,t,n){"use strict";function s(e){return e}n.d(t,{Z:function(){return s}})},22007:function(e,t){"use strict";var n={fullscreenEnabled:0,fullscreenElement:1,requestFullscreen:2,exitFullscreen:3,fullscreenchange:4,fullscreenerror:5,fullscreen:6},s="undefined"!=typeof window&&void 0!==window.document?window.document:{},r="fullscreenEnabled"in s&&Object.keys(n)||"webkitFullscreenEnabled"in s&&["webkitFullscreenEnabled","webkitFullscreenElement","webkitRequestFullscreen","webkitExitFullscreen","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]||"mozFullScreenEnabled"in s&&["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"]||"msFullscreenEnabled"in s&&["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]||[];t.Z={requestFullscreen:function(e){return e[r[n.requestFullscreen]]()},requestFullscreenFunction:function(e){return e[r[n.requestFullscreen]]},get exitFullscreen(){return s[r[n.exitFullscreen]].bind(s)},get fullscreenPseudoClass(){return":"+r[n.fullscreen]},addEventListener:function(e,t,o){return s.addEventListener(r[n[e]],t,o)},removeEventListener:function(e,t,o){return s.removeEventListener(r[n[e]],t,o)},get fullscreenEnabled(){return!!s[r[n.fullscreenEnabled]]},set fullscreenEnabled(val){},get fullscreenElement(){return s[r[n.fullscreenElement]]},set fullscreenElement(val){},get onfullscreenchange(){return s[("on"+r[n.fullscreenchange]).toLowerCase()]},set onfullscreenchange(handler){return s[("on"+r[n.fullscreenchange]).toLowerCase()]=handler},get onfullscreenerror(){return s[("on"+r[n.fullscreenerror]).toLowerCase()]},set onfullscreenerror(handler){return s[("on"+r[n.fullscreenerror]).toLowerCase()]=handler}}},62907:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[at]/[...specifiers]",function(){return n(60898)}])},51091:function(e,t,n){"use strict";var s=n(85893),r=n(94184),o=n.n(r),i=n(70026);t.Z=e=>{let{children:t,singleScreen:n=!1,emptyFooter:r=!1}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:o()("w-100 mw-max-width ph4-l ph3 center",n?"flex flex-column":""),style:n?{minHeight:"calc(100vh - 11rem)"}:{},children:(0,s.jsx)("div",{className:n?"flex-grow-1":"",style:n?{}:{minHeight:"calc(100vh - 24rem)"},children:t})}),(0,s.jsx)(i.Z,{minimal:n,empty:r})]})}},77978:function(e,t,n){"use strict";var s=n(85893);t.Z=e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",...e,children:[(0,s.jsx)("path",{d:"M3 15V1",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M13 15V1",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M15 3L1 3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M15 13L1 13",strokeLinecap:"round",strokeLinejoin:"round"}),(0,s.jsx)("line",{x1:"5",y1:"10",x2:"10",y2:"10"}),(0,s.jsx)("line",{x1:"5",y1:"7",x2:"9",y2:"7"})]})},58058:function(e,t,n){"use strict";n.d(t,{Lr:function(){return a},OH:function(){return c},d_:function(){return d}});var s=n(85893),r=n(40645),o=n.n(r),i=n(67294),l=n(57321);let a=e=>{let{notebook:{like:t},currentUser:n,dispatch:r}=e;return{onSelect:()=>r({type:"like",trigger:"click",source:"notebookHeaderPromotedAction"}),tooltip:n?"".concat(t?"Unstar":"Star"," this notebook"):"Sign in to star this notebook",children:(0,s.jsx)(d,{star:t})}},c=e=>{let{notebook:{like:t},currentUser:n,dispatch:r}=e;return n?{onSelect:()=>{r({type:"like",trigger:"click",source:"notebookContextMenu"})},tooltip:"".concat(t?"Unstar":"Star"," this notebook"),children:(0,s.jsx)(s.Fragment,{children:t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.ZP,{className:"mr2 w1 h1"}),"Unstar"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Df,{className:"mr2 w1 h1"}),"Star"]})})}:null},d=e=>{let{star:t}=e,n=(0,i.useRef)(t),r=t&&!n.current;return n.current=t,(0,s.jsxs)(s.Fragment,{children:[t?(0,s.jsx)(l.ZP,{className:r?"bump":"",color:"var(--dark-gray)",fill:"var(--dark-gray)"}):(0,s.jsx)(l.Df,{className:r?"bump":"",color:"var(--dark-gray)",fill:"transparent"}),(0,s.jsx)(o(),{id:"6659368c4cbab750",children:"@-webkit-keyframes bump{0%{-webkit-transform:none;transform:none}25%{-webkit-transform:scale(1.5);transform:scale(1.5)}100%{-webkit-transform:none;transform:none}}@-moz-keyframes bump{0%{-moz-transform:none;transform:none}25%{-moz-transform:scale(1.5);transform:scale(1.5)}100%{-moz-transform:none;transform:none}}@-o-keyframes bump{0%{-o-transform:none;transform:none}25%{-o-transform:scale(1.5);transform:scale(1.5)}100%{-o-transform:none;transform:none}}@keyframes bump{0%{-webkit-transform:none;-moz-transform:none;-o-transform:none;transform:none}25%{-webkit-transform:scale(1.5);-moz-transform:scale(1.5);-o-transform:scale(1.5);transform:scale(1.5)}100%{-webkit-transform:none;-moz-transform:none;-o-transform:none;transform:none}}.bump{-webkit-animation-duration:350ms;-moz-animation-duration:350ms;-o-animation-duration:350ms;animation-duration:350ms;-webkit-animation-fill-mode:forwards;-moz-animation-fill-mode:forwards;-o-animation-fill-mode:forwards;animation-fill-mode:forwards;-webkit-animation-name:bump;-moz-animation-name:bump;-o-animation-name:bump;animation-name:bump}"})]})}},58192:function(e,t,n){"use strict";n.d(t,{bd:function(){return c},p1:function(){return d},wd:function(){return u}});var s=n(85893),r=n(91529),o=n(70157),i=n(15784),l=n(8273),a=n(68098);let c=e=>{let{notebook:t}=e,{model:n,thumbnail:c,saveTime:d,publishTime:u}=t,m=(0,r.Ui)(n),h=(0,o.o)(n.nodes),p=t.authors.length?t.authors:[t.owner],f=(0,i.UW)(t);return(0,s.jsxs)(s.Fragment,{children:[(0,l.cg)(t)||(0,l.nv)(t)?(0,s.jsx)("meta",{name:"robots",content:"noindex"}):null,(0,s.jsx)("meta",{property:"og:type",content:"article"}),(0,s.jsx)("meta",{property:"og:url",content:"".concat("https://observablehq.com").concat(f)}),(0,s.jsx)("meta",{property:"og:site_name",content:"Observable"}),(0,s.jsx)("meta",{name:"twitter:site",content:"@observablehq"}),(0,s.jsx)("meta",{name:"title",content:m}),(0,s.jsx)("meta",{property:"og:title",content:m}),h&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("meta",{name:"description",content:h}),(0,s.jsx)("meta",{property:"og:description",content:h})]}),c&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("meta",{property:"og:image",content:(0,i.Nl)(c)}),(0,s.jsx)("meta",{name:"twitter:card",content:"summary_large_image"})]}),(0,s.jsx)("meta",{name:"author",content:p.map(e=>(0,r.KY)(e)).join(", ")}),p.map(e=>(0,s.jsx)("meta",{name:"article:author",content:"".concat("https://observablehq.com").concat((0,a.AW)(e))},e.login)),u&&(0,s.jsx)("meta",{property:"article:published_time",content:u.toISOString()}),(0,s.jsx)("meta",{property:"article:modified_time",content:d.toISOString()})]})},d=e=>{let{collection:t}=e,{description:n,thumbnail:o,owner:l,owner:{login:c},slug:d,update_time:u}=t,m=(0,r.Ui)(t);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("meta",{property:"og:type",content:"article"}),(0,s.jsx)("meta",{property:"og:url",content:"".concat("https://observablehq.com","/collection/@").concat(c,"/").concat(d)}),(0,s.jsx)("meta",{property:"og:site_name",content:"Observable"}),(0,s.jsx)("meta",{name:"twitter:site",content:"@observablehq"}),(0,s.jsx)("meta",{name:"title",content:m}),(0,s.jsx)("meta",{property:"og:title",content:m}),n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("meta",{name:"description",content:n}),(0,s.jsx)("meta",{property:"og:description",content:n})]}),o&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("meta",{property:"og:image",content:(0,i.Nl)(o)}),(0,s.jsx)("meta",{name:"twitter:card",content:"summary_large_image"})]}),(0,s.jsx)("meta",{name:"author",content:(0,r.KY)(l)}),(0,s.jsx)("meta",{name:"article:author",content:"".concat("https://observablehq.com").concat((0,a.Pu)(t.owner))}),(0,s.jsx)("meta",{property:"article:modified_time",content:u.toISOString()})]})},u=e=>{let{user:t}=e,{avatar_url:n,bio:o,login:i}=t,l=(0,r.KY)(t),a="Recent notebooks by ".concat(l);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("meta",{property:"og:type",content:"profile"}),(0,s.jsx)("meta",{property:"og:url",content:"".concat("https://observablehq.com","/@").concat(i)}),(0,s.jsx)("meta",{property:"og:site_name",content:"Observable"}),(0,s.jsx)("meta",{name:"twitter:site",content:"@observablehq"}),(0,s.jsx)("meta",{name:"title",content:a}),(0,s.jsx)("meta",{property:"og:title",content:a}),(0,s.jsx)("meta",{property:"description",content:o}),(0,s.jsx)("meta",{property:"og:description",content:o}),n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("meta",{property:"og:image",content:n}),(0,s.jsx)("meta",{name:"twitter:card",content:"summary"})]}),(0,s.jsx)("meta",{property:"profile:last_name",content:l}),(0,s.jsx)("meta",{property:"profile:username",content:i})]})}},24048:function(e,t,n){"use strict";n.d(t,{f:function(){return o}});var s=n(67294),r=n(82076);function o(e,t,n){let o=(0,s.useRef)(),i=(0,s.useRef)(e),l=(0,s.useRef)([]),a=(0,s.useRef)(t);a.current=t,(0,s.useEffect)(()=>{let t=i.current;if(i.current=e,!a.current)return;let s=[];for(let[n,r]of e){let e=t.get(n);(null==e?void 0:e.doc)!==r.doc&&s.push(n)}let c=Array.from(t.keys()),d=Array.from(e.keys());!(!s.length&&(0,r.u)(c,d))&&(l.current=s,o.current||(o.current=setTimeout(()=>{o.current=void 0,n({type:"updateSearchResults",nodeIds:l.current})},100)))},[e,n])}},60898:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return t3},default:function(){return t9},parseParams:function(){return t4}});var s=n(85893),r=n(40645),o=n.n(r),i=n(5152),l=n.n(i),a=n(9008),c=n.n(a),d=n(67294),u=n(41664),m=n.n(u),h=n(68059),p=n(1639),f=n(57475),x=n(38784),g=n(67374),j=n(46582),b=n(84795),y=n(61802),v=n(13370),w=n(46294),k=n(34978),N=n(91529),S=n(85049),C=n(15784),_=n(33888);let F=e=>{let{notebook:t,collection:n,currentUser:r,formatTitleInCollection:o}=e,[i,l]=(0,d.useState)(!1),{data:a}=(0,y.h_)(i?"/collection/@".concat(n.owner.login,"/").concat(n.slug):null),c=a?a.listings:[];return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-start mt3",children:[(0,s.jsx)(h.hU,{colorless:!0,icon:f.Z,onClick:()=>{l(!i)},className:"align-start mh2",style:i?{transform:"rotate(90deg)",padding:0}:{padding:0}}),(0,s.jsxs)(m(),{href:(0,k.WG)(n),className:"flex no-underline mid-gray hover-blue db pr2",onClick:()=>void(0,w.MR)((0,w.a$)({type:"collectionRequested",data:{trigger:"click",source:"collectionsSidebar"},eventVersion:1,currentUser:r})),children:[(0,s.jsx)("div",{className:"break-word",title:(0,N.Ui)(n),children:o(n)}),(0,s.jsxs)("span",{className:"mh1",children:[" (",n.listing_count,") "]}),(0,s.jsx)(p.Z,{className:"flex-shrink-0"})]})]}),i?c.map((e,r)=>(0,s.jsx)(d.Fragment,{children:"collection"===e.listing_type?(0,s.jsxs)(m(),{href:(0,k.WG)(e),className:"flex items-top no-underline mid-gray hover-blue ml4 pl2 mt3 db pr1",children:[(0,s.jsx)("div",{className:"break-word",title:(0,N.Ui)(e),children:o(e)}),(0,s.jsxs)("span",{className:"mh1 align-start",children:["(",e.listing_count,")"]}),(0,s.jsx)(p.Z,{className:"flex-shrink-0"})]}):e.id===t.id?(0,s.jsxs)("div",{className:"flex near-black items-center mt3 ml2 near-black",children:[(0,s.jsx)(x.Z,{className:"pa2"}),(0,s.jsx)("span",{className:"break-word",children:o(e)})]}):(0,s.jsx)(m(),{href:"".concat((0,C.Bi)(e),"?collection=@").concat(n.owner.login,"/").concat(n.slug),className:"no-underline mid-gray hover-blue ml4 pl2 mt3 db pr2",title:(0,N.Ui)(e),children:(0,s.jsx)("div",{className:"break-word",children:o(e)})})},r)):null]})},Z=e=>{let{notebook:t,currentCollection:n,dispatch:r}=e,{collections:o}=t;return o.length>1?(0,s.jsxs)("div",{className:"ph2 mt3 bt b--silver",children:[(0,s.jsx)("div",{className:"ph2 mt3 near-black",children:"Also listed in…"}),o.map(e=>e.id!==n.id&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(m(),{href:"".concat((0,C.Bi)(t),"?collection=@").concat(e.owner.login,"/").concat(e.slug),className:"no-underline hover-blue",onClick:t=>{t.metaKey||t.ctrlKey||(r({type:"setOpenCollection",collection:e}),t.preventDefault())},children:(0,s.jsxs)("div",{className:"flex items-start ph2 mv3",children:[(0,s.jsx)(g.Z,{className:"mr2 flex-shrink-0",style:{marginTop:1}}),(0,s.jsx)("div",{title:(0,N.Ui)(e),className:"mr1 f6 fw5 lh-title break-word",children:(0,N.Ui)(e)})]})},e.id)}))]}):null},T=(0,_.$j)(e=>{let{notebook:t,currentUser:n}=e;return{notebook:t,currentUser:n}},e=>({dispatch:e}))(e=>{let{notebook:t,currentUser:n,dispatch:r}=e,i=(0,b.h)(t),l=function(e){let t=(0,N.go)((0,N.Ui)(e)),n=new RegExp("(?:^".concat(t,"\\s*[-:/])|(?:[-:/]\\s*").concat(t,"$)"));return e=>{let t=(0,N.Ui)(e);return t.replace(n,"").trim()||t}}(i),{initialCollection:a}=t,c=a?a.listings:[],u=(0,_.v9)(e=>e.decorations.bannerProps),f=S.Lv+u.height;return(0,s.jsxs)("div",{"data-testid":"collection-sidebar",style:{boxShadow:"var(--box-shadow-5)"},className:o().dynamic([["cd1aff457ed1e014",[v.pp,f,f,S.Sf]]])+" mt3-l fixed self-start bg-near-white overflow-y-auto pane z-1 br3 br--right dn-print",children:[(0,s.jsxs)("div",{className:o().dynamic([["cd1aff457ed1e014",[v.pp,f,f,S.Sf]]])+" pv3",children:[(0,s.jsxs)("div",{className:o().dynamic([["cd1aff457ed1e014",[v.pp,f,f,S.Sf]]])+" flex justify-between items-start ph2 mb1",children:[(0,s.jsx)("div",{className:o().dynamic([["cd1aff457ed1e014",[v.pp,f,f,S.Sf]]])+" flex items-start ",children:(0,s.jsxs)(m(),{href:(0,k.WG)(i),className:"flex no-underline hover-blue pv2 db near-black items-start",onClick:()=>void(0,w.MR)((0,w.a$)({type:"collectionRequested",data:{trigger:"click",source:"collectionsSidebar"},eventVersion:1,currentUser:n})),children:[(0,s.jsx)(g.Z,{className:"flex-shrink-0 mr2"}),(0,s.jsx)("span",{style:{marginTop:-2},className:o().dynamic([["cd1aff457ed1e014",[v.pp,f,f,S.Sf]]])+" f5 lh-title fw6 mr1 break-word",children:(0,N.Ui)(i)}),(0,s.jsx)(p.Z,{className:"flex-shrink-0"})]})}),(0,s.jsx)(h.hU,{colorless:!0,icon:j.Z,onClick:()=>r({type:"toggleCollectionsSidebar"})})]}),(0,s.jsx)("div",{className:o().dynamic([["cd1aff457ed1e014",[v.pp,f,f,S.Sf]]]),children:c.map((e,r)=>(0,s.jsx)(d.Fragment,{children:"collection"===e.listing_type?(0,s.jsx)(F,{collection:e,formatTitleInCollection:l,notebook:t,currentUser:n}):e.id===t.id?(0,s.jsxs)("div",{title:(0,N.Ui)(e),className:o().dynamic([["cd1aff457ed1e014",[v.pp,f,f,S.Sf]]])+" flex near-black mt3 near-black break-word",children:[(0,s.jsx)(x.Z,{className:"ph2 flex-shrink-0 self-start",style:{marginTop:1}}),(0,s.jsx)("div",{className:o().dynamic([["cd1aff457ed1e014",[v.pp,f,f,S.Sf]]])+" pr2",children:l(e)})]}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(m(),{href:"".concat((0,C.Bi)(e),"?collection=@").concat(i.owner.login,"/").concat(i.slug),style:{marginLeft:16},className:"no-underline mid-gray hover-blue mt3 pl3 pr2 db break-word",onClick:()=>{(0,w.MR)((0,w.a$)({type:"notebookRequested",data:{trigger:"click",source:"collectionsSidebar"},eventVersion:1,currentUser:n}))},title:(0,N.Ui)(e),children:l(e)})})},r))})]}),(0,s.jsx)(Z,{notebook:t,currentCollection:i,dispatch:r}),(0,s.jsx)(o(),{id:"cd1aff457ed1e014",dynamic:[v.pp,f,f,S.Sf],children:".pane.__jsx-style-dynamic-selector{bottom:0;left:0;right:0;top:0}@media ".concat(v.pp,"{.pane.__jsx-style-dynamic-selector{top:").concat(f,"px;width:220px;max-height:-webkit-calc(100vh - ").concat(f,"px - ").concat(S.Sf,"px - 38px);max-height:-moz-calc(100vh - ").concat(f,"px - ").concat(S.Sf,"px - 38px);max-height:calc(100vh - ").concat(f,"px - ").concat(S.Sf,"px - 38px)}}")})]})});var E=n(70026),L=n(81397),R=n(15801),P=n(58192),q=n(96612),M=n(26669),O=n(81027),U=n(52332),A=n(68098);let D=e=>{var t;let{currentUser:n,notebook:r,dispatch:o,moved:i}=e,{data:l}=(0,y.h_)(r.forkOf?"/document/".concat(r.forkOf.id):null),a=l&&(0,A.Hw)(l),c=l&&("team"===(t=l.owner).type?null==n?void 0:n.teams.some(e=>e.id===t.id):(null==n?void 0:n.id)===t.id),d=a&&c;return i?(0,s.jsx)(M.On,{title:"Notebook moved to trash",icon:O.Z,description:"Deleted notebooks are kept for 30 days before being permanently removed.",onConfirm:()=>{location.assign(r.forkOf&&d?(0,C.Bi)(r.forkOf):(0,A.i7)(r.owner))},confirmText:r.forkOf&&d?"Go to parent notebook":"Go to workspace",onCancel:(0,U.rY)(r)?()=>o({type:"trashRequested",trashed:!1}):()=>{},cancelText:(0,U.rY)(r)?"Restore notebook":void 0,focusConfirm:!0}):(0,s.jsx)(M.On,{title:"Notebook is in the trash",icon:O.Z,description:(0,U.rY)(r)?"Deleted notebooks are kept for 30 days before being permanently removed.":"The notebook you were viewing has been deleted by its owner.",onCancel:()=>{location.assign("".concat((0,A.i7)(r.owner),"?tab=trash"))},onConfirm:(0,U.rY)(r)?()=>o({type:"trashRequested",trashed:!1}):()=>{},confirmText:(0,U.rY)(r)?"Restore notebook":void 0,focusConfirm:!0})};var V=n(33615),z=n(6467),I=n(48537),H=n(2964);let $=e=>{let{notebook:{notificationRequests:t,schedule:n},dispatch:r}=e,o=(0,d.useRef)(null),[i,l]=(0,d.useState)(!1),a=[...t],c=a.length>1;return(0,s.jsxs)(z.Vq,{initialFocusRef:o,onDismiss:()=>{for(let[e]of a)r({type:"rejectNotificationRequest",requestId:e})},className:"overflow-hidden","aria-labelledby":"modal-title",children:[(0,s.jsxs)("div",{id:"modal-title",className:"pa3 flex items-center justify-between tw-bg-surface-secondary",children:["Send test notification",1===a.length?"":"s"," now?",(0,s.jsxs)("div",{className:"flex items-center f7 fw5 dark-gray",title:n?"This notebook will run every ".concat("10m"===n?"ten minutes":"1h"===n?"hour":"day"," and send any triggered notifications."):"No schedule set. Set one in the sidebar to send notifications periodically.",children:[(0,s.jsx)(H.Z,{className:"w1 h1 mh1"})," ",n||"—"]})]}),a.map((e,t)=>{let[n,{provider:o,address:i}]=e;return(0,s.jsxs)("div",{className:"flex justify-between items-center pa3 bt b--silver",style:{minHeight:67},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"fw6 mr2",children:"email"===o?"Email":"slack"===o?"Slack":"msteams"===o?"Microsoft Teams":"Unknown provider"}),(0,s.jsx)("span",{className:"dark-gray",children:i.split(",").join(", ")})]}),c&&(0,s.jsxs)(h.CQ,{className:"flex-shrink-0",children:[(0,s.jsx)(h.kq,{className:"mr1",text:"Send",onClick:()=>r({type:"confirmNotificationRequest",requestId:n})}),(0,s.jsx)(h.KM,{text:"Don’t send",onClick:()=>r({type:"rejectNotificationRequest",requestId:n})})]})]},t)}),(0,s.jsxs)("div",{className:"flex justify-between pa3 bt b--silver tw-bg-surface-secondary",children:[(0,s.jsx)(I.X,{onChange:e=>l(e.target.checked),checked:i,label:"Ignore requests for rest of session"}),(0,s.jsxs)(h.CQ,{children:[(0,s.jsx)(h.kq,{text:"Send".concat(c?" all":""),onClick:()=>{for(let[e]of a)r({type:"confirmNotificationRequest",requestId:e});i&&r({type:"ignoreNotificationRequests"})}}),(0,s.jsx)(h.KM,{text:"Don’t send".concat(c?" all":""),ref:c?void 0:o,onClick:()=>{for(let[e]of a)r({type:"rejectNotificationRequest",requestId:e});i&&r({type:"ignoreNotificationRequests"})}})]})]})]})};var Y=n(29501),B=n(53504),X=n(64664),G=n(11163),W=n(3239),K=n(21596),J=n(36779),Q=n(8273);let ee=e=>{let{dispatch:t,notebook:n,stuck:r,menuActionList:o}=e,{id:i,publishVersion:l,saveVersion:a,model:c}=n,u=(0,Q.cg)(n),{data:m}=(0,y.h_)(l&&a>l?"/document/".concat(i,"/history"):null),h=(0,d.useMemo)(()=>m?function(e,t,n){let s=0,r=e+1;for(let e=n.length-1;e>=0;e--){let o=n[e];if(o.version===t)break;if(!(o.version>=r)){if("revert"===o.type){r=o.node_id+1;continue}"modify_title"!==o.type&&s++,r=o.version}}return s}(a,l,[...m.events,...c.history.filter(Boolean)]):0,[l,a,c,m]);return(0,s.jsx)(W.jL,{bgColor:"bg-observable-dark-gold",color:"white",stuck:r,menuActionList:o,children:(0,s.jsxs)("div",{className:"flex items-center flex-wrap w-100 justify-end",children:[(0,s.jsxs)(W.y,{icon:K.Z,children:[(0,s.jsxs)(W.TR,{children:[h>0?"".concat(h," unpublished edit").concat(h>1?"s":""):"Published version","\xa0\xa0"]}),(0,s.jsx)(W.EX,{children:(0,s.jsxs)("div",{children:["Changes are visible to workspace members only. Make the notebook"," ",(0,s.jsx)("b",{children:u?"unlisted":"public"})," to show the changes externally."]})})]}),(0,s.jsxs)("div",{className:"flex items-center flex-wrap justify-end",children:[(0,s.jsx)(J.Z,{href:"/@observablehq/public-and-published-notebooks",children:(0,s.jsx)(W.N_,{icon:p.Z,iconPosition:"right",children:"Learn more"})}),(0,s.jsxs)(W.N_,{icon:K.Z,primary:!0,onClick:()=>{t({type:"publishLiveRequested",unlisted:u})},children:["Make ",u?"unlisted":"public"]})]})]})})};var et=n(86866),en=n(47985);let es=d.memo(function(e){let{notebook:t,currentUser:n,dispatch:r}=e,o=(0,A.xT)(n,t.owner);if(!o)return null;let i=(0,A.XO)(o,["owner"]),l=o.settings[et.AQ]?(0,et.q$)(i):o.settings[et.CR]?(0,et.Me)(i):null;return(0,s.jsxs)("div",{className:"flex items-center flex-wrap w-100 justify-end",children:[(0,s.jsxs)(W.y,{icon:en.Z,children:[(0,s.jsx)(W.TR,{className:"truncate mr2",children:"Read-only"}),(0,s.jsx)(W.EX,{children:(0,s.jsx)("span",{className:"ml1",children:l})})]}),i&&(o.settings[et.AQ]?(0,s.jsx)(et.l_,{context:o}):o.settings[et.CR]?(0,s.jsx)(et.Hp,{context:o,dispatch:r}):null)]})}),er=e=>{let{dispatch:t,notebook:n,stuck:r,menuActionList:o,currentUser:i}=e;return(0,s.jsx)(W.jL,{bgColor:"bg-observable-dark-gold",color:"white",stuck:r,menuActionList:o,children:(0,s.jsx)(es,{dispatch:t,notebook:n,currentUser:i})})};var eo=n(69537);let ei=e=>{let{dispatch:t,stuck:n,menuActionList:r}=e;return(0,s.jsx)(W.jL,{bgColor:"bg-gold",onExit:()=>t({type:"exitSafe"}),exitLabel:"Exit Safe Mode",stuck:n,menuActionList:r,children:(0,s.jsxs)(W.y,{icon:eo.Z,children:[(0,s.jsx)(W.TR,{children:"Safe mode enabled.\xa0"}),(0,s.jsx)("span",{className:"dn di-ns",children:"Use this code-only view to fix issues that might crash or hang the normal editor."})]})})};var el=n(74548),ea=n(28123),ec=n(94006);let ed=e=>{let{stuck:t,notebook:{spotlightParticipant:n,participants:r},dispatch:o,menuActionList:i}=e,l=r.findIndex(e=>e.id===n);if(l<0)return null;let a=r[l];return(0,s.jsx)(W.jL,{bgColor:"bg-".concat((0,el.mQ)(l)),color:"white",stuck:t,menuActionList:i,exitLabel:"Stop spotlighting",onExit:()=>o({type:"spotlight",id:null}),children:(0,s.jsxs)("div",{className:"flex justify-between w-100",children:[(0,s.jsxs)(W.y,{icon:ea.Z,children:[(0,s.jsx)(W.TR,{children:"Spotlighting\xa0"}),(0,s.jsx)(W.EX,{children:(0,N.KY)(a)})]}),(0,s.jsx)("div",{className:"flex items-center",children:t&&(0,s.jsx)(ec.l,{size:24,participants:[a]})})]})})};var eu=n(49803);let em=(0,d.memo)(function(e){let{suggestionFrom:t}=e;return(0,s.jsxs)(W.y,{icon:O.Z,children:[(0,s.jsxs)(W.TR,{className:"truncate",children:[(0,A.RX)(t.closer),"\xa0"]}),(0,s.jsx)(W.EX,{children:"closed this suggestion to\xa0"}),(0,s.jsxs)(W.TR,{className:"truncate",children:[(0,N.Ui)(t.to_title),"\xa0"]}),(0,s.jsxs)(W.EX,{suppressHydrationWarning:!0,children:["on ",(0,eu.LN)(t.close_time),"."]})]})}),eh=e=>{let{dispatch:t,notebook:n,stuck:r,menuActionList:o}=e;return(0,s.jsx)(W.jL,{bgColor:"bg-near-white",color:"black",stuck:r,menuActionList:o,onExit:()=>t({type:"acknowledgeSuggestionClosed"}),exitLabel:"Dismiss this banner",children:(0,s.jsx)(em,{suggestionFrom:n.suggestionFrom})})};var ep=n(69588);let ef=(0,d.memo)(function(e){let{suggestionFrom:t}=e;return(0,s.jsxs)(W.y,{icon:ep.Z,children:[(0,s.jsxs)(W.TR,{className:"truncate",children:[(0,A.RX)(t.closer),"\xa0"]}),(0,s.jsx)(W.EX,{children:"merged this into\xa0"}),(0,s.jsxs)(W.TR,{className:"truncate",children:[(0,N.Ui)(t.to_title),"\xa0"]}),(0,s.jsxs)(W.EX,{suppressHydrationWarning:!0,children:["on ",(0,eu.LN)(t.close_time),"."]})]})}),ex=e=>{let{dispatch:t,notebook:n,stuck:r,menuActionList:o}=e;return(0,s.jsx)(W.jL,{bgColor:"bg-near-white",color:"black",stuck:r,menuActionList:o,onExit:()=>t({type:"acknowledgeSuggestionClosed"}),exitLabel:"Dismiss this banner",children:(0,s.jsx)(ef,{suggestionFrom:n.suggestionFrom})})};var eg=n(56249),ej=n(88815);let eb=d.memo(function(e){let{id:t,owner:n,suggestionFrom:r,isClosingSuggestion:o,dispatch:i}=e;return(0,s.jsxs)("div",{className:"flex items-center flex-wrap w-100 justify-end",children:[(0,s.jsxs)(W.y,{icon:ej.v,children:[(0,s.jsx)(W.EX,{children:"Suggestion sent to\xa0"}),(0,s.jsxs)(W.TR,{className:"truncate",children:[(0,s.jsxs)(J.Z,{href:(0,C.Bi)({slug:null,id:r.to_id,owner:r.to_owner}),children:[(0,N.Ui)(r.to_title),r.description&&":"]}),"\xa0"]}),r.description&&(0,s.jsxs)(W.EX,{title:r.description,children:["“",r.description,"” \xa0"]})]}),(0,s.jsxs)("div",{className:"flex items-center flex-wrap justify-end",children:[(0,s.jsx)(W.N_,{icon:eg.Z,onClick:()=>i({type:"loadCompare",base:{id:r.to_id,owner:r.to_owner},target:{id:t,owner:n},trigger:"click",source:"notebookContextMenu",loadType:"fork"}),children:"Compare"}),(0,s.jsx)(W.N_,{disabled:o,icon:O.Z,primary:!0,onClick:()=>{i({type:"showModal",modal:"closeSuggestion",modalProps:{trigger:"click",source:"compareBanner"}})},children:"Close"})]})]})}),ey=e=>{let{dispatch:t,notebook:n,stuck:r,menuActionList:o}=e;return(0,s.jsx)(W.jL,{bgColor:"bg-near-white",color:"black",stuck:r,menuActionList:o,onExit:()=>t({type:"dismissSuggestionOpenBanner"}),exitLabel:"Dismiss this banner for the remainder of this session",children:(0,s.jsx)(eb,{id:n.id,owner:n.owner,suggestionFrom:n.suggestionFrom,isClosingSuggestion:n.isClosingSuggestion,dispatch:t})})};var ev=n(94184),ew=n.n(ev),ek=n(77978),eN=n(89268),eS=n(67534);let eC=e=>{let{dispatch:t,currentUser:n,notebook:r,stuck:o,menuActionList:i}=e,l=(0,v.GS)(v.ro);return(0,s.jsx)(W.jL,{bgColor:"bg--observable-light-green",stuck:o,menuActionList:i,children:(0,s.jsxs)("div",{className:"flex items-center flex-wrap w-100 justify-end",children:[(!l||n)&&(0,s.jsxs)(W.y,{icon:ek.Z,children:[(0,s.jsx)(W.TR,{children:(0,s.jsx)(J.Z,{href:"/templates",className:"no-underline",children:"Templates\xa0/\xa0"})}),(0,s.jsx)(W.EX,{className:"fw4 white-80",children:(0,N.Ui)(r.model)})]}),(0,U.rk)(n,r)&&(0,eS.YW)(r)&&(0,s.jsx)(W.N_,{disabled:r.isForking,primary:!0,icon:n?eN.Z:void 0,className:ew()(l&&!n?"flex-auto tc":""),onClick:()=>t({type:"forkRequested",trigger:"click",source:"templateBanner"}),children:n?"Fork to get started":"Sign up to use template"})]})})};var e_=n(45482),eF=n(97542),eZ=n(97805);let eT=(0,d.memo)(function(e){let{dispatch:t,notebook:n,currentUser:r}=e,o=(0,G.useRouter)(),i=(0,U.rk)(r,n),l=(0,v.GS)(v.ro),a=(0,v.GS)(v.hs);return(0,s.jsxs)("div",{className:"flex items-center flex-wrap w-100 justify-end",children:[(!l||r)&&(0,s.jsxs)(W.y,{icon:eF.Z,children:[(0,s.jsx)(W.TR,{children:"You’re making temporary edits\xa0\xa0"}),i&&(0,s.jsx)(W.EX,{children:r?"Fork to save your changes":a?(0,s.jsx)("div",{children:"You can make any changes you want, but you'll need to sign in to save your work!"}):(0,s.jsx)("span",{children:"\xa0"})})]}),(0,s.jsxs)("div",{className:ew()("flex flex-row justify-end flex-auto",l&&r&&"mb2"),children:[(0,s.jsx)(W.N_,{className:ew()(l&&!r&&"w-50"),icon:r?eZ.Z:void 0,onClick:()=>{n.saveVersion<n.initialLatestVersion?t({type:"loadVersion",version:n.saveVersion,autosave:!0}):o.replace(o.asPath)},children:r?"Discard":"Reset"}),i&&(0,s.jsx)(W.N_,{icon:r?eN.Z:void 0,primary:!0,disabled:n.isForking,className:ew()(l&&!r&&"w-50",r&&"ml3"),onClick:()=>t({type:"forkRequested",source:"tinkerBanner",trigger:"click"}),children:r?(0,e_.tJ)(n,r):"Sign up to save"})]})]})}),eE=e=>{let{dispatch:t,notebook:n,stuck:r,menuActionList:o,currentUser:i}=e;return(0,s.jsx)(W.jL,{bgColor:"bg-observable-goldenrod",color:"near-black",stuck:r,menuActionList:o,children:(0,s.jsx)(eT,{dispatch:t,notebook:n,currentUser:i})})};var eL=n(44752);let eR=e=>{let{dispatch:t,notebook:n,stuck:r,menuActionList:o}=e,i=(0,Q.tK)(n)?"latest version":"version ".concat(n.saveVersion);return(0,s.jsx)(W.jL,{bgColor:"bg-blue",onExit:()=>t({type:"exitVersionedMode"}),exitLabel:"Exit versioned mode",stuck:r,menuActionList:o,children:(0,s.jsxs)("div",{className:"flex items-center flex-wrap w-100 justify-end",children:[(0,s.jsxs)(W.y,{icon:eL.Z,children:[(0,s.jsxs)(W.TR,{children:["Showing ".concat(i),".\xa0"]})," ",(0,s.jsx)(W.EX,{children:"Changes will not be saved."})]}),(0,U.i3)(n)&&(0,eS.g)(n)&&(0,s.jsx)(W.N_,{icon:eZ.Z,primary:!0,onClick:()=>t({type:"revertRequested",version:n.saveVersion,remote:!1}),children:"Restore version ".concat(n.saveVersion," of ").concat(n.initialLatestVersion)})]})})};var eP=n(13659);let eq=e=>{let{notebook:t,dispatch:n}=e;return(0,U.mG)(t)?{onSelect:()=>n({type:"showModal",modal:"authors"}),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eP.Z,{className:"mr2 h1 w1"}),"Set authors…"]})}:null};var eM=n(20265);let eO=e=>{let{notebook:t,dispatch:n}=e;return(0,eS.YE)(t)?{onSelect:()=>n({type:"loadCompare",base:{id:t.forkOf.id,owner:t.forkOf.owner},target:{id:t.id,owner:t.owner},trigger:"click",source:"notebookContextMenu",loadType:"fork"}),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eg.Z,{className:"mr2 h1 w1"}),"Compare fork"]})}:null},eU=e=>{let{notebook:t,dispatch:n}=e;return(0,eS.kh)(t)?{onSelect:e=>n({type:"loadCompare",base:{id:t.id,version:t.saveVersion,owner:t.owner},target:{id:t.id,owner:t.owner},trigger:"click",source:"notebookHeaderPromotedAction"===e?"notebookHeaderPromotedAction":"notebookContextMenu",loadType:"latest"}),disabled:(0,Q.tK)(t),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eg.Z,{className:"mr2 h1 w1"}),"Compare latest"]})}:null},eA=e=>{let{notebook:t,dispatch:n}=e;return(0,eS.yj)(t)?{onSelect:()=>n({type:"loadCompare",base:{id:t.id,version:t.publishVersion,owner:t.owner},target:{id:t.id,version:t.saveVersion,owner:t.owner},trigger:"click",source:"notebookContextMenu",loadType:"published"}),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eg.Z,{className:"mr2 h1 w1"}),"Compare published"]})}:null};var eD=n(97543);let eV=e=>{let{notebook:t,dispatch:n}=e,{id:r,slug:o,owner:i,saveVersion:l}=t;return{as:"a",href:"".concat("https://api.observablehq.com").concat((0,C.UW)({id:r,slug:o,owner:i}),"@").concat(l,".tgz?v=3"),className:"flex items-center no-underline",onClick:(0,U.pT)(t)?e=>{e.preventDefault(),n({type:"downloadCode",trigger:"click",source:"notebookContextMenu"})}:void 0,children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eD.Z,{className:"mr2 h1 w1"})," Download code"]})}};var ez=n(19703);let eI=e=>{let{dispatch:t}=e;return{onSelect:()=>{t({type:"showModal",modal:"embed",modalProps:{},source:"notebookContextMenu"})},children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ez.Z,{className:"mr2 h1 w1"}),"Embed cells"]})}};var eH=n(43538),e$=n(92790);let eY=e=>{let{notebook:t,dispatch:n}=e;return(0,U.GL)(t)?{onSelect:()=>n({type:"showModal",modal:"license"}),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e$.Z,{className:"mr2 h1 w1"}),"Set license…"]})}:null};var eB=n(67125),eX=e=>{let{title:t,...n}=e;return(0,s.jsx)("svg",{width:"16",height:"16",fill:"none",...n,children:(0,s.jsxs)("g",{transform:"translate(3, 2)",children:[t&&(0,s.jsx)("title",{children:t}),(0,s.jsx)("rect",{x:"0",y:"5",width:"10",height:"7",rx:"2",fill:"currentColor"}),(0,s.jsx)("path",{d:"M3.5 6.5V4c0-4-6-4-6 0v1.5",stroke:"currentColor",strokeWidth:"2"})]})})};let eG=e=>{var t;let{notebook:n,dispatch:r}=e;if(!(0,eS.H7)(n)||!(0,eS.GT)(n)||!(0,U.PG)(n))return null;let o=null===(t=n.commentingLock)||void 0===t?void 0:t.user_locked;return{onSelect:()=>{r({type:"updateCommentingLock",locked:!o})},children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eX,{className:"mr2 h1 w1"})," Unlock comments"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eB.Z,{className:"mr2 h1 w1"})," Lock comments"]})}};var eW=n(18650),eK=e=>(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:"2",...e,children:[(0,s.jsx)("rect",{x:"10",y:"2",width:"4",height:"12",rx:"1"}),(0,s.jsx)("path",{d:"M3.6585 13.5488L9.13991 8.75258C9.59524 8.35417 9.59524 7.64584 9.13991 7.24742L3.6585 2.45119C3.01192 1.88543 2 2.34461 2 3.20377V12.7962C2 13.6554 3.01192 14.1146 3.6585 13.5488Z"})]}),eJ=n(25192),eQ=n(41978);let e0=e=>{let{dispatch:t,notebook:n}=e;if(!(0,Q.fN)(n)||!(0,U.mG)(n)||(0,Q.os)(n)||!n.autosave)return null;let r=(0,Q.z4)(n);return{children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eQ.Z,{className:"mr2 h1 w1"}),"Resume live editing"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eJ.Z,{className:"mr2 h1 w1"}),"Pause live editing"]}),onSelect:()=>r?t({type:"resumeLiveEdits"}):t({type:"pauseLiveEdits"})}},e1=e=>{let{dispatch:t,notebook:n}=e,r=(0,Q.XO)(n);return r?{children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eK,{className:"mr2 h1 w1"}),"Republish",(0,s.jsx)("span",{className:"ml1 fw4",children:(0,Q.YY)(r,"edit")})]}),onSelect:()=>t({type:"pauseLiveEdits"}),tooltip:"Update the paused version to the latest version"}:null};var e2=n(52067);let e5=e=>{let{notebook:t,dispatch:n}=e,{saveVersion:r,autosave:o}=t;return!(0,U.i3)(t)||o?null:{onSelect:()=>n({type:"revertRequested",version:r,remote:!1}),disabled:!(0,eS.g)(t),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eZ.Z,{className:"mr2 h1 w1"}),"Revert to v",r]})}};var e3=n(30096),e9=n(38613);let e4=e=>{let{dispatch:t,notebook:n,page:r}=e;return(0,U.F3)(n)?{disabled:!n.autosave,onSelect:()=>t({type:"togglePane",pane:"aiassist"}),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e9.P,{className:"mr2 h1 w1"}),(null==r?void 0:r.pane)==="aiassist"?"Hide AI assist":"Show AI assist"]})}:null};var e8=n(90911),e6=n(87081);let e7=e=>{let{page:t,dispatch:n}=e;return{onSelect:()=>{n({type:"togglePane",pane:"dependencies"})},children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e6.Z,{className:"mr2 h1 w1"}),(null==t?void 0:t.pane)==="dependencies"?"Hide dependencies":"Show dependencies"]})}};var te=n(94118),tt=n(83347);let tn=e=>{let{dispatch:t,page:n}=e;return{onSelect:()=>{t({type:"togglePane",pane:"find"})},children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tt.Z,{className:"mr2 h1 w1"}),(null==n?void 0:n.pane)==="find"?"Hide find":"Show find"]})}};var ts=n(66002);let tr=e=>{let{notebook:t,page:n,dispatch:r}=e;return(0,U.pT)(t)?{onSelect:()=>{r({type:"togglePane",pane:"history"})},children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eL.Z,{className:"mr2 h1 w1"}),(null==n?void 0:n.pane)==="history"?"Hide history":"Show history"]})}:null};var to=n(24321);let ti=e=>{let{page:t,dispatch:n}=e;return{onSelect:()=>{n({type:"togglePane",pane:"minimap"})},children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(to.Z,{className:"mr2 h1 w1"}),(null==t?void 0:t.pane)==="minimap"?"Hide minimap":"Show minimap"]})}},tl=e=>{let{dispatch:t,notebook:n,page:r,currentUser:o}=e;return(0,U.eD)(o,n)?{disabled:!n.autosave,onSelect:()=>t({type:"togglePane",pane:"schedule"}),children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(H.Z,{className:"mr2 h1 w1"}),(null==r?void 0:r.pane)==="schedule"?"Hide schedule":"Show schedule"]})}:null};var ta=n(69189),tc=n(58058),td=n(25332);let tu=e=>{let{dispatch:t,notebook:n}=e;return!(0,U.mG)(n)||(0,Q.os)(n)?null:{onSelect:()=>n.autosave?t({type:"disableAutosave"}):t({type:"loadVersion",version:n.saveVersion,autosave:!0}),children:n.autosave?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eF.Z,{className:"mr2 h1 w1"}),"Tinker"]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eZ.Z,{className:"mr2 h1 w1"}),"Discard"]})}};var tm=n(62290),th=n(77539),tp=n(6096);let tf=(0,_.$j)(e=>{let{notebook:t,page:n,currentUser:s}=e;return{notebook:t,page:n,currentUser:s}},e=>({dispatch:e}))(e=>{let t,{notebook:n,page:r,currentUser:o,dispatch:i}=e,l=(0,G.useRouter)();n.spotlightParticipant?t=ed:n.safe?t=ei:(!(0,U.mG)(n)||!n.autosave)&&(0,Q.oI)(n)?t=eE:(0,Q.mN)(n)?t=eR:(0,Q.os)(n)&&!n.isPausedLoad?t=er:((0,Q.s9)(n)||(0,Q.cg)(n))&&(0,U._l)(n)&&(0,Q.ly)(n)&&!(0,Q.dI)(n)?t=ee:(0,Q.Or)(n)&&(0,U.sm)(n.suggestionFrom)&&!r.suggestionOpenBannerDismissed?t=ey:(0,Q.to)(n)?t=eh:(0,Q.Y8)(n)?t=ex:("fork"===l.query.intent||(0,Q.zC)(n))&&(t=eC);let a={notebook:n,currentUser:o,dispatch:i,page:r},c={suggest:(0,td.P)(a),revertToVersion:e5(a),compareToPublished:eA(a),compareToFork:eO(a),compareToLatest:eU(a),divider_0:null,Share:(0,e2.Y)(a),Fork:(0,e_.AH)(a),divider_1:null,like:(0,tc.OH)(a),collections:(0,eM.b)(a),pauseResume:e0(a),divider_2:null,View:{showFiles:(0,te.m)(a),showDatabases:(0,e8.e)(a),showHistory:tr(a),showMinimap:ti(a),showDependencies:e7(a),showFind:tn(a),showAIAssist:e4(a),showSchedules:tl(a),showHelp:(0,ts.S)(a),divider_0:null,fullscreen:(0,eH.$)(a),safeMode:(0,e3.A)(a),tinkerMode:tu(a)},Export:{embed:eI(a),downloadCode:eV(a)},Settings:{slug:(0,ta.t)(a),license:eY(a),authors:eq(a),divider_0:null,lockComments:eG(a),notifications:(0,eW.A)(a),divider_1:null,transfer:(0,tm.M)(a)},divider_3:null,Delete:(0,th.q)(a,{relocate:!1,showToast:!1})},d={compareToLatest:eU,like:tc.Lr,fork:e_.AH,forkIcon:e_.iE,pauseResume:e1,publishShare:e2.Y,publishShareIcon:e2.i};return(0,s.jsx)(tp.n,{SelectedBanner:t,menuActionList:c,promotedActions:function(e,t,n){let s=[],r=(0,Q.wd)(t);return(0,U.mG)(t)&&t.autosave?((0,Q.XO)(t)?(s.push({name:"pauseResume",highlight:!0}),s.push({name:"publishShareIcon"})):s.push({name:"publishShare"}),s.push({name:"forkIcon"})):(0,U.rk)(e,t)&&n!==eC?s.push({name:"fork",highlight:r}):(0,eS.kh)(t)&&s.push({name:"compareToLatest",highlight:!1}),(0,eS.ws)(t)&&s.push({name:"like",highlight:!1}),s}(o,n,t),promotableActions:d,notebook:n,currentUser:o,dispatch:i})});var tx=n(45807),tg=n(119),tj=n(26614),tb=n(95359),ty=n(26680),tv=n(24048),tw=n(70157),tk=n(13632);n(45204);var tN=n(88027),tS=n(98532),tC=n(25336);let t_=l()(()=>n.e(5494).then(n.bind(n,65494)),{loadableGenerated:{webpack:()=>[65494]}}),tF=e=>{let t=(0,tC.M)(tS.f,e),n=(0,tb.w)(t);return(0,ty.D)(t),(0,s.jsx)(_.zt,{store:t,children:(0,s.jsx)(tL,{editors:n})})};var tZ=e=>(0,s.jsx)(tF,{...e},(0,tk.Z)(e));let tT=()=>!0,tE=()=>!1,tL=(0,_.$j)(e=>{let{notebook:t,decorations:n,page:s,currentUser:r}=e;return{notebook:t,decorations:n,page:s,currentUser:r}},e=>({dispatch:e}))(e=>{let{notebook:t,currentUser:n,decorations:r,editors:i,dispatch:l,page:a}=e,u=function(e){let{saveVersion:t,safe:n,pausedVersion:s,initialSpecifier:r,isPausedLoad:o,autosave:i}=e,l=[(0,C.UW)(e)];return(0,Q.tK)(e)&&i||o?(null==r?void 0:r.versionAlias)&&s&&l.push("@".concat(r.versionAlias)):l.push("@".concat(t)),n&&l.push("/safe"),l.join("")}(t),m=function(e,t){if("undefined"==typeof location)return"";let n=location.search,s=t.collectionsSidebarOpen&&e.initialCollection?function(e){let{owner:t,slug:n}=e;return"@".concat(t.login,"/").concat(n)}(e.initialCollection):null;if(n===(s?"?collection=".concat(s):""))return n;let r=new URLSearchParams(n);return r.get("collection")!==s&&(r.delete("collection"),(n="".concat(r))&&(n="?".concat(n)),s&&(n="".concat(n?"".concat(n,"&"):"?","collection=").concat(s))),n}(t,a),{owner:h,model:p,isFullscreen:f,safe:x,autosave:g,spotlightParticipant:j,isPausedLoad:b}=t,[y]=(0,d.useState)(()=>t.trashed);return(0,tj.D)(t,n,i,l),(0,tv.f)(t.editorStates,t.searchTerm,l),(0,d.useEffect)(()=>{if(location.pathname!==u||location.search!==m){let e="".concat(u).concat(m).concat(location.hash);history.replaceState({...history.state,as:e,url:e},"",e)}}),(0,d.useEffect)(()=>{a.collectionsSidebarOpen&&t.initialCollection&&!window.matchMedia(v.hs).matches&&l({type:"toggleCollectionsSidebar"}),(0,w.MR)((0,w.ym)({type:"notebook:view:view",data:{numCells:t.model.nodes.length},eventVersion:4,notebook:t,currentUser:n}))},[]),(0,d.useEffect)(()=>{j?document.documentElement.classList.add("following"):document.documentElement.classList.remove("following")},[j]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tg.Z,{content:"".concat(x?"Safe Mode:":g||b?"":"History:"," ").concat((0,N.Ui)(p)," / ").concat((0,N.KY)(h))}),(0,s.jsxs)(c(),{children:[(0,s.jsx)("link",{rel:"canonical",href:"".concat("https://observablehq.com").concat(u),className:"jsx-89ba54f59fad5733"}),(0,s.jsx)("link",{rel:"alternate",type:"application/rss+xml",title:(0,tw.q)((0,N.KY)(h)),href:"".concat("https://api.observablehq.com").concat("individual"===h.type?"/user/@".concat(h.login,"/documents.rss"):"/documents/@".concat(h.login,".rss")),className:"jsx-89ba54f59fad5733"}),t.collections.filter(e=>"public"===e.type).map(e=>(0,s.jsx)("link",{rel:"alternate",type:"application/rss+xml",title:(0,tw.q)("".concat((0,N.Ui)(e)," / ").concat((0,N.KY)(e.owner))),href:"".concat("https://api.observablehq.com","/collection/@").concat(e.owner.login,"/").concat(e.slug,".rss"),className:"jsx-89ba54f59fad5733"},"@".concat(e.owner.login,"/").concat(e.slug))),(0,s.jsx)(P.bd,{notebook:t})]}),(0,s.jsx)(R.Z,{navArea:t.owner.id===(null==n?void 0:n.settings.current_workspace)?"notebooks":void 0}),(0,s.jsx)(V.b,{}),(0,Q.dI)(t)&&(0,s.jsx)(D,{currentUser:n,notebook:t,moved:t.trashed!==y,dispatch:l}),(0,Q.oi)(t)&&(0,s.jsx)($,{notebook:t,dispatch:l}),(0,s.jsx)(tf,{}),(0,s.jsx)(tx.P,{}),a.collectionsSidebarOpen?(0,s.jsx)(T,{}):null,(0,s.jsxs)(X.Z,{children:[(0,s.jsx)(L.i,{isFullscreen:f,style:{minHeight:"calc(100vh - 34rem)"},dispatch:l,children:(0,s.jsx)(B.a,{notebook:t,dispatch:l,editors:i,currentUser:n,disablePointerEvents:"none"!==r.modal,editorComponent:Y.i,isNodeCommentable:(0,eS.H7)(t)?tT:tE,isCollectionsSidebarOpen:a.collectionsSidebarOpen})}),(0,s.jsx)(q.F1,{})]}),!n&&(0,s.jsx)(t_,{}),(0,s.jsx)(E.Z,{empty:(0,Q.ws)(t)||(0,U.mG)(t)}),(0,s.jsx)(o(),{id:"89ba54f59fad5733",children:".following{scroll-behavior:smooth}"})]})});var tR=n(51091),tP=n(31824),tq=n(2669),tM=n(21146),tO=n(88609),tU=n(55184),tA=n(87095);let tD=(0,tU.$j)(e=>{let{decorations:t,currentUser:n}=e;return{decorations:t,currentUser:n}},null)(e=>{let{forks:t,parentNotebook:n}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tg.Z,{content:"Forks of ‘".concat((0,C.$h)(n),"’")}),(0,s.jsx)(R.Z,{}),(0,s.jsxs)(tR.Z,{children:[(0,s.jsx)(tP.j,{}),(0,s.jsx)(q.F1,{}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"mv4 f2 fw7 gray",children:["Forks of"," ",(0,s.jsx)(m(),{href:(0,C.Bi)(n),className:"no-underline black hover-blue",children:(0,C.$h)(n)})]}),(0,s.jsx)("div",{children:(0,s.jsx)(tq.a,{emptyMessage:"This notebook has no forks",response:t,items:"forks",children:(e,t)=>(0,s.jsx)(tO.pg,{format:t,notebook:e})})})]})]})]})}),tV=e=>{let t=(0,tC.M)(tA.f,e);return(0,s.jsx)(tU.zt,{store:t,children:(0,s.jsx)(tD,{parentNotebook:e.initialParentNotebook,forks:(0,tM.x)(e.forks)})})},tz=(0,tU.$j)(e=>{let{decorations:t,currentUser:n}=e;return{decorations:t,currentUser:n}},null)(e=>{let{importers:t,parentNotebook:n}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tg.Z,{content:"Importers of ‘".concat((0,C.$h)(n),"’")}),(0,s.jsx)(R.Z,{}),(0,s.jsxs)(tR.Z,{children:[(0,s.jsx)(tP.j,{}),(0,s.jsx)(q.F1,{}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"mv4 f2 fw7 gray",children:["Importers of"," ",(0,s.jsx)(m(),{href:(0,C.Bi)(n),className:"no-underline black hover-blue",children:(0,C.$h)(n)})]}),(0,s.jsx)("div",{children:(0,s.jsx)(tq.a,{emptyMessage:"This notebook has no importers",response:t,items:"importers",children:(e,t)=>(0,s.jsx)(tO.pg,{format:t,notebook:e})})})]})]})]})}),tI=e=>{let t=(0,tC.M)(tA.f,e);return(0,s.jsx)(tU.zt,{store:t,children:(0,s.jsx)(tz,{parentNotebook:e.initialParentNotebook,importers:(0,tM.x)(e.importers)})})};var tH=n(92227),t$=n(30372),tY=n(24515),tB=n(67832),tX=n(82173),tG=n(48261),tW=n(71902);function tK(e){if(!e)return"–";let t=e/1e3,n=~~(t/60);return"".concat(n?"".concat(n," minute").concat(1===n?"":"s"," "):"").concat((t%60).toFixed(3)," seconds")}let tJ=e=>{let{runs:t,initialParentNotebook:n}=e,{results:r}=t;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tg.Z,{content:"Scheduled runs of ‘".concat((0,C.$h)(n),"’")}),(0,s.jsx)(R.Z,{}),(0,s.jsxs)(tR.Z,{children:[(0,s.jsx)(tX.Z,{}),(0,s.jsx)(t$.Tg,{className:"pt3",breadcrumbs:[{name:(0,C.$h)(n),href:(0,C.Bi)(n)},{name:"Scheduled runs"}]}),(0,s.jsxs)("div",{className:o().dynamic([["d649b1d599157cc8",[v.pp]]])+" pb6",children:[(0,s.jsx)("h2",{className:o().dynamic([["d649b1d599157cc8",[v.pp]]])+" f2 fw7",children:"Scheduled runs"}),(0,s.jsx)(tB.t,{response:t,itemName:"runs",headingSeparator:!1,children:r.length?(0,s.jsxs)("div",{className:o().dynamic([["d649b1d599157cc8",[v.pp]]])+" f7 bg-white ba b--silver br2",children:[(0,s.jsx)("div",{className:o().dynamic([["d649b1d599157cc8",[v.pp]]])+" row",children:["Run","Duration","Version","Result"].map(e=>(0,s.jsx)("div",{className:o().dynamic([["d649b1d599157cc8",[v.pp]]])+" "+(ew()("ph3 pv2 f7 fw6 ttu gray bg-near-white","Duration"===e?"dn db-ns":null,"Result"===e?"flex justify-center":null,"Version"===e?"flex justify-end":null)||""),children:e},e))}),r.map(e=>{let t=ew()("pa3 f6 fw5 mid-gray bt b--silver lh-f6 pointer","error"===e.state&&"red"),r=e.end_time&&e.start_time?+e.end_time-+e.start_time:null;return(0,s.jsx)("a",{href:(0,C.Bi)(n,void 0,void 0,"runs/".concat(e.id)),className:o().dynamic([["d649b1d599157cc8",[v.pp]]])+" no-underline",children:(0,s.jsxs)("div",{className:o().dynamic([["d649b1d599157cc8",[v.pp]]])+" row hover-bg-near-white",children:[(0,s.jsx)("div",{className:o().dynamic([["d649b1d599157cc8",[v.pp]]])+" "+(t||""),children:(0,s.jsx)(tG.Zr,{startTime:e.start_time,endTime:e.end_time,state:e.state})}),(0,s.jsx)("div",{style:{fontVariantNumeric:"tabular-nums"},className:o().dynamic([["d649b1d599157cc8",[v.pp]]])+" "+(ew()(t,"dn db-ns")||""),children:tK(r)}),(0,s.jsx)("div",{className:o().dynamic([["d649b1d599157cc8",[v.pp]]])+" "+(ew()(t,"flex justify-end")||""),children:"v".concat(e.document_version)}),(0,s.jsx)("div",{className:o().dynamic([["d649b1d599157cc8",[v.pp]]])+" "+(ew()(t,"flex justify-center")||""),children:(0,s.jsx)(tG.VO,{state:e.state})})]})},e.id)})]}):(0,s.jsx)(tY.u,{children:"This notebook has no previously scheduled runs."})})]})]}),(0,s.jsx)(o(),{id:"d649b1d599157cc8",dynamic:[v.pp],children:".row.__jsx-style-dynamic-selector{display:grid;grid-template-columns:repeat(3,1fr)}@media ".concat(v.pp,"{.row.__jsx-style-dynamic-selector{grid-template-columns:6fr 2fr 1fr 1fr}}")})]})},tQ=e=>{let t=(0,tC.M)(tA.f,e);return(0,s.jsx)(tU.zt,{store:t,children:(0,s.jsx)(tJ,{...e})})},t0=["success","error","skipped"],t1=e=>{var t;let{logs:n,run:r,initialParentNotebook:i}=e,l=r.start_time&&r.end_time?+r.end_time-+r.start_time:void 0,a=null!==(t=r.queue_time)&&void 0!==t?t:r.start_time;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tg.Z,{content:"Scheduled run logs of ‘".concat((0,C.$h)(i),"’")}),(0,s.jsx)(R.Z,{}),(0,s.jsxs)(tR.Z,{children:[(0,s.jsx)(tX.Z,{}),(0,s.jsx)(t$.Tg,{className:"pt3",breadcrumbs:[{name:(0,C.$h)(i),href:(0,C.Bi)(i)},{name:"Scheduled runs",href:(0,C.Bi)(i,void 0,void 0,"runs")},{name:"Run"}]}),(0,s.jsxs)("div",{className:o().dynamic([["7d2302dfa3065700",[v.pp]]])+" pb6",children:[(0,s.jsxs)("h2",{className:o().dynamic([["7d2302dfa3065700",[v.pp]]])+" f2 fw7",children:["Run at ",r.start_time?(0,tH.Z)(r.start_time):"–"]}),(0,s.jsxs)("div",{className:o().dynamic([["7d2302dfa3065700",[v.pp]]])+" mt3 code logs lh-f6",children:[(0,s.jsx)("div",{className:o().dynamic([["7d2302dfa3065700",[v.pp]]])+" mid-gray nowrap",children:a?(0,tH.Z)(a).split("T")[1]:null}),(0,s.jsx)("div",{style:{overflowWrap:"anywhere"},className:o().dynamic([["7d2302dfa3065700",[v.pp]]])+" dark-gray",children:"Queued"}),l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:o().dynamic([["7d2302dfa3065700",[v.pp]]])}),(0,s.jsxs)("div",{className:o().dynamic([["7d2302dfa3065700",[v.pp]]])+" dark-gray fw6",children:["Run duration ",tK(l)]})]}),n.map(e=>{let{time:t,type:n,data:r}=e;return(0,s.jsxs)(d.Fragment,{children:[(0,s.jsx)("div",{className:o().dynamic([["7d2302dfa3065700",[v.pp]]])+" mid-gray nowrap",children:t?(0,tH.Z)(t).split("T")[1]:null}),(0,s.jsx)("div",{style:{overflowWrap:"anywhere"},className:o().dynamic([["7d2302dfa3065700",[v.pp]]])+" "+(ew()("pre-wrap","error"===n?"red":"dark-gray")||""),children:"start"===n?"Started":r})]},JSON.stringify(t))}),t0.includes(r.state)&&!r.end_time&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:o().dynamic([["7d2302dfa3065700",[v.pp]]])}),(0,s.jsx)("div",{className:o().dynamic([["7d2302dfa3065700",[v.pp]]])+" red",children:"Scheduler crashed"})]})]})]})]}),(0,s.jsx)(o(),{id:"7d2302dfa3065700",dynamic:[v.pp],children:".logs.__jsx-style-dynamic-selector div.__jsx-style-dynamic-selector:nth-child(even){margin-bottom:1em}@media ".concat(v.pp,"{.logs.__jsx-style-dynamic-selector{display:grid;grid-template-columns:-webkit-min-content 1fr;grid-template-columns:min-content 1fr;row-gap:var(--spacing-medium);-webkit-column-gap:var(--spacing-large);-moz-column-gap:var(--spacing-large);column-gap:var(--spacing-large)}.logs.__jsx-style-dynamic-selector div.__jsx-style-dynamic-selector:nth-child(even){margin-bottom:0}}")})]})},t2=e=>{let t=(0,tC.M)(tA.f,e);return(0,s.jsx)(tU.zt,{store:t,children:(0,s.jsx)(t1,{...e})})};var t5=n(90924),t3=!0,t9=(0,t5.Z)(e=>"initialNotebook"in e?(0,s.jsx)(tZ,{...e}):"forks"in e?(0,s.jsx)(tV,{...e}):"importers"in e?(0,s.jsx)(tI,{...e}):"runs"in e?(0,s.jsx)(tQ,{...e}):"logs"in e?(0,s.jsx)(t2,{...e}):null);function t4(e,t,n){let{at:s,specifiers:r}=e,o="d"===s||(r.unshift(s),!1),i={allowId:o,allowSlug:!o,allowTilde:!0},l=null;if((null==n?void 0:n.includes(r[r.length-2]))&&(l=tN.Z.parse(r.slice(0,-2).join("/"),i))){var a;let e=r.pop();return[null!==(a=r.pop())&&void 0!==a?a:null,l,null!=e?e:null]}if(t.includes(r[r.length-1])&&(l=tN.Z.parse(r.slice(0,-1).join("/"),i)))return[r.pop(),l];if(!(l=tN.Z.parse(r.join("/"),i)))throw(0,tW.v6)();return[null,l]}},55478:function(e,t,n){"use strict";n.d(t,{R:function(){return j}});var s=n(11163),r=n.n(s),o=n(61802),i=n(46294),l=n(34978),a=n(68098);function c(){r().replace(r().asPath)}let d=async(e,t,n)=>{let{context:s,currentUser:o}=e,{collection:{type:a,title:c,description:d}}=t,u=s.context;n({type:"showProcessingToast",key:"createCollection",message:"Creating collection…"});try{let e=await (0,l.BL)(c,a,u||o,d);if(!e){n({type:"showErrorToast",key:"createCollection",message:"Oops, Creating collection failed. Try again?"});return}(0,i.MR)((0,i.y6)({type:"collection:manage:create",data:{trigger:"click",source:"createCollectionModal"},eventVersion:1,collection:e,currentUser:o})),n({type:"showSuccessToast",key:"createCollection",message:"Collection created."}),r().push((0,l.WG)(e))}catch(e){n({type:"showErrorToast",key:"createCollection",message:"Oops, Creating collection failed. Try again?"})}},u=async(e,t,n)=>{let{collection:s,oldTitle:r}=t;n({type:"showProcessingToast",key:"editCollection",message:'Editing collection "'.concat(r,'"…')});try{let{id:e,title:t,description:i,type:l,ordered:a}=s;await (0,o.Fv)("/collection/".concat(e,"/edit"),{title:t,description:i,type:l,ordered:a}),n({type:"showSuccessToast",key:"editCollection",message:'Collection "'.concat(r,'" edited.')}),c()}catch(e){n({type:"showErrorToast",key:"editCollection",message:'Oops, Editing collection "'.concat(r,'" failed. Try again?')})}},m=async(e,t,n)=>{let{collection:s}=t,{id:i}=s;n({type:"showProcessingToast",key:"deleteCollection",message:"Deleting collection…"});try{await (0,o.Fv)("/collection/".concat(i,"/delete")),n({type:"showSuccessToast",key:"deleteCollection",message:"Collection deleted successfully!."}),r().replace((0,a.$2)(s.owner))}catch(e){n({type:"showErrorToast",key:"deleteCollection",message:"Oops, deleting collection failed. Try again?"})}},h=async(e,t,n)=>{let{collection:s,thumbnail:r}=t,{title:i,id:l}=s;n({type:"showProcessingToast",key:"setCollectionThumbnail",message:"Setting thumbnail for ".concat(i,"…")});try{await (0,o.Fv)("/collection/".concat(l,"/thumbnail"),{thumbnail:r||null}),n({type:"showSuccessToast",key:"setCollectionThumbnail",message:'Collection "'.concat(i,'" thumbnail set.')}),c()}catch(e){n({type:"showErrorToast",key:"setCollectionThumbnail",message:"Oops, setting thumbnail failed. Try again?"})}},p=async(e,t,n)=>{let{currentUser:s}=e,{addTo:r,removeFrom:l,onDismiss:a,collectionId:d}=t,u=await (0,o.Fv)("/collection/bulk",{actions:[...r.map(e=>({type:"add",collection_id:e.id,collection_listing_id:d})),...l.map(e=>({type:"remove",collection_id:e.id,collection_listing_id:d}))]}),m=Object.fromEntries([...r,...l].map(e=>[e.id,e])),h=!1;for(let e of u)e.ok?"add"===e.type?(0,i.MR)((0,i.y6)({type:"collection:manage:addCollectionListing",data:{addedListingId:d},collection:m[e.collection_id],currentUser:s,eventVersion:1})):(0,i.MR)((0,i.y6)({type:"collection:manage:removeCollectionListing",data:{removedListingId:d},collection:m[e.collection_id],currentUser:s,eventVersion:1})):h=!0;h&&n({type:"showErrorToast",message:"Oops, collections update failed. Try again?",key:"collections"}),c(),a()};var f=n(21443);let x=async(e,t,n)=>{let{notebook:s,currentUser:r}=e;if(s.isForking)return;let o=await (0,f.Fe)(r,s,t,n);o?(n({type:"showSuccessToast",message:"Notebook forked to ".concat(o.owner.login),key:"fork"}),n({type:"forkSucceeded",id:o.id})):n({type:"forkFailed"})};var g=n(97590);let j={forkRequested:x,createCollection:d,editCollection:u,deleteCollection:m,setCollectionThumbnail:h,updateCollectionInCollections:p,updateProjectShareSettings:n(83394).x,deleteProject:g.Y}},31844:function(e,t,n){"use strict";n.d(t,{L:function(){return s}});let s={selectNotebook:(e,t)=>{let{notebook:n}=t;return n}}},87095:function(e,t,n){"use strict";n.d(t,{f:function(){return l}});var s=n(55478),r=n(31844),o=n(68326),i=n(33631);let l=()=>({type:"dashboard",slices:{notebook:{initialState:{},reducers:{...i.x,...r.L}}},listeners:{...o.l,...s.R}})},98532:function(e,t,n){"use strict";n.d(t,{f:function(){return a}});var s=n(91473),r=n(88084),o=n(42044),i=n(68326),l=n(33631);let a=e=>({type:"notebook",slices:{notebook:{initialState:(0,r.D)(e),reducers:{...l.x,...r.$}},page:{initialState:(0,o.c)(e),reducers:o.q},authorization:{initialState:function(){let{initialAuthorization:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e||{}}(e),reducers:{}}},listeners:{...i.l,...s.C}})},97590:function(e,t,n){"use strict";n.d(t,{Y:function(){return r}});var s=n(11293);let r=async(e,t,n)=>{let{project:r,context:o}=t;try{await (0,s.XL)(r,o),n({type:"showSuccessToast",message:"Project deleted."})}catch(e){n({type:"showErrorToast",message:"Oops, deleting project ".concat(r.title," failed. Try again?")})}}},83394:function(e,t,n){"use strict";n.d(t,{x:function(){return o}});var s=n(39424),r=n(11293);let o=async(e,t,n)=>{let{project:o,editProjectRequest:i,projectMemberRequest:l,context:a}=t;try{if(!l&&!i){(0,s.Tb)(Error("updateProjectShareSettingsListener called with no updates"));return}l&&await (0,r.D7)(o,l,a),i&&await (0,r.Gg)(o,i,a),n({type:"showSuccessToast",message:"Project settings updated."})}catch(e){n({type:"showErrorToast",message:"Oops, updating settings for project ".concat(o.title," failed. Try again?")})}}},44593:function(e,t,n){"use strict";n.d(t,{ZP:function(){return c}});var s=n(67294),r=n(95591),o=n(11753),i=n(61688);let l=e=>(0,o.qC)(e?e(0,null):null)[0],a=Promise.resolve(),c=(0,o.xD)(r.ZP,e=>(t,n,r)=>{let c;let d=(0,s.useRef)(!1),{cache:u,initialSize:m=1,revalidateAll:h=!1,persistSize:p=!1,revalidateFirstPage:f=!0,revalidateOnMount:x=!1,parallel:g=!1}=r;try{(c=l(t))&&(c="$inf$"+c)}catch(e){}let[j,b,y]=(0,o.JN)(u,c),v=(0,s.useCallback)(()=>(0,o.o8)(j()._l)?m:j()._l,[u,c,m]);(0,i.useSyncExternalStore)((0,s.useCallback)(e=>c?y(c,()=>{e()}):()=>{},[u,c]),v,v);let w=(0,s.useCallback)(()=>{let e=j()._l;return(0,o.o8)(e)?m:e},[c,m]),k=(0,s.useRef)(w());(0,o.LI)(()=>{if(!d.current){d.current=!0;return}c&&b({_l:p?k.current:w()})},[c,u]);let N=x&&!d.current,S=e(c,async e=>{let s=j()._i,i=[],l=w(),[a]=(0,o.JN)(u,e),c=a().data,d=[],m=null;for(let e=0;e<l;++e){let[l,a]=(0,o.qC)(t(e,g?null:m));if(!l)break;let[p,x]=(0,o.JN)(u,l),j=p().data,b=h||s||(0,o.o8)(j)||f&&!e&&!(0,o.o8)(c)||N||c&&!(0,o.o8)(c[e])&&!r.compare(c[e],j);if(n&&b){let t=async()=>{x({data:j=await n(a),_k:a}),i[e]=j};g?d.push(t):await t()}else i[e]=j;g||(m=j)}return g&&await Promise.all(d.map(e=>e())),b({_i:o.i_}),i},r),C=(0,s.useCallback)(function(e,t){let n="boolean"==typeof t?{revalidate:t}:t||{},s=!1!==n.revalidate;return c?(s&&((0,o.o8)(e)?b({_i:!0}):b({_i:!1})),arguments.length?S.mutate(e,{...n,revalidate:s}):S.mutate()):a},[c,u]),_=(0,s.useCallback)(e=>{let n;if(!c)return a;let[,s]=(0,o.JN)(u,c);if((0,o.mf)(e)?n=e(w()):"number"==typeof e&&(n=e),"number"!=typeof n)return a;s({_l:n}),k.current=n;let r=[],[i]=(0,o.JN)(u,c),l=null;for(let e=0;e<n;++e){let[n]=(0,o.qC)(t(e,l)),[s]=(0,o.JN)(u,n),a=n?s().data:o.i_;if((0,o.o8)(a))return C(i().data);r.push(a),l=a}return C(r)},[c,u,C,w]);return{size:w(),setSize:_,mutate:C,get data(){return S.data},get error(){return S.error},get isValidating(){return S.isValidating},get isLoading(){return S.isLoading}}})}},function(e){e.O(0,[8764,9273,3999,458,4169,1582,5337,2080,3838,528,4636,3550,9620,9430,2549,5590,8770,1207,3907,372,7297,1453,8234,7828,5946,9004,2888,9774,179],function(){return e(e.s=62907)}),_N_E=e.O()}]);