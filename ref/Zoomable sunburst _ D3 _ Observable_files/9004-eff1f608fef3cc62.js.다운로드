!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="90fa66b6-0c87-4485-bfc2-0e42c641d63a",e._sentryDebugIdIdentifier="sentry-dbid-90fa66b6-0c87-4485-bfc2-0e42c641d63a")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9004],{55302:function(e,s,l){var t=l(85893);s.Z=e=>(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 6C5 4.34315 6.34315 3 8 3C9.65685 3 11 4.34315 11 6V9H5V6ZM3 9V6C3 3.23858 5.23858 1 8 1C10.7614 1 13 3.23858 13 6V9H14V11H2V9H3ZM5 12C5 13.6569 6.34315 15 8 15C9.65685 15 11 13.6569 11 12H9C9 12.5523 8.55228 13 8 13C7.44772 13 7 12.5523 7 12H5Z",fill:"currentColor"})})},57901:function(e,s,l){var t=l(85893);s.Z=e=>(0,t.jsxs)("svg",{width:"15",height:"14",viewBox:"0 0 15 14",stroke:"currentColor",strokeWidth:"1.8",fill:"none",...e,children:[(0,t.jsx)("path",{d:"M9.82089 1.93099C10.0377 1.41845 10.6312 1.1815 11.1414 1.40381L13.3744 2.37686C13.8769 2.5958 14.1095 3.17838 13.896 3.68316L11.1838 10.0952C11.1074 10.2759 10.9795 10.4302 10.8161 10.5387L8.30663 12.2053C8.00426 12.4061 7.59541 12.2279 7.53662 11.8697L7.04682 8.88551C7.01623 8.69914 7.03904 8.50792 7.11262 8.33399L9.82089 1.93099Z"}),(0,t.jsx)("path",{d:"M3.75 13H1.75C1.61193 13 1.5 12.8881 1.5 12.75C1.5 12.6119 1.61193 12.5 1.75 12.5H3.75C3.88807 12.5 4 12.6119 4 12.75C4 12.8881 3.88807 13 3.75 13Z"})]})},43538:function(e,s,l){l.d(s,{$:function(){return r}});var t=l(85893),n=l(22007),a=e=>(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.00001 2L3 2H2L2 3L2.00001 8L4.00001 8L4.00001 5.47903L6.93541 8.41443L8.34963 7.00022L5.34941 4L8.00001 4L8.00001 2ZM8.00001 14H13H14V13V8H12V10.6122L9.50723 8.15797L8.10409 9.58317L10.5589 12H8.00001V14Z",fill:"currentColor"})});let r=e=>{let{dispatch:s}=e;return{onSelect:()=>{s({type:"enterFullscreen"})},disabled:!n.Z.fullscreenEnabled,children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a,{className:"mr2 h1 w1"}),"View in fullscreen"]})}}},18650:function(e,s,l){l.d(s,{A:function(){return c}});var t=l(85893),n=l(55302),a=e=>(0,t.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",...e,children:(0,t.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.03048 5.44473L5 7.41424V9H6.58576L8.58576 11H2V9H3V6C3 5.81231 3.01034 5.62704 3.03048 5.44473ZM11 8.58582L6.09584 3.68166C6.61382 3.25573 7.27705 3 8 3C9.65685 3 11 4.34315 11 6V8.58582ZM13 10.5858V9V6C13 3.23858 10.7614 1 8 1C6.72467 1 5.56087 1.47747 4.67759 2.26341L3.51959 1.10541L2.10538 2.51962L13.5741 13.9884L14.9883 12.5742L13 10.5858ZM10.761 13.1753L9.58576 12H9C9 12.5523 8.55228 13 8 13C7.44772 13 7 12.5523 7 12H5C5 13.6569 6.34315 15 8 15C9.23974 15 10.3038 14.248 10.761 13.1753Z",fill:"currentColor"})}),r=l(8273),i=l(68098);let c=e=>{let{notebook:s,dispatch:l}=e,{subscriptionState:c}=s;if(!(0,i.jF)(s)||(0,r.ws)(s)&&(0,r.hv)(s))return null;let o="comments"===c;return{onSelect:()=>{l({type:"updateSubscription",status:o?"none":"comments",trigger:"click",source:"notebookHeaderActionsMenu"})},children:(0,t.jsx)(t.Fragment,{children:o?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a,{className:"mr2 h1 w1"})," Disable notifications"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Z,{className:"mr2 h1 w1"})," Enable notifications"]})})}}},30096:function(e,s,l){l.d(s,{A:function(){return a}});var t=l(85893),n=l(69537);let a=e=>{let{notebook:{safe:s},dispatch:l}=e;return{onSelect:()=>l({type:s?"exitSafe":"enterSafe"}),children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Z,{className:"mr2 h1 w1"}),s?"Disable":"Enable"," safe mode"]})}}},90911:function(e,s,l){l.d(s,{e:function(){return a}});var t=l(85893),n=l(27640);let a=e=>{let{dispatch:s,page:l}=e;return{onSelect:()=>s({type:"togglePane",pane:"databases"}),children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Z,{className:"mr2 h1 w1"}),(null==l?void 0:l.pane)==="databases"?"Hide databases":"Show databases"]})}}},94118:function(e,s,l){l.d(s,{m:function(){return a}});var t=l(85893),n=l(69377);let a=e=>{let{dispatch:s,page:l}=e;return{onSelect:()=>s({type:"togglePane",pane:"files"}),children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Z,{className:"mr2 h1 w1"}),(null==l?void 0:l.pane)==="files"?"Hide files":"Show files"]})}}},66002:function(e,s,l){l.d(s,{S:function(){return a}});var t=l(85893),n=l(39248);let a=e=>{let{dispatch:s,page:l}=e;return{onSelect:()=>s({type:"togglePane",pane:"help"}),children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Z,{className:"mr2 h1 w1"}),(null==l?void 0:l.pane)==="help"?"Hide help":"Show help"]})}}},25332:function(e,s,l){l.d(s,{P:function(){return o}});var t=l(85893),n=l(88815),a=l(46582),r=l(67534),i=l(52332),c=l(8273);let o=e=>{let{notebook:s,dispatch:l}=e;return(0,c.Or)(s)?(0,i.sm)(s.suggestionFrom)?{onSelect:()=>l({type:"showModal",modal:"closeSuggestion",modalProps:{trigger:"click",source:"notebookContextMenu"}}),children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.Z,{className:"mr2 h1 w1"}),"Close suggestion"]})}:null:(0,i.uh)(s)?{onSelect:()=>l({type:"showModal",modal:"suggest"}),disabled:!(0,r.MJ)(s),children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.v,{className:"mr2 h1 w1"}),"Suggest"]})}:null}},6096:function(e,s,l){l.d(s,{n:function(){return eL}});var t=l(85893),n=l(40645),a=l.n(n),r=l(94184),i=l.n(r),c=l(67294),o=l(55732),d=l(94006),m=l(64664),h=l(63650),x=l(90747),p=l(68059),u=l(55467),f=l(57901),g=l(36779),b=l(55560),j=l(52332),v=l(68098);let w=e=>{let{author:s,className:l=""}=e;return(0,t.jsxs)("div",{className:i()("flex items-center",l),children:[s.approved?(0,t.jsx)(h.Yt,{user:{...s,type:"individual"},size:16,style:{verticalAlign:"text-bottom"},className:"w1 h1 mr1"}):(0,t.jsx)(u.Z,{className:"yellow w1 h1 mr1",style:{verticalAlign:"text-bottom"}}),(0,t.jsx)("div",{className:"inline-flex items-center",children:(0,v.RX)(s)})]})},y=e=>{let s,{authors:l}=e;switch(l.length){case 1:s=(0,t.jsx)(w,{author:l[0]});break;case 2:s=(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w,{author:l[0],className:"mr1"}),(0,t.jsx)("span",{className:"mr1",children:" and"}),(0,t.jsx)(w,{author:l[1]})]});break;default:s=(0,t.jsxs)("span",{className:"inline-flex items-center",style:{marginLeft:10},children:[l.slice(0,5).map((e,s)=>(function(e){let{i:s,author:n}=e;return n.approved?(0,t.jsx)(h.Yt,{user:{...n,type:"individual"},size:16,style:{verticalAlign:"text-bottom",marginLeft:(-9.6*l.length-1)/l.length},className:"w1 h1 mr1 b--white ba"},s):(0,t.jsx)(u.Z,{className:"yellow w1 h1 mr1 br-100 b--white ba",style:{verticalAlign:"text-bottom",marginLeft:(-9.6*l.length-1)/l.length}},s)})({author:e,i:s})),(0,t.jsxs)("span",{className:"nowrap",children:[l.length," authors"]})]})}return s},N=e=>{let{author:s,showDescription:l=!1}=e,n=(0,v.AW)(s);return(0,t.jsxs)("div",{className:"flex items-center-ns items-start bt b--silver pa2 f6 lh-f6 justify-between flex-row-ns flex-column-reverse",children:[(0,t.jsxs)("div",{className:"flex items-center overflow-hidden",children:[(0,t.jsx)(h.Yt,{user:{...s,type:"individual"},size:46,style:{verticalAlign:"text-bottom"},link:!0,className:"w1 h1 mr2"}),(0,t.jsxs)("div",{className:"flex flex-auto flex-column",children:[(0,t.jsx)(g.Z,{href:n,className:"fw6 black hover-blue no-underline truncate",children:(0,v.RX)(s)}),s.approved?(0,t.jsx)("div",{className:"line-clamp-2 fw4 f6 lh-f7 mid-gray",children:s.bio}):(0,t.jsxs)("div",{className:"tr yellow fw5 flex items-center justify-start tooltipped tooltipped-n","aria-label":"".concat((0,v.RX)(s)," has not accepted the author request"),children:[(0,t.jsx)(u.Z,{className:"mr1"})," Invited"]})]})]}),l&&(0,t.jsx)("div",{className:"line-clamp-2 fw4 f6 lh-f7 mid-gray tr-ns ml2-ns pb2 pb0-ns w4-ns",style:{flexGrow:0,flexShrink:0},children:s.description})]})},k=e=>{let{notebook:s,dispatch:l,currentUser:n}=e,{authors:a}=s,{open:r,openMenu:i,closeMenu:o,triggerRef:d,uiRef:m}=(0,b.O)(),h=a.some(e=>e.description),u=null!==n&&a.some(e=>{let{id:s,approved:l}=e;return s===n.id&&!l}),g=null!==n&&!(0,j.mG)(s)&&a.some(e=>{let{id:s,approved:l}=e;return s===n.id&&l}),v=(0,j.mG)(s)&&!u;return(0,c.useEffect)(()=>{u&&i()},[u,i]),(0,t.jsxs)("div",{className:"relative inline-flex items-center",children:[(0,t.jsxs)("button",{"aria-label":r?"":"See who wrote this notebook",onClick:i,ref:d,className:"flex flex-wrap items-center pa0 bn bg-transparent pointer hover-blue",children:[(0,t.jsx)("span",{className:"mr1",children:"By "}),(0,t.jsx)(y,{authors:a})]}),r?(0,t.jsxs)(x.J,{ref:m,extraStyle:{right:"auto",left:0,width:"".concat(22+(h?4:0),"rem"),marginTop:"0.5rem",maxWidth:"calc(100vw - 2 * var( --spacing-large ))"},children:[(0,t.jsxs)("div",{className:"flex pa2 f7 fw5 items-center justify-between","data-testid":"notebook-num-authors",children:[a.length," author",a.length>1?"s":""]}),(0,t.jsx)("div",{className:"overflow-y-auto",style:{maxHeight:500},"data-testid":"notebook-authors",children:a.map((e,s)=>(0,t.jsx)(N,{author:e,showDescription:h},s))}),(v||g||u)&&(0,t.jsxs)("div",{className:"flex flex-row-reverse justify-between items-center bt b--silver pa2 bg-near-white",children:[v&&(0,t.jsx)(p.sn,{text:"Edit",icon:f.Z,onClick:()=>{o(),l({type:"showModal",modal:"authors"})}}),u&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(p.sn,{text:"Deny",onClick:()=>l({type:"setAuthorAcceptance",currentUser:n,value:!1})}),(0,t.jsx)(p.sn,{text:"Accept",onClick:()=>l({type:"setAuthorAcceptance",currentUser:n,value:!0})})]}),(0,t.jsx)("div",{children:"Join author list?"})]}),g&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(p.sn,{text:"Revoke",onClick:()=>l({type:"setAuthorAcceptance",currentUser:n,value:!1})}),(0,t.jsx)("div",{children:"Leave author list?"})]})]})]}):null]})};k.applies=e=>{let{notebook:{authors:s,owner:l}}=e;return s.length>1||1===s.length&&s[0].id!==l.id};var C=l(80583),L=l(67374),Z=l(62814),F=l(84795),H=l(13370),S=l(34978),V=l(91529);let _="flex items-center pa0 bg-transparent bn hover-blue pointer no-underline",M=e=>{let{notebook:s,dispatch:l}=e,n=(0,F.h)(s),{collections:a}=s,r=(0,H.GS)(H.hs);return 1===a.length?(0,t.jsxs)(g.Z,{href:r?(0,S.L7)(s,n):(0,S.WG)(n),"data-cy":"collections","aria-label":"Open collections browser",className:_,onClick:e=>{e.metaKey||e.ctrlKey||(l({type:"setOpenCollection",collection:a[0]}),e.preventDefault())},children:[(0,t.jsx)(L.Z,{className:"mr1 moon-gray",style:{flexShrink:0}}),(0,V.Ui)(n)]}):(0,t.jsxs)(C.v2,{children:[(0,t.jsxs)(C.j2,{className:_,children:[(0,t.jsx)(L.Z,{className:"mr1 moon-gray",style:{flexShrink:0}}),(0,V.CZ)(a.length),"\xa0collections"]}),(0,t.jsx)(C.qy,{className:"reach-menu",children:(0,t.jsx)("div",{className:"pt2",children:(0,t.jsxs)("div",{className:"overflow-y-auto bg-white z-5 shadow-3 br2",style:{maxHeight:320,maxWidth:260},children:[(0,t.jsx)("div",{className:"flex pa2 f7 fw5 items-center justify-between bb b--light-silver",children:(0,t.jsx)("span",{children:"Listed in..."})}),a.map((e,n)=>(0,t.jsxs)(C.Uk,{style:{display:"grid",gridTemplateColumns:"60px auto",alignItems:"center",gridGap:"0 10px"},onClick:s=>{s.metaKey||s.ctrlKey||(l({type:"setOpenCollection",collection:e}),s.preventDefault())},href:r?(0,S.L7)(s,e):(0,S.WG)(e),className:i()("pa2",Z.np),children:[(0,t.jsx)(D,{thumbnail:e.thumbnail}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"pt1 f6 fw6 mr1 near-black ws-normal",title:(0,V.Ui)(e),children:(0,V.Ui)(e)}),(0,t.jsx)("div",{className:"pt1 f7 inline-flex items-center mid-gray",children:(0,v.RX)(e.owner)})]})]},n))]})})})]})};function D(e){let{thumbnail:s}=e,l={width:"calc(100% - ".concat(6,"px)"),height:"calc(100% - ".concat(6,"px)")};return(0,t.jsxs)("div",{className:"relative",style:{width:54,height:40},children:[(0,t.jsx)("div",{className:"absolute bg-white ba b--silver br2",style:{top:6,left:6,...l}}),(0,t.jsx)("div",{className:"absolute bg-white ba b--silver br2",style:{top:3,left:3,...l}}),(0,t.jsx)("div",{className:i()("absolute ba b--silver br2",s?"bg-center cover ":" "),style:{top:0,left:0,...l,backgroundImage:s?"url(".concat("https://static.observableusercontent.com","/thumbnail/").concat(s,".jpg)"):"var(--checkerboard)"}})]})}M.applies=e=>{let{notebook:s}=e;return s.collections.length>0};var R=l(1639),T=l(89268),A=l(18701),I=l(57321),B=l(61802),E=l(15784),G=l(8273),P=l(49803);let U=()=>(0,t.jsx)("span",{className:"mh1 light-gray",children:"•"});function O(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return(0,t.jsx)("div",{className:i()("br2 ba b--silver",e.thumbnail&&"cover"),style:{paddingTop:"62.5%",backgroundImage:e.thumbnail?"url(".concat((0,E.Nl)(e.thumbnail),")"):"var(--checkerboard)"}},s)}function W(e,s,l){let n=s.length>1;n&&(s=s.concat(s).slice(0,4));let a=s[0],r=n?"".concat((0,E.Bi)(e),"/forks"):(0,E.Bi)(a),i=n?"".concat(l," more..."):(0,V.Ui)(s[0]);return(0,t.jsxs)(g.Z,{href:r,className:"pa2 nl2 nr2 no-underline near-black hover-light-blue hover-bg-near-white b--silver",style:{display:"grid",gridTemplateColumns:"60px auto",alignItems:"center",gridGap:"0 10px"},children:[1===s.length?O(a):(0,t.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gridColumn:"1 / 2",gap:"2px"},children:s.map(O)}),(0,t.jsxs)("div",{className:"overflow-hidden",children:[(0,t.jsx)("div",{className:"truncate pv1 f6 fw5",children:(0,t.jsx)("span",{title:i,className:"mr1",children:i})}),!n&&(0,t.jsx)("div",{className:"pb1 f7 mid-gray",children:(0,t.jsxs)("div",{className:"inline-flex items-center",children:[(0,t.jsx)("span",{children:(0,v.RX)(a.owner)}),(0,t.jsx)("span",{title:(0,P.mr)(new Date(a.update_time)),className:"ml2 nowrap",suppressHydrationWarning:!0,children:(0,P.LN)(new Date(a.update_time),new Date)}),a.likes>0?(0,t.jsxs)(t.Fragment,{children:[a.like?(0,t.jsx)(I.Je,{className:"moon-gray mh1"}):(0,t.jsx)(I.Bj,{className:"moon-gray mh1"}),(0,t.jsx)("span",{children:(0,V.CZ)(a.likes)})]}):null]})})]})]},a.id)}function Y(e,s){return s.owner.id===e.owner.id}function X(e){let{notebook:s,numForks:l,forks:n,title:a}=e,r=n.slice(0,3),i=n.length-r.length;1===i&&(i=0,r=n.slice(0,4));let c=n.slice(l).concat(n);return(0,t.jsx)(t.Fragment,{children:0!==r.length&&(0,t.jsxs)("div",{className:"f7 bt mid-gray pa2 b--silver",children:[(0,t.jsx)("div",{className:"pb2",children:a}),r.map(e=>W(s,[e])),i?W(s,c,i):""]})})}function z(e){let{notebook:s,currentUser:l,numForks:n}=e,{data:a}=(0,B.h_)("/document/".concat(s.slug?"@".concat(s.owner.login,"/").concat(s.slug):s.id,"/forks?type=").concat(l?"all":"public")),r=a||[],i=r.filter(e=>Y(s,e)),c=r.filter(e=>!Y(s,e));return(0,t.jsx)("div",{className:"dark-gray",children:a?(0,t.jsxs)("div",{className:"overflow-y-auto",style:{maxHeight:500},children:[(0,t.jsxs)("div",{className:"flex pa2 f7 fw5 items-center justify-between",children:[(0,t.jsx)("span",{children:(0,G.YY)(n,"fork","forks")}),(0,t.jsxs)(g.Z,{href:"".concat((0,E.Bi)(s),"/forks"),className:"inline-flex fw5 no-underline blue hover-dark-blue items-center",children:[(0,t.jsx)("span",{className:"nowrap",children:"View all forks"})," ",(0,t.jsx)(R.Z,{className:"ml1"})]})]}),X({notebook:s,numForks:n,forks:i,title:"Owner forks"}),X({notebook:s,numForks:n,forks:c,title:"Community forks"})]}):(0,t.jsxs)("div",{className:"flex pa2 f7 fw5 gray items-center",children:[(0,t.jsx)(A.Z,{className:"mr2 blue"}),(0,t.jsx)("span",{children:"Loading…"})]})})}let J=e=>{let{open:s,openMenu:l,triggerRef:n,uiRef:a}=(0,b.O)(),{forks:r,forkOf:c}=e.notebook;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(T.Z,{className:"mr1 moon-gray",style:{flexShrink:0}}),c&&(0,t.jsxs)("div",{className:"truncate",children:["Fork of"," ",(0,t.jsx)(g.Z,{href:(0,E.Bi)(c),className:"no-underline hover-blue",children:(0,V.Ui)(c)})]}),r&&c?(0,t.jsx)(U,{}):null,r>0&&(0,t.jsxs)("div",{className:i()("relative",s?"":"hover-blue","pointer inline-flex items-center"),ref:n,onClick:l,"data-cy":"forks-dropdown",children:[(0,t.jsx)("span",{className:"inline-flex items-center",children:(0,G.YY)(r,"fork","forks")}),s&&(0,t.jsx)(x.J,{ref:a,extraStyle:{right:"auto",left:0,width:"17rem",marginTop:"0.5rem",cursor:"default"},children:(0,t.jsx)(z,{numForks:r,...e})})]})]})};J.applies=e=>{let{notebook:s}=e;return!!s.forks||!!s.forkOf};var K=l(87081);let q=e=>{let{notebook:s}=e;return(0,t.jsxs)(g.Z,{href:(0,E.Bi)(s),className:"pa2 no-underline near-black hover-light-blue hover-bg-near-white bt b--silver",style:{display:"grid",gridTemplateColumns:"60px auto",alignItems:"center",gridGap:"0 10px"},children:[(0,t.jsx)("div",{className:i()("relative br2 ba b--silver",s.thumbnail?"cover bg-center":""),style:{paddingTop:"62.5%",backgroundColor:"#fff",backgroundImage:s.thumbnail?"url(".concat("https://static.observableusercontent.com","/thumbnail/").concat(s.thumbnail,".jpg)"):"var(--checkerboard)"}}),(0,t.jsxs)("div",{className:"overflow-hidden",children:[(0,t.jsx)("div",{className:"truncate pv1 f6 fw5",children:(0,t.jsx)("span",{title:(0,V.Ui)(s),className:"mr1",children:(0,V.Ui)(s)})}),(0,t.jsx)("div",{className:"pb1 f7 fw5 dark-gray",children:(0,t.jsxs)("div",{className:"inline-flex items-center",children:[(0,t.jsx)("span",{children:(0,v.RX)(s.owner)}),!!s.update_time&&(0,t.jsx)("span",{title:(0,P.mr)(new Date(s.update_time)),className:"ml1 nowrap",suppressHydrationWarning:!0,children:(0,P.LN)(new Date(s.update_time),new Date)}),s.likes>0?(0,t.jsxs)(t.Fragment,{children:[s.like?(0,t.jsx)(I.Je,{className:"mh1 moon-gray"}):(0,t.jsx)(I.Bj,{className:"mh1 moon-gray"}),(0,t.jsx)("span",{children:(0,V.CZ)(s.likes)})]}):null]})})]})]},s.id)};function Q(e){let{notebook:s}=e,{slug:l,id:n,owner:a}=s,{data:r}=(0,B.h_)("/document/".concat(l?"@".concat(a.login,"/").concat(l):n,"/importers?page=1"));return(0,t.jsx)("div",{className:"dark-gray",children:void 0===r?(0,t.jsxs)("div",{className:"flex pa2 f7 fw5 gray items-center",children:[(0,t.jsx)(A.Z,{className:"mr2 blue"}),(0,t.jsx)("span",{children:"Loading…"})]}):0===r.total?(0,t.jsx)("div",{className:"flex pa2 f7 fw5 items-center",children:(0,t.jsx)("span",{children:"This notebook has private importers"})}):(0,t.jsxs)("div",{className:"overflow-y-auto",style:{maxHeight:500},children:[(0,t.jsxs)("div",{className:"flex pa2 f7 fw5 items-center justify-between",children:[(0,t.jsx)("span",{children:(0,G.YY)(r.total,"importer")}),(0,t.jsxs)(g.Z,{href:"".concat((0,E.Bi)(s),"/importers"),className:"inline-flex fw5 no-underline blue hover-dark-blue items-center",children:[(0,t.jsx)("span",{className:"nowrap",children:"View all importers"})," ",(0,t.jsx)(R.Z,{className:"ml1"})]})]}),r.results.map((e,s)=>(0,t.jsx)(q,{notebook:e},s)),(0,t.jsx)("div",{className:"pa2 f7 fw5 gray bt b--silver",children:"Imports indexed every 10 minutes"})]})})}let $=e=>{let{open:s,openMenu:l,triggerRef:n,uiRef:a}=(0,b.O)(),{hasImporters:r}=e.notebook;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(K.Z,{className:"mr1 moon-gray",style:{flexShrink:0}}),r&&(0,t.jsxs)("div",{className:i()("relative",s?"":"hover-blue","pointer inline-flex items-center"),ref:n,onClick:l,"data-cy":"importers-dropdown",children:[(0,t.jsx)("span",{className:"inline-flex items-center",children:(0,t.jsx)("span",{children:"Importers"})}),s&&(0,t.jsx)(x.J,{ref:a,extraStyle:{right:"auto",left:0,width:"17rem",marginTop:"0.5rem",cursor:"default"},children:(0,t.jsx)(Q,{...e})})]})]})};$.applies=e=>{let{notebook:s}=e;return s.hasImporters};var ee=l(92790),es=l(40913);function el(){}let et=e=>{let{notebook:s}=e,{model:{license:l}}=s,n=(0,j.mG)(s)||"other"!==l;return(0,t.jsx)(t.Fragment,{children:l&&(0,t.jsx)("button",{className:i()("flex pa0 f6 dark-gray bg-transparent button-reset items-center",n?"pointer hover-blue":"","bn hg lh-solid"),style:{marginTop:-2},"aria-label":"View license",onClick:n?el:void 0,children:(0,t.jsxs)("span",{className:"flex f6 nowrap items-center",children:[(0,t.jsx)(ee.Z,{className:"mr2 moon-gray"}),(0,t.jsxs)("span",{className:"inline-flex items-center",children:[(0,t.jsx)("span",{className:"ph1 code f7 black-50 br2 br--left bg-lightest-red",style:{padding:"3px 5px"},children:"-"}),(0,t.jsx)("span",{className:"ph1 bg-washed-red",style:{padding:"2px 8px 2px 5px"},children:(0,es.ax)("")}),(0,t.jsx)("span",{className:"ph1 code f7 black-50 bg-lightest-green",style:{marginLeft:1,padding:"3px 5px"},children:"+"}),(0,t.jsx)("span",{className:"ph1 bg-washed-green br2 br--right",style:{padding:"2px 8px 2px 5px"},children:(0,es.ax)(l)})]})]})})})};et.applies=e=>{let{notebook:s}=e;return s.model.license,!1};let en=(0,l(47720).ZV)(e=>{let{notebook:s}=e;if("notebookCompare"!==e.type)return{notebook:s};{let{baseNotebook:l}=e;return{notebook:s,baseLicense:l.model.license,baseCopyright:l.model.copyright}}},e=>({dispatch:e}))(e=>{let{notebook:s,baseLicense:l,baseCopyright:n,dispatch:a}=e,{model:{license:r,copyright:c}}=s,o=(0,j.mG)(s)||"other"!==r;function d(){o&&a({type:"showModal",modal:"license"})}return(0,t.jsx)(t.Fragment,{children:(r||l)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ee.Z,{className:"mr1 moon-gray"}),void 0!==l&&(l!==r||n!==c)?(0,t.jsx)("button",{className:i()("flex pa0 f6 dark-gray bg-transparent button-reset items-center",o?"pointer hover-blue":"","bn hg lh-solid"),style:{marginTop:-2},"aria-label":"View license",onClick:d,children:(0,t.jsxs)("span",{className:"inline-flex items-center",children:[(0,t.jsx)("span",{className:"ph1 code f7 black-50 br2 br--left bg-lightest-red",style:{padding:"3px 5px"},children:"-"}),(0,t.jsx)("span",{className:"ph1 bg-washed-red",style:{padding:"2px 8px 2px 5px"},children:(0,es.ax)(l)}),(0,t.jsx)("span",{className:"ph1 code f7 black-50 bg-lightest-green",style:{marginLeft:1,padding:"3px 5px"},children:"+"}),(0,t.jsx)("span",{className:"ph1 bg-washed-green br2 br--right",style:{padding:"2px 8px 2px 5px"},children:(0,es.ax)(r)})]})}):(0,t.jsx)("button",{className:i()("flex pa0 f6 dark-gray bg-transparent button-reset items-center bn",o?"pointer hover-blue":""),"aria-label":"View license",onClick:d,children:(0,t.jsx)("span",{children:"\xa0".concat((0,es.ax)(r))})})]})})});en.applies=e=>{let{notebook:s,baseNotebook:l}=e;return!!s.model.license||!!(null==l?void 0:l.model.license)};var ea=l(23181);let er=e=>{let{notebook:s}=e;return(0,t.jsx)(ea.h,{commentingLock:s.commentingLock})};er.applies=e=>{let{notebook:s}=e;return null!==s.commentingLock&&(s.commentingLock.admin_locked||s.commentingLock.user_locked)};var ei=l(25192),ec=l(34397);let eo=e=>{let{notebook:s}=e,{open:l,openMenu:n,triggerRef:a,uiRef:r}=(0,b.O)(),{id:c,initialLatestVersion:o,isPausedLoad:d,pausedVersion:m}=s,{data:h}=(0,B.h_)("/document/".concat(c,"@").concat(d?o:m)),p={date:(0,P.LN)((null==h?void 0:h.update_time)||new Date),owner:(null==h?void 0:h.owner)||s.owner,path:(0,E.UW)(s)+(d?"@latest":"@paused"),thumbnail:null==h?void 0:h.thumbnail,version:d?o:m},u="/compare/".concat(c,"@").concat(d?m:Math.max(s.saveVersion,o),"...").concat(c,"@").concat(d?Math.max(s.saveVersion,o):m),f="Compare ".concat(d?"latest":"paused"," version to ").concat(d?"paused":"latest"," version");return(0,t.jsxs)("div",{className:"relative inline-flex items-center",children:[(0,t.jsxs)("div",{className:"inline-flex items-center",children:[(0,t.jsx)(ei.Z,{className:"mr1 moon-gray"}),(0,t.jsx)("span",{className:"pointer",onClick:n,ref:a,title:"This is the ".concat(d?"paused":"latest"," version of the notebook. Click here to see information about the ").concat(d?"latest":"paused"," version."),children:d?"Paused":"Latest"})]}),l&&(0,t.jsx)(x.J,{ref:r,extraStyle:{right:"auto",left:0,width:"17rem",marginTop:"0.5rem"},children:(0,t.jsxs)("div",{className:"pa0 bg-transparent bn",children:[(0,t.jsx)("div",{className:"pa2 lh-title fw6",children:"Live editing paused"}),(0,t.jsxs)("div",{className:"pa2 flex items-center bt b--silver w-100",children:[(0,t.jsx)("div",{className:i()("mr2 ba br2 b--silver flex-no-shrink",p.thumbnail&&"cover"),style:{backgroundImage:p.thumbnail?"url(".concat((0,E.Nl)(p.thumbnail),")"):"var(--checkerboard)",height:38,width:60}}),(0,t.jsxs)("div",{className:"mid-gray w-100 truncate",children:[(0,t.jsxs)(g.Z,{href:p.path,className:"flex items-center lh-copy fw6 blue animate-all",children:["View ".concat(d?"latest":"paused"," version"),(0,t.jsx)(R.Z,{className:"ml1"})]}),(0,t.jsxs)("div",{className:"flex items-center f7 mt1",children:[(0,t.jsxs)(g.Z,{href:u,className:"flex-no-shrink hover-blue",title:f,children:["v",p.version]}),(0,t.jsx)("div",{className:"light-gray mh1",children:"•"}),(0,t.jsx)("div",{className:"flex-no-shrink",children:p.date}),(0,t.jsx)("div",{className:"light-gray mh1",children:"•"}),(0,t.jsx)(g.Z,{href:(0,v.Pu)(p.owner),className:"truncate truncate-two-lines dib items-center no-underline near-black hover-blue mid-gray",children:(0,v.RX)(p.owner)})]})]})]}),(0,t.jsx)("div",{className:"pa2 bg-near-white f7 lh-f7",children:(0,j.mG)(s)?ec.H:ec.r})]})})]})};eo.applies=e=>{let{notebook:s}=e;return!!(0,G.z4)(s)&&!s.isCompare&&!!(s.isPausedLoad||(0,G.tK)(s)&&s.autosave)};var ed=l(97542),em=l(107),eh=l(62539);let ex=e=>{let{notebook:s,dispatch:l}=e,{publishTime:n,saveTime:a}=s,r=n||a,o=(0,eh.L)(r),d=(0,em.d)((0,c.useCallback)(()=>"Edited ".concat((0,P.mr)(a)),[a]),""),m=(0,em.d)((0,c.useCallback)(()=>{let e=(0,j.pT)(s);function n(){e&&l({type:"togglePane",pane:"history"})}return(0,t.jsx)("div",{className:i()("pl1 no-underline",{"pointer hover-blue":e}),onKeyDown:n,onClick:n,suppressHydrationWarning:!0,children:(0,P.LN)(a,o)})},[s,a,o,l]),(0,t.jsx)(t.Fragment,{}));return(0,t.jsxs)("div",{className:"flex items-center",title:d,children:[(0,t.jsx)(ed.Z,{className:"mr1 moon-gray"}),"Edited ",m]})};ex.applies=()=>!0;let ep=e=>{let{notebook:{id:s,likes:l}}=e,{data:n}=(0,B.h_)("/document/".concat(s,"/likes"));return(0,t.jsx)("div",{className:"dark-gray",children:(0,t.jsxs)("div",{className:"overflow-y-auto",style:{maxHeight:160},children:[(0,t.jsx)("div",{className:"flex pa2 f7 fw5 items-center justify-between",children:(0,t.jsxs)("span",{children:[(0,V.CZ)(l)," star",1===l?"":"s"]})}),n?n.map(e=>(0,t.jsxs)(g.Z,{href:(0,v.AW)(e),className:"pa2 no-underline near-black hover-light-blue hover-bg-near-white bt b--silver",style:{display:"grid",gridTemplateColumns:"16px auto",alignItems:"center",gridGap:"0 10px"},children:[(0,t.jsx)(h.Yt,{user:{...e,type:"individual"},size:16}),(0,t.jsx)("div",{className:"overflow-hidden",children:(0,t.jsx)("div",{className:"truncate pv1 f6 fw5",children:(0,t.jsx)("span",{title:(0,v.RX)(e),className:"mr1",children:(0,v.RX)(e)})})})]},e.id)):null]})})},eu=e=>{let{notebook:s,notebook:{likes:l},notebook:{like:n}}=e,{open:a,openMenu:r,triggerRef:i,uiRef:c}=(0,b.O)(),o=n?(0,t.jsx)(I.ZP,{className:"mr1",color:"var(--moon-gray)"}):(0,t.jsx)(I.Df,{className:"mr1",color:"var(--moon-gray)"});return(0,j.mG)(s)?(0,t.jsxs)("div",{className:"relative inline-flex items-center",children:[o,(0,t.jsxs)("button",{"aria-label":a?"":"See who starred this notebook",onClick:r,ref:i,className:"flex items-center pa0 bn bg-transparent pointer hover-blue",children:[(0,V.CZ)(l),"\xa0star",1===l?"":"s"]}),a?(0,t.jsx)(x.J,{ref:c,extraStyle:{right:"auto",left:0,width:"15rem",marginTop:"0.5rem"},children:(0,t.jsx)(ep,{...e})}):null]}):(0,t.jsxs)(t.Fragment,{children:[o,(0,V.CZ)(l),"\xa0star",1===l?"":"s"]})};eu.applies=e=>{let{notebook:s}=e;return s.likes>0};var ef=l(26243);let eg=e=>{let{dispatch:s,...l}=e,{notebook:n}=l,a=(0,j.yF)(n)&&!n.isCompare,r=(0,t.jsx)(ef.LR,{addHover:a,...l});return a?(0,t.jsx)("button",{onClick:()=>s({type:"showModal",modal:"share"}),className:"pa0 bg-transparent bn pointer",children:r}):(0,t.jsxs)(t.Fragment,{children:[" ",r," "]})};eg.applies=()=>!0;var eb=e=>{let{notebook:s,baseNotebook:l,currentUser:n,dispatch:a}=e,r=[eg,M,k,ex,eo,en,et,J,$,er,eu],i={notebook:s,baseNotebook:l,currentUser:n,user:!0,dispatch:a};return(0,t.jsx)("div",{className:"flex pb3 f6 dark-gray items-center flex-row flex-wrap lh-f6 mw-100","data-cy":"metadata-bar",children:r.map((e,s)=>e.applies(i)?(0,t.jsx)("div",{className:"flex items-center mt2 mr3 min-w-0",children:(0,c.createElement)(e,i)},s):null)})},ej=l(70314);let ev=/\B@([\w-]{1,39})/g,ew=e=>{let{text:s}=e,[l]=(0,c.useState)(s.match(ev)),{data:n}=(0,B.h_)(l?"/users-exist?".concat(l.map(e=>"login=".concat(e.substr(1).toLowerCase())).join("&")):null);if(!n)return(0,t.jsx)(t.Fragment,{children:s});let a=new Map(n),r=[],i,o=0;for(;null!==(i=ev.exec(s));){let e=s.substring(o,i.index);e&&r.push((0,t.jsx)(t.Fragment,{children:e}));let l=i[1],n=a.get(l.toLowerCase());n&&"unavailable"!==n?r.push((0,t.jsxs)(g.Z,{href:(0,v.Pu)({login:l.toLowerCase()}),className:"no-underline black-70 hover-blue",children:["@",l]},o)):r.push((0,t.jsxs)(t.Fragment,{children:["@",l]})),o=i.index+i[0].length}return o!==s.length&&r.push((0,t.jsx)(t.Fragment,{children:s.substring(o,s.length)})),r.reduce((e,s)=>(0,t.jsxs)(t.Fragment,{children:[e,s]}))},ey=(0,c.memo)(function(e){let{owner:s}=e;return(0,t.jsxs)("div",{className:"flex items-center tw-w-full tw-max-w-[400px]",children:[(0,t.jsx)(g.Z,{href:(0,v.Pu)(s),children:(0,t.jsx)(h.qE,{user:s,className:"inline-flex mw-none",size:32})}),(0,t.jsxs)("div",{className:"pl2 f6 lh-f6 w-100",children:[(0,t.jsx)("div",{className:"flex items-center justify-start",children:(0,t.jsx)(g.Z,{href:(0,v.Pu)(s),className:"truncate truncate dib items-center no-underline near-black hover-blue pr2 fw7",children:(0,v.RX)(s)})}),s.bio&&(0,t.jsx)("div",{className:"fw4 f6 lh-f7 mid-gray line-clamp-1",children:s.bio?(0,t.jsx)(ew,{text:s.bio}):null})]})]})});var eN=l(8420),ek=l(85049);let eC=e=>{let{stuck:s,...l}=e,{notebook:n}=l,{model:{title:a}}=n;return(0,t.jsxs)(m.Z,{className:"tw-mt-sm tw-flex tw-flex-col-reverse tw-justify-center navlg:tw-flex-row navlg:tw-justify-between navlg:tw-items-center",style:{minHeight:ek.MT},children:[s?(0,t.jsx)("div",{className:"tw-hidden navlg:tw-block serif f5 dark-gray b truncate",children:a}):(0,t.jsx)(ey,{owner:n.owner,currentUser:l.currentUser}),(0,t.jsx)("div",{className:i()("tw-self-end navlg:tw-self-center nowrap body tw-w-full",s?"":"tw-mb-md navlg:tw-mb-0"),"data-cy":"notebook-title",children:(0,t.jsx)(ej.ZP,{...l})})]})},eL=e=>{let{SelectedBanner:s,baseNotebook:l,...n}=e,{notebook:r,currentUser:h,promotedActions:x,dispatch:p}=n,u=(0,o.C)(r)||x.some(e=>e.highlight)||void 0!==s,f=(0,c.useRef)(null),g=(0,eN.E)(f,{defaultValue:!0}),b=(0,em.d)((0,c.useCallback)(()=>!g&&u,[g,u]),!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{ref:f,className:a().dynamic([["dcbdac08032667f9",[h?"0px":"".concat(ek.Lv,"px"),H.pp,h?"0px":"".concat(ek.Lv,"px")]]])}),(0,t.jsx)("div",{className:a().dynamic([["dcbdac08032667f9",[h?"0px":"".concat(ek.Lv,"px"),H.pp,h?"0px":"".concat(ek.Lv,"px")]]])+" "+(i()("mb2 bg-white z-1 dn-print body",s?"bn banner":"bb mt3",u?"sticky":"",b?"stuck b--light-silver":"b--transparent")||""),children:s?(0,t.jsx)(s,{stuck:b,...n,className:a().dynamic([["dcbdac08032667f9",[h?"0px":"".concat(ek.Lv,"px"),H.pp,h?"0px":"".concat(ek.Lv,"px")]]])+" "+(n&&null!=n.className&&n.className||"")}):(0,t.jsx)(eC,{stuck:b,...n})}),s&&(0,t.jsx)("div",{className:a().dynamic([["dcbdac08032667f9",[h?"0px":"".concat(ek.Lv,"px"),H.pp,h?"0px":"".concat(ek.Lv,"px")]]])+" dn-print tw-mt-md",children:(0,t.jsx)(eC,{stuck:!1,...n})}),(0,t.jsx)(m.Z,{className:"mt1 mt2-ns mb3 mb2-ns dn-print",children:(0,t.jsxs)("div",{className:a().dynamic([["dcbdac08032667f9",[h?"0px":"".concat(ek.Lv,"px"),H.pp,h?"0px":"".concat(ek.Lv,"px")]]])+" flex justify-between items-center bb b--light-silver",children:[(0,t.jsx)("div",{className:a().dynamic([["dcbdac08032667f9",[h?"0px":"".concat(ek.Lv,"px"),H.pp,h?"0px":"".concat(ek.Lv,"px")]]])+" flex flex-wrap",children:(0,t.jsx)(eb,{notebook:r,baseNotebook:l,currentUser:h,dispatch:p})}),(0,t.jsx)(d.l,{size:24,participants:r.participants})]})}),(0,t.jsx)(a(),{id:"dcbdac08032667f9",dynamic:[h?"0px":"".concat(ek.Lv,"px"),H.pp,h?"0px":"".concat(ek.Lv,"px")],children:".sticky.__jsx-style-dynamic-selector{top:".concat(h?"0px":"".concat(ek.Lv,"px"),"}@media ").concat(H.pp,"{.sticky.__jsx-style-dynamic-selector{top:").concat(h?"0px":"".concat(ek.Lv,"px"),'}}.body.__jsx-style-dynamic-selector{padding-right:"calc(420px - max((100vw - 64rem)/2, 0px))"}')})]})}},26680:function(e,s,l){l.d(s,{D:function(){return o}});var t=l(67294),n=l(15978),a=l(67534),r=l(83879),i=l(52332),c=l(68347);function o(e){let s;function l(){s&&s.close(),s=void 0}let o=(0,c.x)(e,()=>{if(!r.Qg)return;let{notebook:t,currentUser:o}=e.getState(),{id:d}=t,m=(0,i.ZK)(t);if((0,a.QY)(t))s&&s.id===d&&s.clientRole===m||(l(),s=new n.Z((0,c.Q)(e),m,d));else{l();return}s.setState(t,o)});(0,t.useEffect)(()=>()=>{l(),o()})}},84795:function(e,s,l){l.d(s,{h:function(){return n}});var t=l(91529);function n(e){return e.initialCollection||e.collections.find(function(e){let s=(0,t.Ui)(e);return e=>s.includes((0,t.Ui)(e))}(e.model))||e.collections[0]}}}]);